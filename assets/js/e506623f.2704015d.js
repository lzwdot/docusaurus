"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[14922],{39041:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"/29458","metadata":{"permalink":"/docusaurus/blog/29458","editUrl":"https://github.com/lzwdot/docusaurus/blog/2022/02-11-29458/index.md","source":"@site/blog/2022/02-11-29458/index.md","title":"JS \u7cbe\u5ea6\u95ee\u9898\u7531\u6765\u53ca\u89e3\u51b3","description":"\u5728 js \u6d6e\u70b9\u6570\u8ba1\u7b97\u5b58\u5728\u7cbe\u5ea6\u95ee\u9898\uff0c\u8868\u73b0\u4e3a\uff1a0.1 + 0.2 = 0.30000000000000004\uff0c\u800c\u4e0d\u662f\u9884\u671f\u7684 0.3\uff0c\u8fd9\u91cc\u6d89\u53ca\u5230 js \u4e2d\u8fdb\u5236\u7684\u95ee\u9898","date":"2022-02-11T21:20:21.000Z","formattedDate":"2022\u5e742\u670811\u65e5","tags":[{"label":"js","permalink":"/docusaurus/blog/tags/js"},{"label":"BigInt","permalink":"/docusaurus/blog/tags/big-int"}],"readingTime":4.345,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"JS \u7cbe\u5ea6\u95ee\u9898\u7531\u6765\u53ca\u89e3\u51b3","ID":29458,"date":"2022-02-11 21:20:21","authors":["lzw"],"tags":["js","BigInt"],"slug":"/29458","type":"blog"},"nextItem":{"title":"\u6587\u4ef6\u4e0a\u4f20\u548c\u4f18\u5316","permalink":"/docusaurus/blog/29206"}},"content":"\x3c!--truncate--\x3e\\n\\n\u5728 js \u6d6e\u70b9\u6570\u8ba1\u7b97\u5b58\u5728\u7cbe\u5ea6\u95ee\u9898\uff0c\u8868\u73b0\u4e3a\uff1a`0.1 + 0.2 = 0.30000000000000004`\uff0c\u800c\u4e0d\u662f\u9884\u671f\u7684 `0.3`\uff0c\u8fd9\u91cc\u6d89\u53ca\u5230 js \u4e2d\u8fdb\u5236\u7684\u95ee\u9898\\n\\n## \u95ee\u9898\u7531\u6765\\n\\n\u5148\u770b\u4e00\u4e2a\u5341\u8fdb\u5236\u8f6c\u4e8c\u8fdb\u5236\u7684\u8ba1\u7b97\u8fc7\u7a0b\\n\\n```js\\n(57).toString(2); // \'111001\'\\n\\n// 57 /2 \u53d6\u4f59\\n// 28-1 => 14-0 => 7-0 => 3-1 => 1-1 => 1 \u6240\u4ee5\u4ece\u540e\u5f80\u524d\u7684\u4e8c\u8fdb\u5236\u5c31\u662f 111001\\n```\\n\\n\u518d\u770b\u4e00\u4e2a\u4f8b\u5b50\\n\\n```js\\n(26).toString(2); // 11010\\n\\n// 26 /2 \u53d6\u4f59\\n// 13-0 => 6-1 => 3-0 => 1-1 =>1 \u6240\u4ee5\u4ece\u540e\u5f80\u524d\u7684\u4e8c\u8fdb\u5236\u5c31\u662f 11010\\n```\\n\\n\u63a5\u7740\u770b\u4e0b 0.1 \u548c 0.2 \u8ba1\u7b97\u8fc7\u7a0b\\n\\n```js\\n(0.1)\\n  .toString(2)(\\n    // 0.0001100110011001100110011001100110011001100110011001101\\n    0.2\\n  )\\n  .toString(2); // 0.001100110011001100110011001100110011001100110011001101\\n\\n// 0.1 * 2 \u53d6\u6574\\n// 0.1 * 2 = 0.2 => 0\\n// 0.2 * 2 = 0.4 => 0\\n// 0.4 * 2 = 0.8 => 0\\n// 0.8 * 2 = 1.6 => 1\\n// 0.6 * 2 = 1.2 => 1\\n// 0.2 * 2 = 0.4 => 0\\n// 0.4 * 2 = 0.8 => 0\\n// 0.8 * 2 = 1.6 => 1\\n// 0.6 * 2 = 1.2 => 1\\n// 0.2 * 2 = 0.4 => 0\\n// 0.4 * 2 = 0.8 => 0\\n// ...\\n// \u6240\u4ee5\u4ece\u524d\u5f80\u540e\u7684\u4e8c\u8fdb\u5236\u5bf9\u5e94\u4e86\u4e0a\u9762\u7684 0.00011001100... \u53ef\u4ee5\u770b\u5230 1100 \u5f00\u59cb\u65e0\u9650\u5faa\u73af\\n```\\n\\n\u6839\u636e\u4e0a\u9762\u7684\u4f8b\u5b50\u6709\u8fd9\u4e48\u51e0\u4e2a\u95ee\u9898\uff1f\\n\\n- js \u4e2d\u6700\u5927\u5b89\u5168\u6570\u662f\u591a\u5c11\\n- js \u4e2d\u80fd\u8868\u793a\u6700\u5927\u7684\u6570\u662f\u591a\u5c11\\n- js \u4e2d\u6d6e\u70b9\u6570\u8ba1\u7b97\u6709\u4ec0\u4e48\u9677\u9631\\n\\n\u770b\u4e00\u4e2a\u56db\u820d\u4e94\u5165\u7684\u4f8b\u5b50\uff0c\u7ed3\u679c\u5982\u4e0b\\n\\n```js\\n(0.104)\\n  .toFixed(2)(\\n    // 0.10\\n    0.105\\n  )\\n  .toFixed(2)(\\n    // 0.10\\n    0.106\\n  )\\n  .toFixed(2); // 0.11\\n```\\n\\n\u4e3a\u5565 `0.105` \u4f1a\u8fd9\u6837\u7684\u7ed3\u679c\uff0c\u901a\u8fc7 `toPrecision` \u6765\u6d4b\u8bd5\\n\\n```js\\n(0.105)\\n  .toPrecision(17)(\\n    // 0.10500000000000000\\n    0.105\\n  )\\n  .toPrecision(18)(\\n    // 0.104999999999999996\\n    0.105\\n  )\\n  .toPrecision(19); // 0.10499999999999999611\\n```\\n\\n### \u53cc\u7cbe\u5ea6 64 \u4f4d\\n\\n![js](./images/js-202202112227.png)\\n\\n> 1 \u4f4d\u7528\u6765\u8868\u793a\u7b26\u53f7\u4f4d  \\n> 11 \u4f4d\u7528\u6765\u8868\u793a\u6307\u6570\uff0c\u90a3\u4e48\u6307\u6570\u6700\u5927\u7684\u6570\u503c\u5c31\u662f `2 ** 11 = 2048`\uff0c\u51cf\u53bb\u6307\u6570\u7b26\u53f7\u4f4d\uff0c\u8303\u56f4\u533a\u95f4\u5c31\u662f `(-2 ** 1024, +2 ** 1024)`  \\n> 52 \u4f4d\u8868\u793a\u5c3e\u6570\uff0c**IEEE754 \u89c4\u5b9a\u5c3e\u6570\u7b2c\u4e00\u4f4d\u9690\u542b\u4e3a 1\uff0c\u6240\u4ee5 52 \u4f4d\u6709\u6548\u6570\u5b57\u5b9e\u9645\u53ef\u4ee5\u5b58\u50a8 53 \u4f4d**\u3002\\n\\n\u90a3\u4e48\u56de\u7b54\u4e4b\u524d\u7684\u95ee\u9898\\n\\n- js \u4e2d\u6700\u5927\u5b89\u5168\u6570\u662f\u591a\u5c11 `(-2 ** 53, +2 ** 53)` \u5373 `2 ** 53 -1` // 9007199254740991\\n- js \u4e2d\u80fd\u8868\u793a\u6700\u5927\u7684\u6570\u662f\u591a\u5c11 `(-2 ** 1024 + 1, +2 ** 1024 - 1)` Chrome \u6d4f\u89c8\u5668\u80fd\u663e\u793a\u7684\u7684\u6700\u5927\u503c `2 ** 1023 * 1.999999999999999` // 1.797693134862315e+308\\n- js \u4e2d\u6d6e\u70b9\u6570\u8ba1\u7b97\u6709\u4ec0\u4e48\u9677\u9631\uff0c\u5f53\u6570\u503c\u5927\u4e8e `2 ** 53` \u5c31\u4f1a\u51fa\u73b0\u5751\uff0c\u6bd4\u5982\uff1a`2 ** 53 === 2 ** 53 + 1`\\n\\n\u6253\u5370 `Number.prototype` \u4e5f\u53ef\u4ee5\u770b\u5230\\n\\n```js\\nNumber {0, constructor: \u0192, toExponential: \u0192, toFixed: \u0192, toPrecision: \u0192, \u2026}\\nconstructor: \u0192 Number()\\nEPSILON: 2.220446049250313e-16\\nMAX_SAFE_INTEGER: 9007199254740991\\nMAX_VALUE: 1.7976931348623157e+308\\nMIN_SAFE_INTEGER: -9007199254740991\\nMIN_VALUE: 5e-324\\nNEGATIVE_INFINITY: -Infinity\\nNaN: NaN\\nPOSITIVE_INFINITY: Infinity\\narguments: \uff08\u2026\uff09\\ncaller: \uff08\u2026\uff09\\nisFinite: \u0192 isFinite()\\nisInteger: \u0192 isInteger()\\nisNaN: \u0192 isNaN()\\nisSafeInteger: \u0192 isSafeInteger()\\nlength: 1\\nname: \\"Number\\"\\nparseFloat: \u0192 parseFloat()\\nparseInt: \u0192 parseInt()\\nprototype: Number {0, constructor: \u0192, toExponential: \u0192, toFixed: \u0192, toPrecision: \u0192, \u2026}\\n[[Prototype]]: \u0192 ()\\n[[Scopes]]: Scopes[0]\\ntoExponential: \u0192 toExponential()\\ntoFixed: \u0192 toFixed()\\ntoLocaleString: \u0192 toLocaleString()\\ntoPrecision: \u0192 toPrecision()\\ntoString: \u0192 toString()\\nvalueOf: \u0192 valueOf()\\n[[Prototype]]: Object\\n[[PrimitiveValue]]: 0\\n```\\n\\n## \u89e3\u51b3\u65b9\u6848\\n\\n\u8fd9\u91cc\u7b80\u8981\u63d0\u53ca\u4e24\u79cd\u65b9\u6cd5\\n\\n### \u4f7f\u7528 BigInt \u7c7b\u578b\\n\\n> \u6ce8\u610f\u53ea\u9002\u5408\u6574\u6570\uff0c\u53c2\u8003\uff1ahttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/BigInt\\n\\n\u770b\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6bd4\u5982\u4e4b\u524d\u63d0\u5230\u7684\u6700\u5927\u5b89\u5168\u6570\\n\\n```js\\nconst previousMaxSafe = BigInt(Number.MAX_SAFE_INTEGER);\\n// \u21aa 9007199254740991n\\n\\nconst maxPlusOne = previousMaxSafe + 1n;\\n// \u21aa 9007199254740992n\\n\\nconst theFuture = previousMaxSafe + 2n;\\n// \u21aa 9007199254740993n, this works now!\\n\\nconst multi = previousMaxSafe * 2n;\\n// \u21aa 18014398509481982n\\n\\nconst subtr = multi \u2013 10n;\\n// \u21aa 18014398509481972n\\n\\nconst mod = multi % 10n;\\n// \u21aa 2n\\n\\nconst bigN = 2n ** 54n;\\n// \u21aa 18014398509481984n\\n\\nbigN * -1n\\n// \u21aa \u201318014398509481984n\\n```\\n\\n\u90a3\u4e48\uff0c\u89e3\u51b3 `0.1 + 0.2 === 0.3` \u7684\u601d\u8def\u53ef\u4ee5\u662f `BigInt(0.1*10)+BigInt(0.2*10) === BigInt(0.3*10)`\\n\\n### \u4f7f\u7528\u6210\u719f\u5e93\uff08\u63a8\u8350\uff09\\n\\n\u8fd9\u91cc\u63a8\u8350\u4e24\u4e2a\u5e93\u6765\u89e3\u51b3\u6d6e\u70b9\u6570\u7cbe\u5ea6\u8ba1\u7b97\u7684\u95ee\u9898\\n\\n> number-precision : https://github.com/nefe/number-precision  \\n> bignumber.js : https://github.com/MikeMcl/bignumber.js"},{"id":"/29206","metadata":{"permalink":"/docusaurus/blog/29206","editUrl":"https://github.com/lzwdot/docusaurus/blog/2022/01-18-29206.md","source":"@site/blog/2022/01-18-29206.md","title":"\u6587\u4ef6\u4e0a\u4f20\u548c\u4f18\u5316","description":"\u6587\u4ef6\u683c\u5f0f\u5224\u65ad\u548c\u5927\u5c0f\u5224\u65ad","date":"2022-01-18T20:52:22.000Z","formattedDate":"2022\u5e741\u670818\u65e5","tags":[{"label":"js-ts","permalink":"/docusaurus/blog/tags/js-ts"},{"label":"js-study","permalink":"/docusaurus/blog/tags/js-study"}],"readingTime":15.78,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u6587\u4ef6\u4e0a\u4f20\u548c\u4f18\u5316","ID":"29206","date":"2022-01-18 20:52:22","categories":["js-ts","js-study"],"tags":["js-ts","js-study"],"authors":["lzw"],"slug":"/29206","type":"blog"},"prevItem":{"title":"JS \u7cbe\u5ea6\u95ee\u9898\u7531\u6765\u53ca\u89e3\u51b3","permalink":"/docusaurus/blog/29458"},"nextItem":{"title":"\u9879\u76ee\u4eae\u70b9\u5b9e\u6218","permalink":"/docusaurus/blog/28802"}},"content":"\x3c!--truncate--\x3e\\n\\n# \u6587\u4ef6\u4e0a\u4f20\u548c\u4f18\u5316\\n\\n\u6587\u4ef6\u683c\u5f0f\u5224\u65ad\u548c\u5927\u5c0f\u5224\u65ad\\n\\n- \u5224\u65ad\u683c\u5f0f\\n  - \u65b9\u5f0f\u4e00 \u5728 input[type=\\"file\\"] \u6dfb\u52a0 `accept=\\".png,.jpg,.jpeg\\"` \u9009\u62e9\u6587\u4ef6\u65f6\u9650\u5236\uff0c\u9650\u5236\u4e0d\u4e86\u62d6\u62fd\u4e0a\u4f20\\n  - \u65b9\u5f0f\u4e8c \u901a\u8fc7 file.type \u6b63\u5219\u9650\u5236 `!/(jpg|jpeg|png)/i.test(file.type)`\\n  - \u65b9\u5f0f\u4e09 \u901a\u8fc7\u4e8c\u8fdb\u5236\u5934\u4fe1\u606f\\n\\n    ```js\\n    const fileReader = new FileReader()\\n    fileReader.readAsArrayBuffer(file)\\n    fileReader.onload = function (e) {\\n      const result = new Uint8Array(e.target.result)\\n\\n      if (result.join(\'\').indexOf(\'255216\') === 0) {\\n        console.log(\'jpg\u6587\u4ef6\')\\n      } else if (result.join(\'\').indexOf(\'13780\') === 0) {\\n        console.log(\'png\u6587\u4ef6\')\\n      }\\n    }\\n    ```    \\n\\n\u6587\u4ef6\u4e0a\u4f20\u3010form-data\uff0c\u6587\u4ef6\u552f\u4e00hash\uff0c\u8fdb\u5ea6\u6761\uff0c\u591a\u6587\u4ef6\u3011\\n\\n- form-data \u65b9\u5f0f\u4e0a\u4f20\\n  - \u8bbe\u7f6e `Content-Type:multipart/form-data` \u5934\u4fe1\u606f\\n  - \u91c7\u7528 `(new FormData()).formData.append(\'file\', file)` \u65b9\u5f0f\u4e0a\u4f20\\n- \u6587\u4ef6\u552f\u4e00 hash \u540d\u79f0\\n  - \u91c7\u7528 `(new FileReader()).readAsArrayBuffer(file)` \u8bfb\u53d6\u6587\u4ef6\u4e3a ArrayBuffer \u683c\u5f0f\\n  - \u4f7f\u7528 `spark-md5` \u751f\u6210 hash \u540d\u79f0\\n- \u4e0a\u4f20\u8fdb\u5ea6\u6761\\n  - \u76d1\u542c axios \u4e2d `onUploadProgress(e)` \u65b9\u5f0f\\n  - \u5176\u5b9e\u9645\u5c31\u662f ajax \u4e2d `xhr.upload.onprogress(e)` \u65b9\u6cd5\\n  - \u767e\u5206\u6bd4\u8ba1\u7b97 `e.loaded / e.total`\\n- \u591a\u6587\u4ef6\u4e0a\u4f20\\n  - \u5728 input[type=\\"file\\"] \u6dfb\u52a0 `multiple` \u5c5e\u6027\\n  - \u5229\u7528 input[type=\\"file\\"]  \u5bf9\u8c61\u4e2d\u7684 `files` \u83b7\u53d6\u5230\u6240\u6709\u6587\u4ef6\u5bf9\u8c61\uff0c\u5faa\u73af\u4e0a\u4f20\\n\\n\u6587\u4ef6\u4e0a\u4f20\u3010base64\uff0c\u7f29\u7565\u56fe\uff0c\u62d6\u62fd\u4e0a\u4f20\uff0c\u5927\u6587\u4ef6\u65ad\u70b9\u7eed\u4f20\u3011 \\n\\n- base64  & \u7f29\u7565\u56fe\\n  - \u4e00\u822c\u7528\u4e8e\u5904\u7406\u5c0f\u7684\u56fe\u7247\uff0c\u53ef\u4ee5\u9884\u89c8\u7f29\u7565\u56fe\\n  - \u91c7\u7528 `(new FileReader()).readAsDataURL(file)` \u8bfb\u53d6\u6587\u4ef6\u4e3a DataURL \u683c\u5f0f\uff0c\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e0a\u76f4\u63a5\u8bbf\u95ee\\n- \u62d6\u62fd\u4e0a\u4f20\\n  - \u76d1\u542c html5 \u5143\u7d20 `dragover` \u548c `drop` \u4e8b\u4ef6\uff0c\u9700\u8981\u963b\u6b62\u9ed8\u8ba4\u4e8b\u4ef6 `e.preventDefault()`\\n  - \u5728 drop \u4e8b\u4ef6\u4e2d\u901a\u8fc7 `e.dataTransfer.files` \u83b7\u53d6\u5230\u6587\u4ef6\u5bf9\u8c61\uff0c\u5373\u53ef\u4e0a\u4f20\\n- \u5927\u6587\u4ef6\u65ad\u70b9\u7eed\u4f20\\n  - \u4f7f\u7528`\u56fa\u5b9a\u6570\u91cf & \u56fa\u5b9a\u5927\u5c0f`\u65b9\u6848\u751f\u6210\u5207\u7247\uff0c\u5982\u679c\u5207\u7247\u6570\u91cf\u5927\u4e8e\u6700\u5927\u503c\uff0c\u5c31\u6839\u636e\u6570\u91cf\u751f\u4ea7\u5207\u7247\u5927\u5c0f\\n  - \u4f7f\u7528\u6587\u4ef6\u5bf9\u8c61\u4e2d `file.slice` \u8fdb\u884c\u5207\u5272\uff0c\u5207\u7247\u540d\u79f0\u4e3a `${hash}_${i}`\uff08`spark-md5` \u751f\u6210\u6587\u4ef6\u552f\u4e00 hash\uff0c`i` \u4e3a\u5207\u7247\u5e8f\u53f7\uff09\\n  - \u4e0a\u4f20\u4e4b\u524d\uff0c\u8c03\u63a5\u53e3\u83b7\u53d6\u5df2\u4e0a\u4f20\u5207\u7247\u6570\u7ec4\\n  - \u5faa\u73af\u4f7f\u7528 `FormData` \u4e0a\u4f20\u672a\u4e0a\u4f20\u7684\u5207\u7247\uff0c\u4e0a\u4f20\u5931\u8d25\u7684\u5207\u7247\u653e\u5230\u5931\u8d25\u6570\u7ec4\u91cc\uff0c\u91cd\u65b0\u4e0a\u4f20\\n  - \u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u8c03\u63a5\u53e3\u53d1\u9001\u4e0a\u4f20\u5b8c\u6210\u6307\u4ee4\\n\\n\u4f7f\u7528 webwork \u4f18\u5316\u5927\u6587\u4ef6 hash \u751f\u4ea7\uff0c\u9632\u6b62\u9875\u9762\u5047\u6b7b\\n\\n```js\\nonmessage = function (e) {\\n  importScripts(\'../node_modules/spark-md5/spark-md5.min.js\');\\n\\n  const file = e.data\\n  const fileReader = new FileReader()\\n\\n  fileReader.readAsArrayBuffer(file)\\n  fileReader.onload = ev => {\\n    const buffer = ev.target.result\\n    const spark = new SparkMD5.ArrayBuffer()\\n    spark.append(buffer)\\n    const hash = spark.end()\\n    const suffix = /\\\\.([a-zA-Z0-9]+)$/.exec(file.name)[1]\\n\\n    postMessage({\\n      buffer, hash, suffix, filename: `${hash}.${suffix}`\\n    })\\n  }\\n}\\n```\\n\\n\u5b8c\u6574\u4ee3\u7801\\n\\n\\n\\n\\n<HtmlDemo>\\n\\n\\n```html\\n<link href=\\"https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css\\" rel=\\"stylesheet\\">\\n<style>\\n    input[type=\\"file\\"] {\\n        display: none;\\n    }\\n\\n    .container, .row {\\n        margin-top: 20px;\\n    }\\n\\n    .input-group {\\n        display: block;\\n        padding: 10px;\\n        min-height: 200px;\\n        border: 1px #ccc dashed;\\n        position: relative\\n    }\\n\\n    .disable,\\n    .loading {\\n        pointer-events: none;\\n        background-color: #ccc;\\n    }\\n\\n    .list-group,\\n    .spinner-border,\\n    .img-wrap,\\n    .progress {\\n        display: none;\\n    }\\n\\n    .loading .spinner-border {\\n        display: inline-block;\\n    }\\n\\n    .drag-upload {\\n        height: 100px;\\n        width: 100%;\\n        text-align: center;\\n        color: #999;\\n    }\\n\\n    .upload-ing {\\n        position: absolute;\\n        top: 0;\\n        left: 0;\\n        width: 100%;\\n        height: 100%;\\n        background-color: rgba(0, 0, 0, 0.8);\\n        display: none;\\n        align-items: center;\\n        justify-content: center;\\n        color: #fff;\\n        z-index: 100;\\n    }\\n</style>\\n<div class=\\"container\\">\\n    <div class=\\"row\\">\\n        <div class=\\"col\\" id=\\"upload1\\">\\n            <b>\u6587\u4ef6\u4e0a\u4f20\u3010form-data\uff0c\u6587\u4ef6\u552f\u4e00hash\uff0c\u8fdb\u5ea6\u6761\uff0c\u591a\u6587\u4ef6\u3011</b>\\n            <div class=\\"input-group\\">\\n                <label class=\\"btn btn-primary\\" for=\\"inputGroupFile01\\">\\n                    \u9009\u62e9\u6587\u4ef6\\n                </label>\\n                \x3c!--  accept=\\".png,.jpg,.jpeg\\" \u9650\u5b9a\u6587\u4ef6\u683c\u5f0f --\x3e\\n                <input type=\\"file\\" class=\\"form-control\\" id=\\"inputGroupFile01\\" multiple>\\n                <button type=\\"button\\" class=\\"btn btn-success\\">\\n                    <span class=\\"spinner-border spinner-border-sm\\" role=\\"status\\" aria-hidden=\\"true\\"></span>\\n                    \u4e0a\u4f20\u5230\u670d\u52a1\u5668\\n                </button>\\n                <p><small class=\\"text-muted\\">\u53ea\u80fd\u4e0a\u4f20 png/jgp/jpeg \u683c\u5f0f\u56fe\u7247\uff0c\u5927\u5c0f\u4e0d\u8d85\u8fc7 50MB</small></p>\\n                <ul class=\\"list-group\\">\\n                    \x3c!--<li class=\\"list-group-item d-flex justify-content-between align-items-center\\">--\x3e\\n                    \x3c!--    test--\x3e\\n                    \x3c!--    <span class=\\"badge bg-primary rounded-pill\\">test</span>--\x3e\\n                    \x3c!--</li>--\x3e\\n                </ul>\\n                <div class=\\"progress\\">\\n                    <div class=\\"progress-bar\\" role=\\"progressbar\\"></div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n    <div class=\\"row\\">\\n        <div class=\\"col\\" id=\\"upload2\\">\\n            <b>\u6587\u4ef6\u4e0a\u4f20\u3010base64\uff0c\u7f29\u7565\u56fe\uff0c\u62d6\u62fd\u4e0a\u4f20\uff0c\u5927\u6587\u4ef6\u65ad\u70b9\u7eed\u4f20\u3011</b>\\n            <div class=\\"input-group\\">\\n                <label class=\\"btn btn-primary\\" for=\\"inputGroupFile02\\">\\n                    <span class=\\"spinner-border spinner-border-sm\\" role=\\"status\\" aria-hidden=\\"true\\"></span>\\n                    \u4e0a\u4f20\u56fe\u7247\\n                </label>\\n                <input type=\\"file\\" class=\\"form-control\\" id=\\"inputGroupFile02\\" accept=\\".png,.jpg,.jpeg\\">\\n                <p><small class=\\"text-muted\\">\u53ea\u80fd\u4e0a\u4f20 png/jgp/jpeg \u683c\u5f0f\u56fe\u7247\uff0c\u5927\u5c0f\u4e0d\u8d85\u8fc7 50MB</small></p>\\n                <div class=\\"drag-upload\\">\\n                    <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"50\\" height=\\"50\\" fill=\\"currentColor\\"\\n                         class=\\"bi bi-cloud-upload\\" viewBox=\\"0 0 16 16\\">\\n                        <path fill-rule=\\"evenodd\\"\\n                              d=\\"M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z\\"/>\\n                        <path fill-rule=\\"evenodd\\"\\n                              d=\\"M7.646 4.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V14.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3z\\"/>\\n                    </svg>\\n                    <p>\u5c06\u6587\u4ef6\u62d6\u5230\u6b64\u5904\uff0c\u6216 <label class=\\"link-primary\\" for=\\"inputGroupFile02\\">\u70b9\u51fb\u4e0a\u4f20</label></p>\\n                </div>\\n                <div class=\\"upload-ing\\">\u6b63\u5728\u4e0a\u4f20\u4e2d<span class=\\"percent\\">0%</span>\uff0c\u8bf7\u7a0d\u540e...</div>\\n                <div class=\\"img-wrap\\">\\n                    <img src=\\"...\\" class=\\"img-thumbnail\\" alt=\\"...\\">\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\\n\\n<script src=\\"https://cdn.bootcdn.net/ajax/libs/axios/0.24.0/axios.min.js\\"><\/script>\\n<script src=\\"https://cdn.bootcdn.net/ajax/libs/qs/6.10.3/qs.min.js\\"><\/script>\\n<script src=\\"https://cdn.bootcdn.net/ajax/libs/spark-md5/3.0.2/spark-md5.min.js\\"><\/script>\\n\\n\x3c!--<script src=\\"./js/instance.js\\"><\/script>--\x3e\\n\x3c!--<script src=\\"./js/upload.js\\"><\/script>--\x3e\\n\\n<script>\\n  // \u516c\u5171\u90e8\u5206\u4fe1\u606f\\n  let instance = axios.create() // \u72ec\u7acb\u7684 axios \u5b9e\u4f8b\\n  instance.defaults.baseURL = \'http://localhost:8888\'\\n  instance.defaults.headers[\'Content-Type\'] = \'multipart/form-data\'\\n  instance.defaults.transformRequest = (data, headers) => {\\n    const contentType = headers[\'Content-Type\']\\n\\n    if (contentType === \'application/x-www-form-urlencoded\') {\\n      // Qs.stringify(data) : {a:1,b:2} -> a=1&b=2\\n      return Qs.stringify(data)\\n    }\\n\\n    return data\\n  }\\n  instance.interceptors.response.use(res => {\\n    return res.data\\n  }, error => {\\n    // \u7edf\u4e00\u9519\u8bef\u63d0\u793a\\n    return Promise.reject(error)\\n  });\\n\\n  // \u6587\u4ef6\u4e0a\u4f20\u3010form-data\uff0c\u6587\u4ef6\u552f\u4e00hash\uff0c\u8fdb\u5ea6\u6761\uff0c\u591a\u6587\u4ef6\u3011\\n  (function () {\\n    const upload = document.querySelector(\'#upload1\')\\n    const upload_inp = upload.querySelector(\'input.form-control\')\\n    const upload_button_select = upload.querySelector(\'label.btn-primary\')\\n    const upload_button_upload = upload.querySelector(\'button.btn-success\')\\n    const upload_tip = upload.querySelector(\'small.text-muted\')\\n    const upload_list = upload.querySelector(\'ul.list-group\')\\n    const upload_progress = upload.querySelector(\'.progress\')\\n    const upload_progress_bar = upload_progress.querySelector(\'.progress-bar\')\\n    // \u5b58\u6587\u4ef6\u5bf9\u8c61\\n    let _files = []\\n\\n    const changeDisabel = flag => {\\n      if (flag) {\\n        upload_button_select.classList.add(\'disable\')\\n        upload_button_upload.classList.add(\'loading\')\\n        upload_progress.style.display = \'flex\'\\n        return\\n      }\\n      upload_button_select.classList.remove(\'disable\')\\n      upload_button_upload.classList.remove(\'loading\')\\n    }\\n\\n    // \u6587\u4ef6\u8bfb\u53d6\u6210\u4e3a buffer\\n    const changeBuffer = file => {\\n      return new Promise(resolve => {\\n        const fileReader = new FileReader()\\n        fileReader.readAsArrayBuffer(file)\\n        fileReader.onload = ev => {\\n          const buffer = ev.target.result\\n          const spark = new SparkMD5.ArrayBuffer()\\n          spark.append(buffer)\\n          const hash = spark.end()\\n          const suffix = /\\\\.([a-zA-Z0-9]+)$/.exec(file.name)[1]\\n\\n          resolve({\\n            buffer, hash, suffix, filename: `${hash}.${suffix}`\\n          })\\n        }\\n      })\\n    }\\n\\n    // \u4fee\u6539\u8fdb\u5ea6\u6761\\n    const changeProgress = proArr => {\\n      let loaded = total = 0\\n\\n      proArr.forEach(item => {\\n        loaded += item.loaded\\n        total += item.total\\n      })\\n\\n      upload_progress_bar.style.width = (loaded / total * 100).toFixed(2) + \'%\'\\n    }\\n\\n    // \u4e0a\u4f20\u6587\u4ef6\u5230\u670d\u52a1\u5668\\n    upload_button_upload.addEventListener(\'click\', async function () {\\n      if (!_files.length === 0) {\\n        alert(\'\u8bf7\u5148\u9009\u62e9\u4e0a\u4f20\u6587\u4ef6~\')\\n        return\\n      }\\n      changeDisabel(true)\\n\\n      // \u603b\u7684 progress\\n      const progressArr = new Map()\\n      // \u5faa\u73af\u53d1\u9001\u8bf7\u6c42\\n      const upload_list_arr = Array.from(upload_list.querySelectorAll(\'li\'))\\n      _files = _files.map(async item => {\\n        // \u5f53\u524d li \u548c span\\n        const curLi = upload_list_arr.find(li => li.getAttribute(\'key\') === item.key)\\n        const curSpan = curLi ? curLi.querySelector(\'span:nth-last-child(1)\') : null\\n\\n        // \u751f\u4ea7\u6587\u4ef6\u7684 hash\u540d\u79f0\\n        const {filename} = await changeBuffer(item.file)\\n\\n        // \u628a\u6587\u4ef6\u4f20\u9012\u7ed9\u670d\u52a1\u5668\uff1aFormData / Base64\\n        const formData = new FormData()\\n        formData.append(\'file\', item.file)\\n        formData.append(\'filename\', filename || item.filename)\\n\\n        // axios\\n        return instance.post(\'/upload\', formData, {\\n          // \u6587\u4ef6\u4e0a\u4f20\u8fdb\u5ea6\u56de\u8c03\u51fd\u6570 xhr.upload.onprogress\\n          onUploadProgress(e) {\\n            curSpan.innerHTML = `${(e.loaded / e.total * 100).toFixed(2)}%`\\n\\n            progressArr.set(item.key, e)\\n            changeProgress(progressArr)\\n          }\\n        }).then(data => {\\n          if (+data.code === 0) {\\n            // alert(`\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\uff0c\u901a\u8fc7${data.servicePath}\u8bbf\u95ee\u8d44\u6e90`)\\n            return\\n          }\\n\\n          return Promise.reject(data.codeText)\\n        })\\n        //   .catch(error => {\\n        //   alert(\'\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5~\')\\n        // }).finally(() => {\\n        //   clearHandle()\\n        // })\\n      })\\n\\n      Promise.all(_files).then(() => {\\n        alert(`\u6240\u6709\u6587\u4ef6\u4e0a\u4f20\u6210\u529f`)\\n      }).catch(err => {\\n        alert(\'\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5~\')\\n      }).finally(() => {\\n        clearHandle()\\n        changeDisabel(false)\\n      })\\n    })\\n\\n    const clearHandle = () => {\\n      upload_tip.style.display = \'block\'\\n      upload_list.style.display = \'none\'\\n      upload_list.innerHTML = ``\\n    }\\n    // \u79fb\u9664\u6309\u94ae\u7684\u70b9\u51fb\u4e8b\u4ef6\\n    upload_list.addEventListener(\'click\', function (e) {\\n      const target = e.target\\n      if (target.tagName === \'SPAN\') {\\n        const curLi = target.parentNode\\n        const key = curLi.getAttribute(\'key\')\\n        upload_list.removeChild(curLi)\\n        _files = _files.filter(item => item.ley !== key)\\n        // \u5df2\u7ecf\u6ca1\u6709\u4e86\\n        if (_files.length === 0) {\\n          clearHandle()\\n        }\\n      }\\n    })\\n\\n    const checkFile = file => {\\n      // \u9650\u5236\u6587\u4ef6\u4e0a\u4f20\u7684\u683c\u5f0f [\u65b9\u68481]\\n      if (!/(jpg|jpeg|png)/i.test(file.type)) {\\n        alert(file.name + \'\u7684 type:\' + upload_tip.innerHTML)\\n        return false\\n      }\\n\\n      // \u9650\u5236\u6587\u4ef6\u4e0a\u4f20\u5927\u5c0f\u4e0d\u8d85\u8fc7 50MB\\n      if (file.size > 50 * 1024 * 1024) {\\n        alert(file.name + \'\u7684 size:\' + upload_tip.innerHTML)\\n        return false\\n      }\\n\\n      return true\\n    }\\n\\n    // \u83b7\u53d6\u552f\u4e00\u503c\\n    const creatRandom = () => {\\n      const random = Math.random() * new Date()\\n      // toString(16) \u53d8\u6210 16 \u8fdb\u5236\\n      return random.toString(16).replace(\'.\', \'\')\\n    }\\n\\n    // \u76d1\u542c\u7528\u6237\u9009\u62e9\u6587\u4ef6\u7684\u64cd\u4f5c\\n    upload_inp.addEventListener(\'change\', function () {\\n      // \u83b7\u53d6\u9009\u4e2d\u6587\u4ef6\u5bf9\u8c61\\n      // name:\u6587\u4ef6\u540d\\n      // size:\u6587\u4ef6\u5927\u5c0f\\n      // type:\u6587\u4ef6\u7684 MIME \u7c7b\u578b\\n      _files = Array.from(upload_inp.files)\\n      if (_files.length === 0) return\\n\\n      // \u7ed9\u6bcf\u4e00\u9879\u8bbe\u7f6e\u4e00\u4e2a\u552f\u4e00\uff0c\u6839\u636e\u8fd9\u4e2a\u503c\u8fdb\u884c\u589e\u5220\\n      _files = _files.map(file => {\\n        return {\\n          file,\\n          filename: file.name,\\n          key: creatRandom()\\n        }\\n      })\\n\\n      let str = ``\\n      _files.forEach((item, index) => {\\n        if (checkFile(item.file)) {\\n          str += `<li key=\\"${item.key}\\" class=\\"list-group-item d-flex justify-content-between align-items-center\\">\\n            \u6587\u4ef6${item}\uff1a${item.filename}<span class=\\"badge bg-primary rounded-pill\\">\u79fb\u9664</span>\\n        </li>`\\n        }\\n      })\\n\\n      // \u663e\u793a\u4e0a\u4f20\u7684\u6587\u4ef6\\n      upload_tip.style.display = \'none\'\\n      upload_list.style.display = \'block\'\\n      upload_list.innerHTML = str\\n    })\\n  })();\\n\\n  // \u6587\u4ef6\u4e0a\u4f20\u3010base64\uff0c\u7f29\u7565\u56fe\u5904\u7406\uff08\u53ea\u9002\u5408\u56fe\u7247\uff09\uff0c\u5927\u6587\u4ef6\u65ad\u70b9\u7eed\u4f20\u3011\\n  (function () {\\n    const upload = document.querySelector(\'#upload2\')\\n    const upload_inp = upload.querySelector(\'input.form-control\')\\n    const upload_button_select = upload.querySelector(\'label.btn-primary\')\\n    const upload_tip = upload.querySelector(\'small.text-muted\')\\n    const upload_abbre = upload.querySelector(\'.img-wrap\')\\n    const upload_abbre_img = upload.querySelector(\'img.img-thumbnail\')\\n    const upload_ing = upload.querySelector(\'.upload-ing\')\\n    const upload_percent = upload_ing.querySelector(\'.percent\')\\n    let isRun = false\\n\\n    // \u6587\u4ef6\u8bfb\u53d6\u6210\u4e3a buffer\\n    const changeBuffer = file => {\\n      return new Promise(resolve => {\\n        console.time(\'test\');\\n\\n        const fileReader = new FileReader()\\n        fileReader.readAsArrayBuffer(file)\\n        fileReader.onload = e => {\\n          const buffer = e.target.result\\n          const spark = new SparkMD5.ArrayBuffer()\\n          spark.append(buffer)\\n          const hash = spark.end()\\n          const suffix = /\\\\.([a-zA-Z0-9]+)$/.exec(file.name)[1]\\n\\n          console.timeEnd(\'test\');\\n          resolve({\\n            buffer, hash, suffix, filename: `${hash}.${suffix}`\\n          })\\n        }\\n\\n        // \u4f7f\u7528 web Worker \u9632\u6b62\u9875\u9762\u5047\u6b7b\\n        // const work = new Worker(\'./js/work.js\')\\n        // work.postMessage(file)\\n        // work.onmessage = e => {\\n        //   console.timeEnd(\'test\');\\n        //   resolve(e.data)\\n        // }\\n      })\\n    }\\n\\n    // \u5b9e\u73b0\u6587\u4ef6\u4e0a\u4f20\\n    const uploadFile = async file => {\\n      if (isRun) return\\n      isRun = true\\n\\n      // \u9650\u5236\u6587\u4ef6\u4e0a\u4f20\u7684\u683c\u5f0f [\u65b9\u68481]\\n      if (!/(jpg|jpeg|png)/i.test(file.type)) {\\n        // alert(file.name + \'\u7684 type:\' + upload_tip.innerHTML)\\n        // return false\\n      }\\n\\n      // \u4f7f\u7528\u4e8c\u8fdb\u5236\u5934\u90e8\u9650\u5236\u6587\u4ef6\u7c7b\u578b[\u65b9\u68482] , \u6bd4\u5982jpg:255216 png:13780\\n      const fileReader = new FileReader()\\n      fileReader.readAsArrayBuffer(file)\\n      fileReader.onload = function (e) {\\n        const result = new Uint8Array(e.target.result)\\n\\n        if (result.join(\'\').indexOf(\'255216\') === 0) {\\n          console.log(\'jpg\u6587\u4ef6\')\\n        } else if (result.join(\'\').indexOf(\'13780\') === 0) {\\n          console.log(\'png\u6587\u4ef6\')\\n        }\\n      }\\n\\n      // \u9650\u5236\u6587\u4ef6\u4e0a\u4f20\u5927\u5c0f\u4e0d\u8d85\u8fc7 50MB\\n      if (file.size > 50 * 1024 * 1024) {\\n        // alert(upload_tip.innerHTML)\\n        // return false\\n      }\\n\\n      changeDisabel(true)\\n\\n      // \u5927\u6587\u4ef6\\n      if (file.size > 5 * 1024 * 1024) {\\n        // \u751f\u4ea7\u6587\u4ef6\u7684 hash\u540d\u79f0\\n        const {filename, suffix, hash} = await changeBuffer(file)\\n\\n        // \u5df2\u5b58\u4e0a\u4f20\u7684\u5207\u7247 \u548c \u6570\u636e\\n        let already = []\\n        let data = null\\n\\n        // \u83b7\u53d6\u5df2\u4e0a\u4f20\u7684\u5207\u7247\\n        try {\\n          data = await instance.post(\'/getData\', {hash, suffix}, {\\n            headers: {\\n              \'Content-Type\': \'application/x-www-form-urlencoded\'\\n            }\\n          })\\n\\n          if (+data.code === 0) {\\n            already = data.fileList\\n          }\\n        } catch (err) {\\n        }\\n\\n        // \u5b9e\u73b0\u6587\u4ef6\u5207\u7247\u5904\u7406\u3010\u56fa\u5b9a\u6570\u91cf & \u56fa\u5b9a\u5927\u5c0f\u3011, \u4f7f\u7528 file.slice \u8fdb\u884c\u5207\u7247\\n        let maxSize = 1024 * 100 // \u6700\u5927\u5207\u7247\u5927\u5c0f\\n        let count = Math.ceil(file.size / maxSize) // \u5207\u7247\u6570\u91cf\\n        if (count > 100) {\\n          maxSize = file.size / 100\\n          count = 100\\n        }\\n\\n        // \u5f00\u59cb\u5207\u7247\\n        let index = 0\\n        const chunks = []\\n        while (index < count) {\\n          chunks.push({\\n            hash: hash,\\n            file: file.slice(index * maxSize, (index + 1) * maxSize),\\n            filename: `${hash}_${index + 1}.${suffix}`\\n          })\\n          index++\\n        }\\n\\n        // \u4e0a\u4f20\u6210\u529f\u7684\u5904\u7406\\n        index = 0\\n        const complate = async () => {\\n          // \u7ba1\u63a7\u8fdb\u5ea6\u6761\\n          index++\\n          upload_percent.innerHTML = `${(index / count * 100).toFixed(2)}%`\\n\\n          // \u6240\u6709\u5207\u7247\u90fd\u4e0a\u4f20\u6210\u529f\u4e86\uff0c\u6211\u4eec\u5408\u5e76\u5207\u7247\\n          if (index < count) return\\n          upload_percent.innerHTML = `100%`\\n\\n          try {\\n            data = await instance.post(\'/getData\', {hash, count}, {\\n              headers: {\\n                \'Content-Type\': \'application/x-www-form-urlencoded\'\\n              }\\n            })\\n            if (+data.code === 0) {\\n              alert(`\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\uff0c\u901a\u8fc7${data.servicePath}\u8bbf\u95ee\u8d44\u6e90`)\\n              return\\n            }\\n            throw data.codeText\\n          } catch (err) {\\n            alert(\'\u5207\u7247\u5408\u5e76\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\')\\n          } finally {\\n            changeDisabel(false)\\n            isRun = false\\n          }\\n        }\\n\\n        chunks.forEach(chunk => {\\n          // \u5df2\u7ecf\u4e0a\u4f20\u7684\u65e0\u9700\u518d\u4e0a\u4f20\\n          if (already.length > 0 && already.includes(chunk.filename)) {\\n            complate()\\n            return\\n          }\\n          const formData = new FormData()\\n          formData.append(\'file\', chunk.file)\\n          formData.append(\'filename\', chunk.filename)\\n          formData.append(\'hash\', chunk.hash)\\n\\n          instance.post(\'/upload\', formData).then(data => {\\n            if (+data.code === 0) {\\n              complate()\\n              return\\n            }\\n            return Promise.reject(data.codeText)\\n          }).catch(err => {\\n            console.log(\'\u5f53\u524d\u5207\u7247\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\')\\n          })\\n        })\\n      } else {\\n        // \u5c0f\u6587\u4ef6\u56fe\u7247\\n        const base64 = await changeBase64(file)\\n        // \u6587\u4ef6\u9884\u89c8\uff0c\u5c31\u662f\u663e\u793a base64\\n        upload_abbre_img.src = base64\\n\\n        try {\\n          const data = await instance.post(\'/upload\', {\\n            file: encodeURIComponent(base64),\\n            filename: file.name\\n          }, {\\n            headers: {\\n              \'Content-Type\': \'application/x-www-form-urlencoded\'\\n            }\\n          })\\n          if (+data.code === 0) {\\n            alert(`\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\uff0c\u901a\u8fc7${data.servicePath}\u8bbf\u95ee\u8d44\u6e90`)\\n            return\\n          }\\n\\n          throw data.codeText\\n        } catch (err) {\\n          alert(\'\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\')\\n        } finally {\\n          changeDisabel(false)\\n          isRun = false\\n        }\\n      }\\n    }\\n\\n    const changeDisabel = flag => {\\n      if (flag) {\\n        upload_button_select.classList.add(\'loading\')\\n        upload_abbre.style.display = \'none\'\\n        upload_ing.style.display = \'flex\'\\n        return\\n      }\\n      upload_button_select.classList.remove(\'loading\')\\n      upload_abbre.style.display = \'block\'\\n      upload_ing.style.display = \'none\'\\n    }\\n\\n    // \u6587\u4ef6\u8bfb\u53d6\u6210\u4e3a base64\\n    const changeBase64 = file => {\\n      return new Promise(resolve => {\\n        const fileReader = new FileReader()\\n        fileReader.readAsDataURL(file)\\n        fileReader.onload = ev => {\\n          resolve(ev.target.result)\\n        }\\n      })\\n    }\\n\\n    // \u62d6\u62fd dragenter dragleave dragover drop\\n    // upload.addEventListener(\'dragenter\', function () {\\n    // })\\n    // upload.addEventListener(\'dragleave\', function () {\\n    // })\\n    upload.addEventListener(\'dragover\', function (e) {\\n      e.preventDefault()\\n    })\\n    upload.addEventListener(\'drop\', function (e) {\\n      e.preventDefault()\\n      const file = e.dataTransfer.files[0]\\n      if (!file) return\\n\\n      uploadFile(file)\\n    })\\n\\n    // \u76d1\u542c\u7528\u6237\u9009\u62e9\u6587\u4ef6\u7684\u64cd\u4f5c\\n    upload_inp.addEventListener(\'change\', async function () {\\n      const file = upload_inp.files[0]\\n      if (!file) return\\n\\n      uploadFile(file)\\n    })\\n  })();\\n<\/script>\\n```\\n\\n</HtmlDemo>\\n\\n\u540e\u7aef\u5904\u7406\u6587\u4ef6\u4e0a\u4f20\u7684 nodejs \u6d4b\u8bd5\u4ee3\u7801\\n\\n- \u5229\u7528 express \u6846\u67b6\\n- \u4f7f\u7528 multer \u5904\u7406 `form-data` \u4e0a\u4f20\\n- \u4f7f\u7528 body-parser \u5904\u7406 `x-www-form-urlencoded` \u53c2\u6570\\n- \u4f7f\u7528 spark-md5 \u5904\u7406 base64 \u6587\u4ef6\u552f\u4e00 hash \u540d\u79f0\\n- getData \u65b9\u6cd5\u7528\u4e8e\u83b7\u53d6\u5207\u7247\u6570\u91cf\u3001\u63a5\u6536\u4e0a\u4f20\u5b8c\u6210\u5408\u5e76\u5207\u7247\\n- upload \u65b9\u6cd5\u7528\u4e8e\u5904\u7406\u4e0a\u4f20\u666e\u901a\u6587\u4ef6\u3001base64\u683c\u5f0f\u6587\u4ef6\\n\\n```js\\nconst express = require(\'express\')\\nconst app = express()\\nconst multer = require(\'multer\')\\nconst bodyParser = require(\'body-parser\')\\nconst sparkMD5 = require(\'spark-md5\')\\n\\n//\u5f15\u5165 path \u548c fs\\nconst path = require(\'path\')\\nconst fs = require(\'fs\')\\n\\nconst upload = multer({dest: \'./uploads/\'})\\nconst sleep = () => new Promise(resolve => {\\n  setTimeout(resolve, 1000)\\n})\\n\\napp.use(upload.any())\\napp.use(bodyParser.urlencoded({extended: false, limit: \'2100000kb\'}))\\n\\n//\u8bbe\u7f6e\u8de8\u57df\u8bbf\u95ee\\napp.all(\'*\', (req, res, next) => {\\n  res.header(\\"Access-Control-Allow-Origin\\", \\"*\\");\\n  res.header(\\"Access-Control-Allow-Headers\\", \\"X-Requested-With\\");\\n  res.header(\\"Access-Control-Allow-Methods\\", \\"PUT,POST,GET,DELETE,OPTIONS\\");\\n  res.header(\\"X-Powered-By\\", \' 3.2.1\')\\n  res.header(\\"Content-Type\\", \\"application/json;charset=utf-8\\");\\n  next();\\n});\\n\\napp.post(\'/getData\', async function (req, res) {\\n  const body = req.body\\n  if (body.hash && body.suffix) {\\n    const newDir = path.join(__dirname, `/uploads/${body.hash}`)\\n    if (!fs.existsSync(newDir)) {\\n      fs.mkdirSync(newDir)\\n    }\\n\\n    const files = fs.readdirSync(newDir)\\n    res.send({\\n      code: 0,\\n      codeText: \'\u8bf7\u6c42\u6210\u529f\',\\n      fileList: files\\n    })\\n  } else if (body.hash && body.count) {\\n    const newDir = path.join(__dirname, `/uploads/${body.hash}`)\\n    const files = fs.readdirSync(newDir)\\n    const extname = path.extname(files[0])\\n    const newFile = newDir + extname\\n\\n    files.sort((a, b) => {\\n      const reg = /_(\\\\d+)/\\n      return reg.exec(a)[1] - reg.exec(b)[1]\\n    }).forEach(file => {\\n      fs.appendFileSync(newFile, fs.readFileSync(newDir + \'/\' + file))\\n      fs.unlinkSync(newDir + \'/\' + file)\\n    })\\n\\n    fs.rmdirSync(newDir)\\n    res.send({\\n      code: 0,\\n      codeText: \'\u5408\u5e76\u6210\u529f\',\\n      originalFilename: body.filename,\\n      servicePath: \'http://localhost:8888/uploads/\' + body.hash + extname\\n    })\\n  }\\n})\\n\\napp.post(\'/upload\', function (req, res) {\\n  // \u5904\u7406 multipart/form-data \u65b9\u5f0f\\n  if (req.files) {\\n    const file = req.files[0]\\n    const body = req.body\\n    // \u62ff\u5230\u540e\u7f00\u540d\\n    let extname = path.extname(file.originalname);\\n    //\u62fc\u63a5\u65b0\u7684\u6587\u4ef6\u8def\u5f84\uff0c\u6587\u4ef6\u52a0\u4e0a\u540e\u7f00\u540d\\n    let newPath = file.path + extname;\\n\\n    if (body.hash && body.filename) {\\n      const newDir = `uploads/${body.hash}`\\n      newPath = `${newDir}/${body.filename}`\\n    }\\n\\n    //\u91cd\u547d\u540d\\n    fs.rename(file.path, newPath, async function (err) {\\n      // await sleep()\\n\\n      if (err) {\\n        res.send({\\n          code: 1,\\n          codeText: err\\n        })\\n      } else {\\n        res.send({\\n          code: 0,\\n          codeText: \'\u4e0a\u4f20\u6210\u529f\',\\n          originalFilename: file.originalname,\\n          servicePath: \'http://localhost:8888/\' + newPath\\n        })\\n      }\\n    })\\n  } else if (req.body) { // \u5904\u7406  application/x-www-form-urlencoded \u65b9\u5f0f\\n    const body = req.body\\n    //\u8fc7\u6ee4data:URL\\n    const base64Data = decodeURIComponent(body.file).replace(/^data:image\\\\/\\\\w+;base64,/, \\"\\");\\n    const dataBuffer = Buffer.from(base64Data, \'base64\');\\n    // \u5229\u7528\u6269\u5c55\u751f\u4ea7\u552f\u4e00 md5 \u540d\u5b57\\n    const spark = new sparkMD5.ArrayBuffer()\\n    spark.append(base64Data)\\n    // \u62ff\u5230\u540e\u7f00\u540d\\n    const extname = path.extname(body.filename);\\n    // \u65b0\u8def\u5f84\\n    const newPath = \'/uploads/\' + spark.end() + extname\\n    // base64 \u5199\u5165\u6587\u4ef6\\n    fs.writeFile(path.join(__dirname) + newPath, dataBuffer, async function (err) {\\n      // await sleep()\\n\\n      if (err) {\\n        res.send({\\n          code: 1,\\n          codeText: err\\n        })\\n      } else {\\n        res.send({\\n          code: 0,\\n          codeText: \'\u4e0a\u4f20\u6210\u529f\',\\n          originalFilename: body.filename,\\n          servicePath: \'http://localhost:8888\' + newPath\\n        })\\n      }\\n    })\\n  }\\n})\\n\\n\\napp.listen(8888, function () {\\n  console.log(\'Server is running at http://localhost:8888\');\\n})\\n```"},{"id":"/28802","metadata":{"permalink":"/docusaurus/blog/28802","editUrl":"https://github.com/lzwdot/docusaurus/blog/2021/12-29-28802.md","source":"@site/blog/2021/12-29-28802.md","title":"\u9879\u76ee\u4eae\u70b9\u5b9e\u6218","description":"\u6293\u4f4f\u9879\u76ee\u4e2d\u7684\u4e00\u4e9b\u4eae\u70b9","date":"2021-12-29T21:12:10.000Z","formattedDate":"2021\u5e7412\u670829\u65e5","tags":[{"label":"product","permalink":"/docusaurus/blog/tags/product"},{"label":"project","permalink":"/docusaurus/blog/tags/project"}],"readingTime":5.665,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u9879\u76ee\u4eae\u70b9\u5b9e\u6218","ID":"28802","date":"2021-12-29 21:12:10","categories":["product","project"],"tags":["product","project"],"authors":["lzw"],"slug":"/28802","type":"blog"},"prevItem":{"title":"\u6587\u4ef6\u4e0a\u4f20\u548c\u4f18\u5316","permalink":"/docusaurus/blog/29206"},"nextItem":{"title":"\u4f7f\u7528 canvas \u5b9e\u73b0\u6ed1\u52a8\u9a8c\u8bc1\u7801","permalink":"/docusaurus/blog/27987"}},"content":"\x3c!--truncate--\x3e\\n\\n# \u9879\u76ee\u4eae\u70b9\u8bad\u7ec3\\n\\n\u6293\u4f4f\u9879\u76ee\u4e2d\u7684\u4e00\u4e9b\u4eae\u70b9\\n\\n### \u4f60\u505a\u4ec0\u4e48\u9879\u76ee\uff08\u4eae\u70b9\uff09 \\n\\n1\u3001\u4e0d\u8981\u505a\u7f57\u5217\u592a\u591a   \\n2\u3001\u9879\u76ee\u4e2d\u7684\u89d2\u8272\uff0c\u5185\u5bb9\uff0c\u8bbe\u8ba1\u7b49\uff0c\u6709\u6ca1\u6709\u522b\u4eba\u505a\u4e0d\u5230\u7684   \\n   1.  \u4ece 0 \u542f\u52a8\u9879\u76ee\u8fd9\u65b9\u9762    \\n       - \u5de5\u7a0b\u5316\uff0c\u9879\u76ee\u89c4\u8303\uff0c\u53d1\u5e03\u90e8\u7f72...      \\n   2.  \u9700\u6c42\u6df1\u5316     \\n       - \u65e5\u5e38\u4e1a\u52a1\u4e2d\u5982\u4f55\u8bad\u7ec3\u81ea\u5df1\uff0c\u4efb\u4f55\u9700\u6c42\u90fd\u53ef\u4ee5\u505a\u6210\u4eae\u70b9\\n       - \u7f51\u901f\u4e0d\u7a33\u5b9a\\n       - \u6570\u636e\u91cf\u53d8\u5927\\n       - \u4ea4\u4e92\u4e0a\u7684\u4f18\u5316\\n       - ...\\n   3.  \u56e2\u961f\u7684\u89d2\u5ea6\uff0c\u505a\u8fc7\u4ec0\u4e48\u9879\u76ee\u63d0\u5347\u5168\u4f53\u5f00\u53d1\u6548\u7387 or \u8d28\u91cf\\n\\n\u6bd4\u5982  \\n   \\n### \u5fae\u89c2\u6280\u672f\u4eae\u70b9\uff1a\u9700\u6c42\u4f18\u5316    \\n\\n**\u6587\u4ef6\u4e0a\u4f20**\\n\\n1. axios.post+formData+\u8fdb\u5ea6\u6761 over    \\n    1. \u9700\u6c42\u505a\u5b8c\uff0c\u4f46\u662f\u6ca1\u4eae\u70b9   \\n2. \u6587\u4ef6\u662f 2 \u4e2aG    \\n    1. \u65ad\u70b9+\u7eed\u4f20   \\n    2. \u6587\u4ef6\u5207\u5206\u5c0f\u5757\uff0c\u5206\u7247\u4e0a\u4f20\uff0c\u4e0b\u6b21\u7eed\u4f20\\n3. \u62d6\u62fd\uff0c\u7c98\u8d34\uff0c\u4ea4\u4e92\u4e0a\u7684\u4f18\u5316\\n4. \u65ad\u70b9\u7eed\u4f20\uff0c\u9700\u8981\u7ed9\u6587\u4ef6\u52a0\u4e00\u4e2a\u552f\u4e00\u6807\u8bc6\uff0c\u5e38\u89c1\u7684\u5c31\u662f\u8ba1\u7b97\u6587\u4ef6\u5185\u5bb9\u7684 md5\\n    1. \u8ba1\u7b97 2G \u6587\u4ef6\u7684 md5, \u53ef\u80fd\u9700\u8981 20s \u5de6\u53f3\uff0c\u5361\u987f\u600e\u4e48\u89e3\u51b3\\n    2. webworker\uff0c\u5f71\u5206\u8eab\\n    3. \u62bd\u6837\uff08\u635f\u5931\u4e00\u4e22\u4e22\u7684\u6b63\u786e\u7387\uff0c\u6362\u53d6\u4e86\u6548\u7387\u7684\u5de8\u5927\u63d0\u5347\uff09\\n       - \u6ca1\u62bd\u5230\u7684\u6570\u636e\u5982\u679c\u4fee\u6539\u4e86\uff0c\u8fd9\u4e2a\u662f\u5206\u8fa8\u4e0d\u51fa\u6765\u7684\\n       - \u300a\u5e03\u9686\u8fc7\u6ee4\u5668\u300b\u7684\u601d\u60f3\\n       - \u53ef\u4ee5\u9884\u5224\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u5224\u65ad hash \u6b63\u786e\uff0c\u53ef\u80fd\u8bef\u5224\uff0c\u5224\u65ad hash \u4e0d\u6b63\u786e\uff0c\u4e00\u5b9a\u662f\u51c6\u7684\\n    4. \u5de8\u5927\u7684\u8ba1\u7b97\u91cf\u5bfc\u81f4\u7684\u5361\u987f\uff0c\u5982 react15 \u65f6\u4ee3\u7684 dom diff \u5982\u679c\u8ba1\u7b97\u91cf\u5927\uff0c\u4f1a\u5bfc\u81f4\u5361\u987f  \\n       - \u7a7a\u95f2\u65f6\u95f4\u8ba1\u7b97  \\n       - \u6e90\u7801\u4e2d\u5b66\u5230\u7684\u5f88\u591a\u601d\u60f3\uff0c\u5e76\u4e0d\u662f\u5355\u7eaf\u7684\u4e3a\u4e86\u9762\u8bd5 or \u770b\u4ee3\u7801\uff0c\u65b0\u601d\u8def\uff0c\u89e3\u51b3\u95ee\u9898\\n    \\n5. \u6709\u4eae\u70b9\u7684\u56fe\u7247\u683c\u5f0f\u9650\u5b9a\\n      1. \u5934\u50cf\u4e0a\u4f20\uff0c\u53ea\u5141\u8bb8 .png \u683c\u5f0f\\n      2. \u6700\u7b80\u5355\u5c31\u662f\u6587\u4ef6 .type, name.splite(\'.\')[1]===\'png\'\uff0c\u6839\u636e\u6587\u4ef6\u540d\u5224\u65ad\uff0c\u90fd\u6709\u5c0f\u9690\u60a3\\n      3. \u4ee5\u4e0a\u90fd\u6709\u5c0f\u9690\u60a3\uff0c\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u540e\u7f00\u540d\u6765\u9a97\u8fc7\\n      4. \u6700\u597d\u662f\u901a\u8fc7**\u4e8c\u8fdb\u5236\u5934\u4fe1\u606f**\u8bfb\u53d6\u683c\u5f0f\u8981\u6c42\\n      5. \u56fe\u7247\u5bbd\u9ad8\uff0c\u90fd\u53ef\u4ee5\u5728\u4e8c\u8fdb\u5236\u91cc\u8bfb\u51fa\u6765\uff0c\u4e0d\u7528\u52a0\u8f7d\u5c31\u80fd\u9650\u5b9a\\n \\n6. \u5207\u7247\u5207\u597d\u4e86\uff0c\u4e00\u5171 100 \u4e2a\u5207\u7247\uff0cmd5 \u7b97\u597d\u4e86\\n    1. \u5982\u679c\u76f4\u63a5 promise.all, \u540c\u65f6\u53d1\u8d77 100 \u4e2a tcp \u7684\u8bf7\u6c42\uff0c\u4e5f\u4f1a\u5361\u987f\\n    2. \u600e\u4e48\u89e3\u51b3\\n        - \u5e76\u53d1\u6570\u63a7\u5236+\u9519\u8bef\u91cd\u8bd5\\n        \\n7. \u4e00\u4e2a\u5207\u7247\u5230\u5e95\u591a\u5927\uff0c\u600e\u4e48\u5b9a\\n    1. \u53ef\u4ee5\u501f\u9274 tcp \u7684\u6162\u542f\u52a8\u903b\u8f91\uff0c\u5148\u53d1\u5c0f\u5305\uff0c\u6839\u636e\u54cd\u5e94\u65f6\u95f4\u52a8\u6001\u8c03\u6574\uff08\u5f88\u5feb\uff0c\u5305\u5927\u5c0f\u7ffb\u500d\uff0c\u5f88\u6162 \u5305\u53d8\u5c0f\u4e00\u4e9b\uff09\\n    2. ... \u7ee7\u7eed\u6839\u636e\u8fd9\u4e9b\u539f\u5219\uff08\u7f51\u7edc\u6162\uff0c\u4ea4\u4e92\u7b49\uff09\u53bb\u6269\u5c55\\n\\n**\u5217\u8868\u6e32\u67d3**\\n\\n1.\u6570\u636e\u91cf\u53d8\u5927   \\n2.\u865a\u62df\u6eda\u52a8 antd 4.0 \u81ea\u5e26\u7684\u529f\u80fd   \\n\\n\u8fd8\u6709\u66f4\u591a\u9700\u6c42\\n\\n### \u5b8f\u89c2\u89d2\u5ea6\uff0c\u9879\u76ee\u7684\u4eae\u70b9\u662f\u4ec0\u4e48\\n\\n\u4ece\u5f00\u53d1\uff0c\u5230\u4e0a\u7ebf\uff0c\u6240\u6709\u7684\u8fc7\u7a0b\u90fd\u662f\u5de5\u7a0b\u5316\u8d1f\u8d23\uff0c\u90fd\u53ef\u4ee5\u53c8\u4e00\u4e22\u4e22\u4eae\u70b9 \u53ef\u4ee5 show\\n\\n1. \u89c4\u8303\\n   1. eslint\\n   2. \u547d\u540d\u89c4\u8303\\n   3. git \u89c4\u8303\uff0c\u5206\u652f\uff0clog \u89c4\u8303...\\n   4. \u7ec4\u4ef6\u89c4\u8303\\n   5. ....\\n   6. \u4f7f\u7528 git hook \u53bb\u6821\u9a8c\u89c4\u8303\\n\\n2. \u6280\u672f\u9009\u578b\\n   1. vue or react, \u770b\u56e2\u961f\u7684\u4eba\\n   2. \u8bed\u8a00\u6269\u5c55\u5e93\uff08loadsh \u8fd8\u662f\u81ea\u5df1\u5199\uff09\\n   3. \u662f\u4e0d\u662f ssr, \u65e5\u671f\uff0c\u7ec4\u4ef6\u5e93\uff0c\u6570\u636e\uff0c\u8def\u7531...\\n   4. ssr \uff08\u9996\u5c4f\u6027\u80fd\uff0cseo\uff09\\n       1. \u4ece 0 \u5f00\u59cb\uff0c next or nuxt \u7b49 ssr \u6846\u67b6\\n       2. \u5df2\u7ecf\u6210\u578b\u7684 \u53ef\u4ee5\u91cd\u6784\uff0c\u4e5f\u53ef\u4ee5\u9759\u6001\u5316\uff0cpuppeteer \u7b49\u65b9\u5f0f hack \u4e00\u4e0b\uff0c\u6b21\u4f18\u89e3\uff0c\u5de5\u4f5c\u91cf\u6bd4\u8f83\u4f4e\\n\\n3. \u901a\u7528\u903b\u8f91\u5206\u88c5\\n   1. axios \u62e6\u622a\u5668\\n   2. \u6743\u9650\u62e6\u622a\\n   3. ...\\n   \\n\\n4. webpack \u7684\u4f18\u5316\\n   1. \u6027\u80fd\u4f18\u5316\uff0cbundle-analysis\\n   2. gzip, dll, \u61d2\u52a0\u8f7d\\n   3. preload, prefetch\\n   4. \u6027\u80fd\u4f18\u5316...\\n   5. \u81ea\u5b9a\u4e49\u63d2\u4ef6\uff0cloader,plugin...\\n   \\n5. \u901a\u7528\u7ec4\u4ef6\\n   1. \u7ec4\u4ef6\u5e93\u7684\u57fa\u672c\u8bbe\u8ba1\uff0c\u53c2\u8003 element-ui, ant-design\\n   2. \u79c1\u6709 npm ...\\n \\n6. \u57fa\u4e8e\u8fd9\u4e9b\u7cfb\u7edf\u7684\u8fdb\u9636\u63d0\u6548\\n   1. lowcode\\n   2. codereview \u6d41\u7a0b\\n      - \u4ee3\u7801\u5ba1\u6838\uff0c\u5199\u4ee3\u7801\u4ee3\u7801\u4e0d\u80fd\u76f4\u63a5 merge master\uff0c\u8981\u7ed9\u4e00\u4e2a\u540c\u4e8b\u5ba1\u6838  \\n      - code review \u662f\u53ef\u4ee5\u7528\u6765\u76d1\u7763\u81ea\u5df1\u5b66\u4e60\u7684  \\n         - \u4e0d\u4e00\u5b9a\u975e\u5f97\u5ba1\u6838\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4f60\u89c9\u5f97\u6211\u7684\u4ee3\u7801\u5199\u7684\u4e0d\u9519\uff0c\u4f60\u5c31\u627e\u6211\u8981\u6c42\u6211\u6bcf\u6b21 commit\uff0c\u90fd\u9ed8\u8ba4\u7ed9 review \u4e00\u4efd\\n   2. \u81ea\u52a8\u5316\u90e8\u7f72 git+gitlab+\u9489\u9489\u63a8\u9001\\n   3. \u6027\u80fd\u7edf\u8ba1\\n   4. \u62a5\u9519\u7edf\u8ba1 sentry\\n   5. ...\\n   \\n---\\n\u4f53\u9a8c\u5c42\u9762\uff0c\u90fd\u53bb\u7528 ant.design\\n\\n\\n### \u81ea\u8eab\u4eae\u70b9\u4fee\u70bc\\n\\n\u4eae\u70b9\uff0c\u8ffd\u70ed\u70b9\uff0c\u4e0d\u5efa\u8bae\u76f2\u76ee\u8ffd\u70ed\u70b9\uff0c\u5b66\u4e60\u6210\u719f\u7684\u6280\u672f,\u518d\u8003\u8651\u4e2a\u4eba\u7279\u8272    \\n\\n\u4e0d\u80fd\u548c\u5e74\u8f7b\u4eba\u62fc\u7cbe\u529b\uff0c\u6709\u4e00\u4e9b\u5e74\u8f7b\u4eba\u6ca1\u6709\u7684\u80fd\u529b\uff0c\u6bd4\u5982    \\n\u786c\uff1a\u6280\u672f\u6301\u7eed\u63d0\u5347\uff0c\u4ece\u73b0\u5728\u5f00\u59cb\uff0cLeetCode\uff0c\u6bcf\u5929\u5237\u4e00\u9898\uff0c\u5237\u5230 200 \u9053\u9898       \\n\u8f6f\uff1a\u591a\u8bfb\u4e66    \\n\\n\\n\u9879\u76ee\u505a\u6210\u4eae\u70b9\u7684\u8bad\u7ec3\u65b9\u5f0f"},{"id":"/27987","metadata":{"permalink":"/docusaurus/blog/27987","editUrl":"https://github.com/lzwdot/docusaurus/blog/2021/10-10-27987.md","source":"@site/blog/2021/10-10-27987.md","title":"\u4f7f\u7528 canvas \u5b9e\u73b0\u6ed1\u52a8\u9a8c\u8bc1\u7801","description":"\u4f7f\u7528 canvas \u5b9e\u73b0\u7684\u6ed1\u52a8\u9a8c\u8bc1\u7801","date":"2021-10-10T20:52:22.000Z","formattedDate":"2021\u5e7410\u670810\u65e5","tags":[{"label":"js-ts","permalink":"/docusaurus/blog/tags/js-ts"},{"label":"js-study","permalink":"/docusaurus/blog/tags/js-study"}],"readingTime":4.98,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u4f7f\u7528 canvas \u5b9e\u73b0\u6ed1\u52a8\u9a8c\u8bc1\u7801","ID":"27987","date":"2021-10-10 20:52:22","categories":["js-ts","js-study"],"tags":["js-ts","js-study"],"authors":["lzw"],"slug":"/27987","type":"blog"},"prevItem":{"title":"\u9879\u76ee\u4eae\u70b9\u5b9e\u6218","permalink":"/docusaurus/blog/28802"},"nextItem":{"title":"\u968f\u673a\u5bc6\u7801\u751f\u6210\u5668","permalink":"/docusaurus/blog/27986"}},"content":"\x3c!--truncate--\x3e\\n\\n### \u4f7f\u7528 canvas \u5b9e\u73b0\u7684\u6ed1\u52a8\u9a8c\u8bc1\u7801     \\n\\n\\n\\n\\n<HtmlDemo>\\n \\n\\n``` html\\n<div id=\\"slideJigsaw\\" class=\\"slide-jigsaw\\">\\n    <canvas class=\\"panel\\"></canvas>\\n    <canvas class=\\"jigsaw\\"></canvas>\\n    <div class=\\"refresh\\"><i class=\\"icon\\"></i></div>\\n    <div class=\\"loading\\">\\n        <div class=\\"wrap\\">\\n            <i class=\\"icon\\"></i>\\n            <p>\u52a0\u8f7d\u4e2d...</p>\\n        </div>\\n    </div>\\n    <div class=\\"control\\">\\n        <div class=\\"indicator\\"></div>\\n        <div class=\\"slider\\"><i class=\\"icon\\"></i></div>\\n        <div class=\\"tips\\">\u5411\u53f3\u62d6\u52a8\u6ed1\u5757\u586b\u5145\u62fc\u56fe</div>\\n    </div>\\n</div>\\n<script>\\nwindow.onload = function(){\\n  const slideJigsaw = {\\n    init(options, onSuccess, onFail) {\\n      this.slideJigsaw = document.querySelector(\'#slideJigsaw\')\\n\\n      // dom\\n      this.panel = this.slideJigsaw.querySelector(\'.panel\')\\n      this.jigsaw = this.slideJigsaw.querySelector(\'.jigsaw\')\\n      this.loading = this.slideJigsaw.querySelector(\'.loading\')\\n      this.refresh = this.slideJigsaw.querySelector(\'.refresh\')\\n      this.indicator = this.slideJigsaw.querySelector(\'.indicator\')\\n      this.slider = this.slideJigsaw.querySelector(\'.slider\')\\n      this.tips = this.slideJigsaw.querySelector(\'.tips\')\\n      this.img = document.createElement(\'img\')\\n\\n      // size\\n      this.w = this.panel.offsetWidth\\n      this.h = this.panel.offsetHeight\\n      this.l = 40\\n      this.r = 10\\n      this.x = 0\\n      this.y = 0\\n\\n      // options\\n      Object.assign(this, options)\\n      this.onSuccess = onSuccess\\n      this.onFail = onFail\\n\\n      // canvas\\n      this.panel_ctx = this.panel.getContext(\'2d\')\\n      this.jigsaw_ctx = this.jigsaw.getContext(\'2d\')\\n\\n      // reset\\n      this.resetDraw()\\n    },\\n\\n    resetDraw() {\\n      const _w = this.l + this.r * 2\\n\\n      this.jigsaw.width = this.w\\n      this.indicator.style.width = this.numToPx(0)\\n      this.jigsaw.style.left = this.numToPx(0)\\n      this.slider.style.left = this.numToPx(0)\\n\\n      this.x = Math.floor(Math.random() * (this.w - _w * 2) + _w)\\n      this.y = Math.floor(Math.random() * (this.h - _w) + this.r * 2)\\n\\n      this.panel_ctx.clearRect(0, 0, this.w, this.h)\\n      this.jigsaw_ctx.clearRect(0, 0, this.w, this.h)\\n\\n      // img src\\n      this.setImgSrc()\\n\\n      // draw\\n      this.drawPath(this.panel_ctx, \'fill\')\\n      this.drawPath(this.jigsaw_ctx, \'clip\')\\n    },\\n\\n    setImgSrc() {\\n      this.showLoading(true)\\n      this.showTips(true)\\n      this.setState(\'\')\\n\\n      this.img.crossOrigin = \\"anonymous\\"\\n      this.img.src = `https://fakeimg.pl/${this.w}x${this.h}/${this.randomInt(1000)}/`\\n      this.img.onerror = () => this.resetDraw()\\n      this.img.onload = () => {\\n        this.panel_ctx.drawImage(this.img, 0, 0, this.w, this.h)\\n        this.jigsaw_ctx.drawImage(this.img, 0, 0, this.w, this.h)\\n\\n        const _w = this.l + this.r * 2\\n        const _y = this.y - this.r * 2\\n        const imageData = this.jigsaw_ctx.getImageData(this.x, _y, _w, _w)\\n\\n        this.jigsaw.width = _w // do not use style width\\n        this.jigsaw_ctx.putImageData(imageData, 0, _y)\\n\\n        // hide loading\\n        this.showLoading(false)\\n\\n        // events\\n        this.bindEvents()\\n      }\\n    },\\n\\n    drawPath(ctx, operation) {\\n      const {x, y, l, r} = this\\n      const PI = Math.PI\\n\\n      ctx.beginPath()\\n      ctx.moveTo(x, y)\\n\\n      // draw top circle (clockwise from bottom 0.5 to 2.5)\\n      ctx.arc(x + l / 2, y - r + 2.5, r, (0.5 + 0.25) * PI, (2.5 - 0.25) * PI)\\n      ctx.lineTo(x + l, y)\\n\\n      // draw left circle (clockwise from left 1 to 3)\\n      ctx.arc(x + l + r - 2.5, y + l / 2, r, (1 + 0.25) * PI, (3 - 0.25) * PI)\\n\\n      // draw rect\\n      ctx.lineTo(x + l, y + l)\\n      ctx.lineTo(x, y + l)\\n\\n      // draw left concave semicircle(anti-clockwise from left 1 to 3)\\n      ctx.arc(x + r - 2.5, y + l / 2, r, (3 - 0.25) * PI, (1 + 0.25) * PI, true)\\n      ctx.lineTo(x, y)\\n      ctx.lineWidth = 2\\n\\n      ctx.fillStyle = \'rgba(255, 255, 255, 0.5)\' // fill style\\n      ctx.strokeStyle = \'rgba(255, 255, 255, 0.5)\' // border style\\n      ctx.stroke()\\n\\n      ctx.globalCompositeOperation = \'destination-over\'\\n      ctx[operation === \'fill\' ? \'fill\' : \'clip\']() //fill or clip\\n    },\\n\\n    bindEvents() {\\n      let oX = 0\\n      let oY = 0\\n      let canMove = false\\n\\n      const dragStart = (e) => {\\n        oX = e.x || e.touches[0].clientX\\n        oY = e.y || e.touches[0].clientY\\n        canMove = true\\n\\n        this.showTips(false)\\n      }\\n\\n      const dragMove = (e) => {\\n        if (!canMove) return\\n        e.preventDefault()\\n\\n        const mX = (e.x || e.touches[0].clientX) - oX\\n        const jigsaw_x = mX < 0 ? Math.max(0, mX) : Math.min(this.w - this.l - this.r * 2, mX)\\n        const slider_x = mX < 0 ? Math.max(0, mX) : Math.min(this.w - this.slider.offsetWidth, mX)\\n\\n        this.jigsaw.style.left = this.numToPx(jigsaw_x)\\n        this.slider.style.left = this.numToPx(slider_x)\\n        this.indicator.style.width = this.numToPx(slider_x)\\n      }\\n\\n      const dragEnd = (e) => {\\n        if (!canMove) return\\n        canMove = false\\n\\n        const left = parseInt(this.jigsaw.style.left)\\n        if (Math.abs(left - this.x) < this.r / 4) {\\n          this.setState(\'onSuccessess\')\\n          typeof this.onSuccess === \'function\' && this.onSuccess()\\n        } else {\\n          this.setState(\'onFail\')\\n          typeof this.onFail === \'function\' && this.onFail()\\n\\n          setTimeout(() => {\\n            this.resetDraw()\\n          }, 1000)\\n        }\\n\\n        // touch\\n        this.slider.removeEventListener(\'touchstart\', dragStart)\\n        document.removeEventListener(\'touchmove\', dragMove)\\n        document.removeEventListener(\'touchend\', dragEnd)\\n        // mouse event\\n        this.slider.removeEventListener(\'mousedown\', dragStart)\\n        document.removeEventListener(\'mousemove\', dragMove)\\n        document.removeEventListener(\'mouseup\', dragEnd)\\n      }\\n\\n      // touch\\n      this.slider.addEventListener(\'touchstart\', dragStart)\\n      document.addEventListener(\'touchmove\', dragMove)\\n      document.addEventListener(\'touchend\', dragEnd)\\n      // mouse event\\n      this.slider.addEventListener(\'mousedown\', dragStart)\\n      document.addEventListener(\'mousemove\', dragMove)\\n      document.addEventListener(\'mouseup\', dragEnd)\\n\\n      // refresh\\n      this.refresh.addEventListener(\'click\', () => this.resetDraw())\\n    },\\n\\n    numToPx(num) {\\n      return num + \'px\'\\n    },\\n\\n    randomInt(num) {\\n      return Math.floor(Math.random() * (num || 1000) + 1)\\n    },\\n\\n    showLoading(show) {\\n      this.loading.style.display = show ? \'block\' : \'none\'\\n      this.slideJigsaw.style.pointerEvents = show ? \'none\' : \'\'\\n    },\\n\\n    showTips(show) {\\n      this.tips.style.display = show ? \'block\' : \'none\'\\n    },\\n\\n    setState(state) {\\n      this.slider.className = \'slider \' + state\\n    }\\n } \\n slideJigsaw.init({}, \\n      () => { console.log(\'sucss\')}, \\n      () => { console.log(\'fail\')}\\n  )\\n}\\n<\/script>\\n<style>\\n    .slide-jigsaw,\\n    .slide-jigsaw .panel,\\n    .slide-jigsaw .control {\\n        position: relative;\\n        font-size: 14px;\\n    }\\n\\n    .slide-jigsaw,\\n    .slide-jigsaw .panel,\\n    .slide-jigsaw .loading {\\n        height: 150px;\\n        width: 300px;\\n    }\\n\\n\\n    .slide-jigsaw .loading,\\n    .slide-jigsaw .refresh,\\n    .slide-jigsaw .indicator,\\n    .slide-jigsaw .slider,\\n    .slide-jigsaw .jigsaw {\\n        position: absolute;\\n        top: 0;\\n        left: 0;\\n    }\\n\\n    .slide-jigsaw .icon {\\n        width: 32px;\\n        height: 32px;\\n        display: inline-block;\\n        cursor: pointer;\\n        background-image: url(\\"//cstaticdun.126.net/2.16.0/images/icon_light.fa89a9e.png\\");\\n        background-repeat: no-repeat;\\n        background-size: 32px 711px;\\n    }\\n\\n    .slide-jigsaw .loading {\\n        font-size: 12px;\\n        z-index: 100;\\n        background-color: #f7f9fa;\\n    }\\n\\n    .slide-jigsaw .loading .wrap {\\n        display: flex;\\n        width: 100%;\\n        height: 100%;\\n        flex-direction: column;\\n        justify-content: center;\\n        align-items: center;\\n    }\\n\\n    .slide-jigsaw .loading .icon {\\n        background-position: 0 -499px;\\n        animation: loading-rotate 1s linear infinite;\\n    }\\n\\n    .slide-jigsaw .refresh {\\n        left: initial;\\n        right: 0;\\n    }\\n\\n    .slide-jigsaw .refresh .icon {\\n        background-position: 0 -333px;\\n    }\\n\\n    .slide-jigsaw .refresh:hover .icon {\\n        background-position: 0 -366px;\\n    }\\n\\n    .slide-jigsaw .control {        \\n        text-align: center;\\n        width: 298px;\\n        height: 40px;\\n        line-height: 40px;\\n        margin-top: 10px;\\n        border: 1px solid #e4e7eb;\\n        background-color: #f7f9fa;\\n        color: #45494c;\\n    }\\n\\n    .slide-jigsaw .indicator {\\n        height: 38px;\\n        border: 1px solid #1991fa;\\n        background-color: #d1e9fe;\\n        -webkit-overflow-scrolling: touch;\\n    }\\n\\n    .slide-jigsaw .slider {\\n        display: flex;\\n        justify-content: center;\\n        align-items: center;\\n        width: 40px;\\n        height: 40px;\\n        background-color: #fff;\\n        box-shadow: 0 0 3px rgba(0, 0, 0, .3);\\n        cursor: pointer;\\n        transition: background .2s linear;\\n        -webkit-overflow-scrolling: touch;\\n    }\\n\\n    .slide-jigsaw .slider .icon {\\n        background-position: 0 -12px;\\n        width: 15px;\\n        height: 12px;\\n    }\\n\\n    .slide-jigsaw .slider:hover {\\n        background-color: #1991fa;\\n        transition: background .2s linear\\n    }\\n\\n    .slide-jigsaw .slider:hover .icon {\\n        background-position: 0 0;\\n    }\\n\\n    .slide-jigsaw .slider.onSuccessess {\\n        height: 38px;\\n        border: 1px solid #52ccba;\\n        background-color: #d2f4ef;\\n    }\\n\\n    .slide-jigsaw .slider.onSuccessess .icon,\\n    .slide-jigsaw .slider.onSuccessess:hover .icon {\\n        width: 18px;\\n        height: 15px;\\n        background-position: 0 -65px;\\n    }\\n\\n    .slide-jigsaw .slider.onFail {\\n        height: 38px;\\n        border: 1px solid #f57a7a;\\n        background-color: #fce1e1;\\n    }\\n\\n    .slide-jigsaw .slider.onFail .icon,\\n    .slide-jigsaw .slider.onFail:hover .icon {\\n        width: 12px;\\n        height: 15px;\\n        background-position: 0 -95px;\\n    }\\n\\n    @keyframes loading-rotate {\\n        from {\\n            transform: rotate(0)\\n        }\\n        to {\\n            transform: rotate(360deg)\\n        }\\n    }\\n</style>\\n```\\n\\n</HtmlDemo>"},{"id":"/27986","metadata":{"permalink":"/docusaurus/blog/27986","editUrl":"https://github.com/lzwdot/docusaurus/blog/2021/08-21-27986.md","source":"@site/blog/2021/08-21-27986.md","title":"\u968f\u673a\u5bc6\u7801\u751f\u6210\u5668","description":"\u8fd9\u91cc\u4e0d\u4f1a\u8bb0\u5f55\u60a8\u7684\u968f\u673a\u5bc6\u7801\uff0c\u8bf7\u60a8\u59a5\u5584\u4fdd\u5b58\u3002","date":"2021-08-21T14:42:20.000Z","formattedDate":"2021\u5e748\u670821\u65e5","tags":[{"label":"product","permalink":"/docusaurus/blog/tags/product"},{"label":"tools","permalink":"/docusaurus/blog/tags/tools"}],"readingTime":3.47,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u968f\u673a\u5bc6\u7801\u751f\u6210\u5668","ID":"27986","date":"2021-08-21 14:42:20","categories":["product","tools"],"tags":["product","tools"],"authors":["lzw"],"slug":"/27986","type":"blog"},"prevItem":{"title":"\u4f7f\u7528 canvas \u5b9e\u73b0\u6ed1\u52a8\u9a8c\u8bc1\u7801","permalink":"/docusaurus/blog/27987"},"nextItem":{"title":"JS MD5\u52a0\u5bc6","permalink":"/docusaurus/blog/27985"}},"content":"\x3c!--truncate--\x3e\\n\\n> \u8fd9\u91cc\u4e0d\u4f1a\u8bb0\u5f55\u60a8\u7684\u968f\u673a\u5bc6\u7801\uff0c\u8bf7\u60a8\u59a5\u5584\u4fdd\u5b58\u3002\\n\\n``` html\\n\\n<div>\\n<el-row>\\n  <el-col :span=\\"4\\">\\n    <div class=\\"grid-content\\">\u9009\u62e9\u5b57\u7b26</div>\\n  </el-col>\\n  <el-col :span=\\"20\\">\\n    <div class=\\"grid-content\\">\\n      <el-checkbox-group v-model=\\"checkList\\">\\n        <el-checkbox label=\\"1\\">A-Z</el-checkbox>\\n        <el-checkbox label=\\"2\\">a-z</el-checkbox>\\n        <el-checkbox label=\\"3\\">0-9</el-checkbox>\\n        <el-checkbox label=\\"4\\">!@#$%^&*</el-checkbox>\\n      </el-checkbox-group>\\n    </div>\\n  </el-col>\\n</el-row>\\n<el-row>\\n  <el-col :span=\\"4\\">\\n    <div class=\\"grid-content\\">\u5bc6\u7801\u957f\u5ea6</div>\\n  </el-col>\\n  <el-col :span=\\"20\\">\\n    <div class=\\"grid-content\\">\\n      <el-slider v-model=\\"sliderValue\\"></el-slider>\\n    </div>\\n  </el-col>\\n</el-row>\\n<el-row>\\n  <el-col :span=\\"4\\">\\n    <div class=\\"grid-content\\">\u5f3a\u5ea6\u8bc4\u4f30</div>\\n  </el-col>\\n  <el-col :span=\\"20\\">\\n    <div class=\\"grid-content\\">\\n      <el-input v-model=\\"pwdValue\\" placeholder=\\"\u8f93\u5165\u5b57\u7b26\\" @click=\\"inputSelect\\" ref=\\"pwdValue\\">\\n        <template #append>\\n          <el-rate\\n            v-model=\\"scoreValue\\"\\n            disabled\\n            show-score\\n            text-color=\\"#ff9900\\"\\n            score-template=\\"{value}\\">\\n          </el-rate>\\n        </template>\\n      </el-input>\\n    </div>\\n    <el-alert v-if=\\"scoreLabel\\"\\n              :closable=\\"closable\\"\\n              :title=\\"scoreLabel\\"\\n              type=\\"success\\">\\n    </el-alert>\\n    <el-alert v-else\\n              :closable=\\"closable\\"\\n              title=\\"\u53ef\u4ee5\u9009\u62e9\u5b57\u7b26\uff0c\u751f\u6210\u968f\u673a\u5bc6\u7801\\"\\n              type=\\"info\\">\\n    </el-alert>\\n  </el-col>\\n</el-row>\\n</div>\\n\\n<script>\\nimport zxcvbn from \'zxcvbn\'\\n\\nexport default {\\n  data() {\\n    return {\\n      checkList: [],\\n      sliderValue: 16,\\n      scoreValue: 0,\\n      scoreLabel: \'\',\\n      pwdValue: \'\',\\n      closable: false\\n    }\\n  },\\n  watch: {\\n    checkList(newVal) {\\n      this.makePassWord()\\n    },\\n    sliderValue(newVal) {\\n      this.makePassWord()\\n    },\\n    pwdValue(newVal) {\\n      this.passwordStrength()\\n    }\\n  },\\n  methods: {\\n    inputSelect() {\\n      this.$refs.pwdValue.select()\\n    },\\n    makePassWord() {\\n      const lowerCase = \'abcdefghijklmnopqrstuvwxyz\'\\n      const upCase = \'ABCDEFGHIJKLMNOPQRSTUVWXYZ\'\\n      const number = \'1234567890\'\\n      const special = \'!@#$%^&*\'\\n\\n      let randStr = \'\'\\n      if (this.checkList.includes(\'1\')) randStr += lowerCase\\n      if (this.checkList.includes(\'2\')) randStr += upCase\\n      if (this.checkList.includes(\'3\')) randStr += number\\n      if (this.checkList.includes(\'4\')) randStr += special\\n\\n      let length = randStr.length\\n      let pwdStr = \'\'\\n      for (let i = 0; i < this.sliderValue && randStr; i++) {\\n        pwdStr += randStr[Math.floor(Math.random() * length)]\\n      }\\n\\n      this.pwdValue = pwdStr\\n    },\\n\\n    passwordStrength() {\\n      const scoreLabel = [\'\u592a\u5bb9\u6613\u731c\u5230\u4e86\u5427\', \'\u5f88\u5bb9\u6613\u5c31\u731c\u5230\u4e86\', \'\u53ef\u4ee5\u4e0d\u5bb9\u6613\u731c\u4e86\', \'\u5b89\u5168\u6bd4\u8f83\u96be\u731c\u5230\', \'\u5f88\u5b89\u5168\u5f88\u96be\u731c\u5230\']\\n      const pwdStr = this.pwdValue\\n      const {score, guesses} = this.checkPassWord(pwdStr)\\n\\n      this.scoreValue = pwdStr ? score + 1 : 0\\n      this.scoreLabel = pwdStr ? `\u8fd9\u4e2a\u5bc6\u7801${scoreLabel[score]}\uff0c\u8bc4\u4f30\uff1a\u4e00\u822c\u7834\u89e3${this.formatTime(guesses)}\uff0c\u8d85\u7ea7\u7206\u7834\u7684\u8bdd\u53ef\u80fd${this.formatTime(guesses / 10e9)}` : \'\'\\n    },\\n\\n    checkPassWord(value) {\\n      try {\\n        // console.log(zxcvbn(value))\\n        return value ? zxcvbn(value) : 0\\n      } catch (err) {\\n        console.error(err)\\n      }\\n\\n      // 0\uff1a\u592a\u5bb9\u6613\u731c\u5230\u4e86\u5427\\n      // 1\uff1a\u5f88\u5bb9\u6613\u5c31\u731c\u5230\u4e86\\n      // 2\uff1a\u8fd8\u662f\u6709\u70b9\u5bb9\u6613\u731c\\n      // 3\uff1a\u5b89\u5168\u6bd4\u8f83\u96be\u731c\u5230\\n      // 4\uff1a\u975e\u5e38\u5b89\u5168\u96be\u731c\u5230\\n      let score = 0 //\u6700\u521d\u7ea7\u522b\\n      if (/\\\\d/.test(value)) {//\u5982\u679c\u7528\u6237\u8f93\u5165\u7684\u5bc6\u7801 \u5305\u542b\u4e86\u6570\u5b57\\n        score = 1\\n      }\\n      if (/[a-z]/.test(value)) {//\u5982\u679c\u7528\u6237\u8f93\u5165\u7684\u5bc6\u7801 \u5305\u542b\u4e86\u5c0f\u5199\u7684a\u5230z\\n        score = 2\\n      }\\n      if (/[A-Z]/.test(value)) {//\u5982\u679c\u7528\u6237\u8f93\u5165\u7684\u5bc6\u7801 \u5305\u542b\u4e86\u5927\u5199\u7684A\u5230Z\\n        score = 3\\n      }\\n      if (/\\\\W/.test(value)) {//\u5982\u679c\u662f\u975e\u6570\u5b57 \u5b57\u6bcd \u4e0b\u5212\u7ebf\\n        score = 4\\n      }\\n      return {score, guesses: 1}\\n    },\\n\\n    formatTime(str) {\\n      const seconds = Math.abs(str)\\n      const arrN = [\'\u4e0a\u4e07\', \'\u4e0a\u5343\', \'\u51e0\u767e\', \'\u51e0\u5341\', \'\u51e0\', \'\u4e00\']\\n      const arrR = [\'\u4f30\u8ba1\u8981%\u5e74\', \'\u4e5f\u8981%\u4e2a\u6708\', \'\u9700\u8981%\u661f\u671f\', \'\u53ea\u8981%\u5929\', \'\u53ea\u8981%\u5c0f\u65f6\', \'\u5c31%\u5206\u949f\', \'\u5c31%\u79d2\', \'\u4e0d\u52301\u79d2\'];\\n      const arrT = [31536000, 2592000, 604800, 86400, 3600, 60, 1];\\n\\n      let time = \'\', index = arrT.length\\n      for (let i = 0; i < arrT.length; i++) {\\n        time = seconds / arrT[i]\\n        if (time >= 1) {\\n          time = Math.round(time)\\n          index = i\\n          break\\n        }\\n      }\\n\\n      // \u5982\u679c\u662f\u5e74\\n      if (index === 0) {\\n        switch (true) {\\n          case time > 10000:\\n            time = arrN[0];\\n            break\\n          case time > 1000:\\n            time = arrN[1];\\n            break\\n          case time > 100:\\n            time = arrN[2];\\n            break\\n          case time > 10:\\n            time = arrN[3];\\n            break\\n          case time > 1:\\n            time = arrN[4];\\n            break\\n          default:\\n            time = arrN[5];\\n            break\\n        }\\n      }\\n\\n      return arrR[index].replace(\'%\', time)\\n    }\\n  }\\n}\\n<\/script>\\n\\n<style lang=\\"scss\\" scoped>\\n.el-row {\\n  border: 1px solid #ccc;\\n  padding: 10px;\\n\\n  &:last-child {\\n    margin-bottom: 0;\\n  }\\n}\\n\\n.el-col {\\n  border-radius: 4px;\\n}\\n</style>\\n\\n```"},{"id":"/27985","metadata":{"permalink":"/docusaurus/blog/27985","editUrl":"https://github.com/lzwdot/docusaurus/blog/2021/08-20-27985.md","source":"@site/blog/2021/08-20-27985.md","title":"JS MD5\u52a0\u5bc6","description":"\u8bf7\u8f93\u5165MD5\u660e\u6587\u5b57\u7b26","date":"2021-08-20T10:56:11.000Z","formattedDate":"2021\u5e748\u670820\u65e5","tags":[{"label":"product","permalink":"/docusaurus/blog/tags/product"},{"label":"tools","permalink":"/docusaurus/blog/tags/tools"}],"readingTime":0.685,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"JS MD5\u52a0\u5bc6","ID":"27985","date":"2021-08-20 10:56:11","categories":["product","tools"],"tags":["product","tools"],"authors":["lzw"],"slug":"/27985","type":"blog"},"prevItem":{"title":"\u968f\u673a\u5bc6\u7801\u751f\u6210\u5668","permalink":"/docusaurus/blog/27986"},"nextItem":{"title":"\u901a\u8fc7JSON\u6570\u636e\u83b7\u53d6Keys","permalink":"/docusaurus/blog/27984"}},"content":"\x3c!--truncate--\x3e\\n\\n> \u8bf7\u8f93\u5165MD5\u660e\u6587\u5b57\u7b26\\n\\n``` html\\n\\n<div>\\n <el-input v-model=\\"str\\" placeholder=\\"\u8bf7\u8f93\u5165\u5185\u5bb9\\"></el-input>\\n <el-table\\n   stripe\\n   :data=\\"tableData\\"\\n   :show-header=\\"showHeader\\"\\n   style=\\"width: 100%\\">\\n   <el-table-column\\n     prop=\\"label\\"\\n     width=\\"150px\\"\\n   >\\n   </el-table-column>\\n   <el-table-column\\n     prop=\\"value\\"\\n   >\\n   </el-table-column>\\n </el-table>\\n</div>\\n\\n<script>\\nimport md5 from \'crypto-js/md5\';\\n\\nexport default {\\n  data() {\\n    return {\\n      showHeader:false,\\n      str:\'\',\\n      tableData: [{\\n        label: \'MD5\u660e\u6587\u5b57\u7b26\',\\n        value: \'\',\\n      }, {\\n        label: \'16\u4f4d \u5c0f\u5199\',\\n        value: \'\',\\n      }, {\\n        label: \'16\u4f4d \u5927\u5199\',\\n        value: \'\',\\n      }, {\\n        label: \'32\u4f4d \u5c0f\u5199\',\\n        value: \'\',\\n      }, {\\n        label: \'32\u4f4d \u5927\u5199\',\\n        value: \'\',\\n      }]\\n    }\\n  },\\n  watch: {\\n    str(newVal,oldVal) {\\n      const _newVal = newVal;\\n      const _md5Val = _newVal ? md5(_newVal).toString() : \'\';\\n\\n      this.tableData[0][\'value\'] = _newVal;\\n      this.tableData[1][\'value\'] = _md5Val.substring(8,24).toLowerCase();\\n      this.tableData[2][\'value\'] = _md5Val.substring(8,24).toUpperCase();\\n      this.tableData[3][\'value\'] = _md5Val.toLowerCase();\\n      this.tableData[4][\'value\'] = _md5Val.toUpperCase();\\n    }\\n  }\\n}\\n<\/script>\\n\\n```"},{"id":"/27984","metadata":{"permalink":"/docusaurus/blog/27984","editUrl":"https://github.com/lzwdot/docusaurus/blog/2021/08-14-27984.md","source":"@site/blog/2021/08-14-27984.md","title":"\u901a\u8fc7JSON\u6570\u636e\u83b7\u53d6Keys","description":"\u8bf7\u8f93\u5165\u6307\u5b9aJSON\u683c\u5f0f\u7684\u6570\u636e","date":"2021-08-14T15:56:47.000Z","formattedDate":"2021\u5e748\u670814\u65e5","tags":[{"label":"product","permalink":"/docusaurus/blog/tags/product"},{"label":"tools","permalink":"/docusaurus/blog/tags/tools"}],"readingTime":1.62,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u901a\u8fc7JSON\u6570\u636e\u83b7\u53d6Keys","ID":"27984","date":"2021-08-14 15:56:47","categories":["product","tools"],"tags":["product","tools"],"authors":["lzw"],"slug":"/27984","type":"blog"},"prevItem":{"title":"JS MD5\u52a0\u5bc6","permalink":"/docusaurus/blog/27985"},"nextItem":{"title":"Web Components \u5165\u95e8","permalink":"/docusaurus/blog/27982"}},"content":"\x3c!--truncate--\x3e\\n\\n> \u8bf7\u8f93\u5165\u6307\u5b9aJSON\u683c\u5f0f\u7684\u6570\u636e  \\n\\n```js\\n\\n<div>\\n  <textarea ref=\\"textarea\\" cols=\\"30\\" rows=\\"10\\" placeholder=\\"JSON \u6570\u636e\\"></textarea>\\n  <pre><code ref=\\"preCode\\"></code></pre>\\n</div>\\n\\n<script>\\n  import { ref,onMounted} from \'vue\'\\n  export default {\\n    setup() {\\n      const textarea = ref(null)\\n      const preCode = ref(null)\\n\\n      // \u9700\u8981\u5728\u751f\u547d\u5468\u671f\u83b7\u53d6\\n      onMounted(()=>{\\n        function isJson(str) {\\n          try {\\n            const json = JSON.parse(str)\\n            if (typeof json === \'object\' && json) {\\n              return true\\n            }\\n            return false\\n          } catch (e) {\\n            console.error(\'\u4e0d\u662fjson\u683c\u5f0f\u7684\u6570\u636e\')\\n            return false\\n          }\\n        }  \\n\\n        // \u5f53\u754c\u9762\u6302\u8f7d\u51fa\u6765\u540e\u5c31\u4f1a\u81ea\u52a8\u6267\u884c\\n        textarea.value.addEventListener(\'change\', function () {\\n          let data = textarea.value.value\\n\\n          if (!isJson(data)) return\\n          data = JSON.parse(data).data\\n\\n\\n          //\u6807\u9898\\n          const formTitle = data.title\\n          const formSet = data.form[0].set\\n\\n          console.log(formTitle, formSet)\\n\\n          let formSetCode = `// ${formTitle}\\\\n`\\n          formSetCode += `const FORM_KEY = \'${formSet[0].entityName}__\' \\\\n`\\n          formSetCode += \'const formKyes = {\\\\n\'\\n          for (let i = 0; i < formSet.length; i++) {\\n            if (formSet[i].alias) formSetCode += `   ${formSet[i].alias}:` + \' `${FORM_KEY}\' + `${formSet[i].alias}\\\\` , //${formSet[i].title}\\\\n`\\n          }\\n          formSetCode += \'} \\\\n\'\\n\\n          let tableSetCode = \'\'\\n\\n          for (let i = 0; i < formSet.length; i++) {\\n            if (formSet[i].typeSet.head) {\\n              let tableTitle = formSet[i].typeSet.head[0].title\\n              let tableSet = formSet[i].typeSet.head[0].set\\n\\n              console.log(tableTitle, tableSet)\\n\\n              tableSetCode += `// ${tableTitle} \\\\n`\\n              tableSetCode += `const tFORM_KEY_${tableSet[0].alias} = \'${tableSet[0].entityName}__\' \\\\n`\\n              tableSetCode += `const tFormKyes_${tableSet[0].alias} = { \\\\n`\\n              for (let i = 0; i < tableSet.length - 1; i++) {\\n                if (tableSet[i].alias) tableSetCode += `   ${tableSet[i].alias}:` + \' `${tFORM_KEY_\' + `${tableSet[0].alias}` + \'}\' + `${tableSet[i].alias}\\\\` , //${tableSet[i].title} \\\\n`\\n              }\\n              tableSetCode += \'} \\\\n\'\\n            }\\n          }\\n\\n          preCode.value.innerHTML = formSetCode + tableSetCode\\n        })\\n      })\\n      return {\\n        textarea,\\n        preCode\\n      }\\n    }\\n  }\\n<\/script>\\n\\n<style lang=\\"scss\\" scoped>\\ntextarea {\\n  width: 99%;\\n  max-height: 300px;\\n  resize: none;\\n}\\n\\npre {\\n  font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, monospace;\\n  padding: 16px;\\n  overflow: auto;\\n  font-size: 85%;\\n  line-height: 1.45;\\n  background-color: #f6f8fa;\\n  border-radius: 3px;\\n  white-space: pre-wrap;\\n\\n  code {\\n    color: #333;\\n  }\\n}\\n</style>\\n\\n```"},{"id":"/27982","metadata":{"permalink":"/docusaurus/blog/27982","editUrl":"https://github.com/lzwdot/docusaurus/blog/2021/07-16-27982.md","source":"@site/blog/2021/07-16-27982.md","title":"Web Components \u5165\u95e8","description":"","date":"2021-07-16T18:16:11.000Z","formattedDate":"2021\u5e747\u670816\u65e5","tags":[{"label":"program","permalink":"/docusaurus/blog/tags/program"},{"label":"web-components","permalink":"/docusaurus/blog/tags/web-components"}],"readingTime":1.855,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"Web Components \u5165\u95e8","ID":"27982","date":"2021-07-16 18:16:11","categories":["program","web-components"],"tags":["program","web-components"],"authors":["lzw"],"slug":"/27982","type":"blog"},"prevItem":{"title":"\u901a\u8fc7JSON\u6570\u636e\u83b7\u53d6Keys","permalink":"/docusaurus/blog/27984"},"nextItem":{"title":"Nginx \u57df\u540d\u5b50\u76ee\u5f55\u91cd\u5b9a\u5411\u5176\u4ed6\u76ee\u5f55","permalink":"/docusaurus/blog/24990"}},"content":"\x3c!--truncate--\x3e\\n\\n# Web Components \u793a\u4f8b\\n\\n\\n\\n\\n<HtmlDemo>\\n\\n\\n``` html\\n\x3c!-- \u81ea\u5b9a\u4e49\u7ec4\u4ef6\u4f7f\u7528 image,name,email \u7c7b\u4f3c vue \u7684\u503c\u7ed1\u5b9a --\x3e\\n<user-card \\nimage=\\"//semantic-ui.com/./images/avatar2/large/kristy.png\\" \\nname=\\"User Name\\"\\nemail=\\"yourmail@some-email.com\\">\\n</user-card>\\n\\n\x3c!-- \u7c7b\u4f3c vue template\u6a21\u677f --\x3e\\n<template id=\\"userCardTemplate\\">\\n    <img class=\\"image\\">\\n    <div class=\\"container\\">\\n        <p class=\\"name\\"></p>\\n        <p class=\\"email\\"></p>\\n        <button class=\\"button\\">Follow John</button>\\n    </div>\\n    \x3c!-- \u6837\u5f0f\u5199\u5728\u8fd9\u91cc\u9762\u53ef\u4ee5\u4fdd\u6301\u79c1\u6709 \u7c7b\u4f3c vue \u4e2d\u7684 scope --\x3e\\n    <style>\\n        :host {\\n            display: flex;\\n            align-items: center;\\n            width: 450px;\\n            height: 180px;\\n            background-color: #d4d4d4;\\n            border: 1px solid #d5d5d5;\\n            box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.1);\\n            border-radius: 3px;\\n            overflow: hidden;\\n            padding: 10px;\\n            box-sizing: border-box;\\n            font-family: \'Poppins\', sans-serif;\\n        }\\n\\n        .image {\\n            flex: 0 0 auto;\\n            width: 160px;\\n            height: 160px;\\n            vertical-align: middle;\\n            border-radius: 5px;\\n        }\\n\\n        .container {\\n            box-sizing: border-box;\\n            padding: 20px;\\n            height: 160px;\\n        }\\n\\n        .container>.name {\\n            font-size: 20px;\\n            font-weight: 600;\\n            line-height: 1;\\n            margin: 0;\\n            margin-bottom: 5px;\\n        }\\n\\n        .container>.email {\\n            font-size: 12px;\\n            opacity: 0.75;\\n            line-height: 1;\\n            margin: 0;\\n            margin-bottom: 15px;\\n        }\\n\\n        .container>.button {\\n            padding: 10px 25px;\\n            font-size: 12px;\\n            border-radius: 5px;\\n            text-transform: uppercase;\\n        }\\n    </style>\\n</template>\\n<script>\\n    class UserCard extends HTMLElement {\\n        constructor() {\\n            super()\\n\\n            // js \u4f20\u7edf\u5199\u6cd5    \\n            // var image = document.createElement(\'img\');\\n            // image.src = \'https://semantic-ui.com/./images/avatar2/large/kristy.png\';\\n            // image.classList.add(\'image\');\\n\\n            // var container = document.createElement(\'div\');\\n            // container.classList.add(\'container\');\\n\\n            // var name = document.createElement(\'p\');\\n            // name.classList.add(\'name\');\\n            // name.innerText = \'User Name\';\\n\\n            // var email = document.createElement(\'p\');\\n            // email.classList.add(\'email\');\\n            // email.innerText = \'yourmail@some-email.com\';\\n\\n            // var button = document.createElement(\'button\');\\n            // button.classList.add(\'button\');\\n            // button.innerText = \'Follow\';\\n\\n            // container.append(name, email, button);\\n            // this.append(image, container);\\n\\n            // shadow \u4e3b\u8981\u4fdd\u8bc1\u529f\u80fd\u6216\u8005\u6837\u5f0f\u7684\u79c1\u6709\uff0c\u800c\u4e0d\u7528\u62c5\u5fc3\u6c61\u67d3\u5176\u4ed6\u529f\u80fd\u6216\u8005\u6837\u5f0f\u3002\\n            const shadow = this.attachShadow({ mode: \'closed\' }); //\u4f7f\u7528 closed \u65e0\u6cd5\u901a\u8fc7this.shadowRoot\u83b7\u53d6\\n\\n            // \u83b7\u53d6 template\\n            const userCardTemplate = document.getElementById(\'userCardTemplate\')\\n\\n            // clone template \u5185\u5bb9 \u8fd9\u4e2a\u6a21\u677f\u53ef\u80fd\u8fd8\u8981\u7559\u7ed9\u5176\u4ed6\u5b9e\u4f8b\u4f7f\u7528\\n            const content = userCardTemplate.content.cloneNode(true)\\n\\n            // \u7c7b\u4f3c vue prop \u63a5\u6536\u503c\uff0c\u5e76\u8d4b\u503c\\n            content.querySelector(\'img\').setAttribute(\'src\', this.getAttribute(\'image\'));\\n            content.querySelector(\'.container>.name\').innerText = this.getAttribute(\'name\');\\n            content.querySelector(\'.container>.email\').innerText = this.getAttribute(\'email\');\\n\\n            // \u5185\u5bb9\u6dfb\u52a0\u5230 shadow dom \u4e2d\\n            shadow.appendChild(content)\\n        }\\n    }\\n\\n    // \u6ce8\u518c\u81ea\u5b9a\u4e49\u7ec4\u4ef6\\n    window.customElements.define(\'user-card\', UserCard)\\n<\/script>\\n```\\n\\n</HtmlDemo>"},{"id":"/24990","metadata":{"permalink":"/docusaurus/blog/24990","editUrl":"https://github.com/lzwdot/docusaurus/blog/2020/07-31-24990.md","source":"@site/blog/2020/07-31-24990.md","title":"Nginx \u57df\u540d\u5b50\u76ee\u5f55\u91cd\u5b9a\u5411\u5176\u4ed6\u76ee\u5f55","description":"\u4f8b\u5982\uff0cexample.org\u57df\u540d\u8fd0\u884c\u7684\u662f /var/www/top/public\u76ee\u5f55\u4e2d\u7684\u7a0b\u5e8f\uff0c\u73b0\u5728example.org/blog\u9700\u8981\u8fd0\u884c\u53e6\u4e00\u4e2a /var/www/nested/public \u76ee\u5f55\u4e0b\u7684\u7a0b\u5e8f\u3002\u90a3\u8be5\u600e\u4e48\u64cd\u4f5c\uff1f","date":"2020-07-31T17:34:22.000Z","formattedDate":"2020\u5e747\u670831\u65e5","tags":[{"label":"server","permalink":"/docusaurus/blog/tags/server"},{"label":"nginx","permalink":"/docusaurus/blog/tags/nginx"}],"readingTime":1.33,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"Nginx \u57df\u540d\u5b50\u76ee\u5f55\u91cd\u5b9a\u5411\u5176\u4ed6\u76ee\u5f55","ID":"24990","date":"2020-07-31 17:34:22","authors":["lzw"],"categories":["server","nginx"],"tags":["server","nginx"],"slug":"/24990","type":"blog"},"prevItem":{"title":"Web Components \u5165\u95e8","permalink":"/docusaurus/blog/27982"},"nextItem":{"title":"js \u6a21\u62df new \u8fd0\u7b97\u7b26\u5b9e\u73b0\u7684\u8fc7\u7a0b","permalink":"/docusaurus/blog/24976"}},"content":"\x3c!--truncate--\x3e\\n\\n\u4f8b\u5982\uff0c`example.org`\u57df\u540d\u8fd0\u884c\u7684\u662f `/var/www/top/public`\u76ee\u5f55\u4e2d\u7684\u7a0b\u5e8f\uff0c\u73b0\u5728`example.org/blog`\u9700\u8981\u8fd0\u884c\u53e6\u4e00\u4e2a `/var/www/nested/public` \u76ee\u5f55\u4e0b\u7684\u7a0b\u5e8f\u3002\u90a3\u8be5\u600e\u4e48\u64cd\u4f5c\uff1f\\n\\n\u4e4b\u524d\u6709\u4ecb\u7ecd\u8fc7\u7c7b\u4f3c\u7684\u201c\u5355\u57df\u540d\u4e0b\u8bbf\u95ee\u591a\u4e2alaravel \u9879\u76ee\u201d\\n\\n[https://lzwdot.github.io/docusaurus/blog/17121](https://lzwdot.github.io/docusaurus/blog/17121)\\n\\n\u4e0b\u9762\u4ecb\u7ecd Nginx \u4e0b\u7684\u53e6\u4e00\u79cd\u6bd4\u8f83\u597d\u7684\u65b9\u5f0f\uff0c\u8fd8\u662f\u4ee5 laravel \u5e94\u7528\u4e3a\u4f8b\uff0c\u76f4\u63a5\u4e0a\u914d\u7f6e\uff1a\\n\\n``` js \\nserver {\\n    listen 80 default_server;\\n    listen [::]:80 default_server;\\n    root /var/www/top/public;\\n    index index.html index.htm index.php;\\n    server_name _;\\n    location / {\\n        try_files $uri $uri/ /index.php$is_args$args;\\n    }\\n    location /nested {\\n        alias /var/www/nested/public;\\n        try_files $uri $uri/ @nested;\\n        location ~ .php$ {\\n            include snippets/fastcgi-php.conf;\\n            fastcgi_param SCRIPT_FILENAME $request_filename;\\n            fastcgi_pass unix:/var/run/php/php7.2-fpm.sock;\\n        }\\n    }\\n    location @nested {\\n        rewrite /nested/(.*)$ /nested/index.php?/$1 last;\\n    }\\n    location ~ .php$ {\\n        include snippets/fastcgi-php.conf;\\n        fastcgi_pass unix:/var/run/php/php7.2-fpm.sock;\\n    }\\n}\\n```\\n\\n\u914d\u7f6e\u4e0a\u540e\uff0c\u4e24\u4e2a laravel \u5e94\u7528\u90fd\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\u4e86\uff0c\u4f46\u53ef\u80fd\u51fa\u73b0\u8bbf\u95ee\u4e0d\u4e86 css \u7b49\u9759\u6001\u6587\u4ef6\uff0c\u6240\u4ee5\u9700\u8981\u6dfb\u52a0\u914d\u7f6e\uff1a\\n\\n``` js \\nlocation ~ .*.(gif|jpg|jpeg|png|bmp|swf)$\\n{\\n    expires      30d;\\n    error_log off;\\n    access_log /dev/null;\\n}\\nlocation ~ .*.(js|css)?$\\n{\\n    expires      12h;\\n    error_log off;\\n    access_log /dev/null;\\n}\\n```\\n\\n\u4e00\u5207OK\u4e86\uff0c\u611f\u89c9\u6bd4\u4e4b\u524d\u90a3\u4e2a\u65b9\u5f0f\u8981\u5b89\u5168\uff0c\u5c31\u662f\u914d\u7f6e\u4f1a\u6bd4\u8f83\u9ebb\u70e6\u70b9\uff0c\u6bcf\u6b21\u589e\u52a0\u4e00\u4e2a\u5e94\u7528\uff0c\u90fd\u9700\u8981\u914d\u7f6e\u4e00\u6b21\u3002\\n\\n\u53c2\u8003\uff1a[https://serversforhackers.com/c/nginx-php-in-subdirectory](https://serversforhackers.com/c/nginx-php-in-subdirectory)"},{"id":"/24976","metadata":{"permalink":"/docusaurus/blog/24976","editUrl":"https://github.com/lzwdot/docusaurus/blog/2020/07-17-24976.md","source":"@site/blog/2020/07-17-24976.md","title":"js \u6a21\u62df new \u8fd0\u7b97\u7b26\u5b9e\u73b0\u7684\u8fc7\u7a0b","description":"\u4eca\u5929\u6765\u804a\u4e00\u804a js \u7684 new \u8fd0\u7b97\u7b26\uff0c\u9996\u5148\u6211\u4eec\u6765\u770b\u4e00\u6bb5\u4ee3\u7801\uff1a","date":"2020-07-17T23:23:12.000Z","formattedDate":"2020\u5e747\u670817\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":1.41,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"js \u6a21\u62df new \u8fd0\u7b97\u7b26\u5b9e\u73b0\u7684\u8fc7\u7a0b","ID":"24976","date":"2020-07-17 23:23:12","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/24976","type":"blog"},"prevItem":{"title":"Nginx \u57df\u540d\u5b50\u76ee\u5f55\u91cd\u5b9a\u5411\u5176\u4ed6\u76ee\u5f55","permalink":"/docusaurus/blog/24990"},"nextItem":{"title":"\u5b9e\u73b0 js \u6570\u7ec4\u6241\u5e73\u5316\u53bb\u91cd\u5e76\u6392\u5e8f","permalink":"/docusaurus/blog/24954"}},"content":"\x3c!--truncate--\x3e\\n\\n\u4eca\u5929\u6765\u804a\u4e00\u804a js \u7684 `new` \u8fd0\u7b97\u7b26\uff0c\u9996\u5148\u6211\u4eec\u6765\u770b\u4e00\u6bb5\u4ee3\u7801\uff1a\\n\\n``` js \\nfunction Car(make, model, year) {\\n  this.make = make;\\n  this.model = model;\\n  this.year = year;\\n}\\nconst car1 = new Car(\'Eagle\', \'Talon TSi\', 1993);\\nconsole.log(car1.make);\\n```\\n\\n\u4ee5\u4e0a\u4f7f\u7528\u5230\u4e86 `new` \u5173\u952e\u5b57\uff0c\u90a3\u4e48 `new` \u5230\u5e95\u505a\u4e86\u4e9b\u4ec0\u4e48\u64cd\u4f5c\uff1f\\n\\n1. \u9996\u5148\uff0c`new` \u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u7b80\u5355JavaScript\u5bf9\u8c61\uff08\u5373`{}`\uff09\\n2. \u63a5\u7740\uff0c\u94fe\u63a5\u8be5\u5bf9\u8c61\uff08\u5373\u8bbe\u7f6e\u8be5\u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570\uff09\u5230\u53e6\u4e00\u4e2a\u5bf9\u8c61\\n3. \u7136\u540e\uff0c\u5c06\u6b65\u9aa41\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\u4f5c\u4e3a`this`\u7684\u4e0a\u4e0b\u6587\\n4. \u6700\u540e\uff0c\u5982\u679c\u8be5\u51fd\u6570\u6ca1\u6709\u8fd4\u56de\u5bf9\u8c61\uff0c\u5219\u8fd4\u56de`this`\\n\\n\u65e2\u7136\u6211\u4eec\u77e5\u9053\u4e86`new`\u90fd\u505a\u4e86\u4e9b\u4ec0\u4e48\uff0c\u4e0b\u9762\u6211\u4eec\u81ea\u5df1\u6765\u6a21\u62df\u4e0b\u64cd\u4f5c\u8fc7\u7a0b\uff1a\\n\\n``` js \\nfunction jsNew(obj, ...args) {\\n    //1\u3001\u521b\u5efa\u7a7a\u5bf9\u8c61\\n    let o = {}\\n    //2\u3001\u7a7a\u5bf9\u8c61\u539f\u578b\u6307\u5411\u6784\u9020\u51fd\u6570obj\u7684prototype\\n    o.__proto__ = obj.prototype\\n    // let o = Object.create(obj.prototype)\\n    //3\u3001\u5c06obj\u7684this\u6307\u5411\u7a7a\u5bf9\u8c61o\\n    let res = obj.apply(o, args)\\n    //4\u3001\u8be5\u51fd\u6570\u6ca1\u6709\u8fd4\u56de\u5bf9\u8c61\uff0c\u5219\u8fd4\u56dethis\\n    return typeof res === \'object\' ? res : o\\n}\\nconst car2 = jsNew(Car,\'Eagle\', \'Talon TSi\', 1993);\\nconsole.log(car2.make);\\n```\\n\\n\u53ef\u4ee5\u6d4b\u8bd5\u4e0b\uff0c\u4ee5\u4e0a\u4e24\u4e2a\u6267\u884c\u7684\u7ed3\u679c\u90fd\u662f\uff1a\\"Eagle\\""},{"id":"/24954","metadata":{"permalink":"/docusaurus/blog/24954","editUrl":"https://github.com/lzwdot/docusaurus/blog/2020/07-14-24954.md","source":"@site/blog/2020/07-14-24954.md","title":"\u5b9e\u73b0 js \u6570\u7ec4\u6241\u5e73\u5316\u53bb\u91cd\u5e76\u6392\u5e8f","description":"\u6570\u7ec4\u6241\u5e73\u5316\uff0c\u4e2a\u4eba\u7406\u89e3\u5c31\u662f\u591a\u7ef4\u6570\u7ec4\u8f6c\u4e3a\u4e00\u7ef4\u6570\u7ec4\uff0c\u53ef\u4ee5\u4e86\u89e3\u4e0b Array.prototype.flat() \u65b9\u6cd5\u3002\u4e0b\u9762\u5b9e\u73b0\u8fd9\u6837\u4e00\u4e2a\u9700\u6c42","date":"2020-07-14T15:43:29.000Z","formattedDate":"2020\u5e747\u670814\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":1.295,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u5b9e\u73b0 js \u6570\u7ec4\u6241\u5e73\u5316\u53bb\u91cd\u5e76\u6392\u5e8f","ID":"24954","date":"2020-07-14 15:43:29","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/24954","type":"blog"},"prevItem":{"title":"js \u6a21\u62df new \u8fd0\u7b97\u7b26\u5b9e\u73b0\u7684\u8fc7\u7a0b","permalink":"/docusaurus/blog/24976"},"nextItem":{"title":"\u4e86\u89e3 npm install -S -D -g \u7684\u7528\u6cd5","permalink":"/docusaurus/blog/24948"}},"content":"\x3c!--truncate--\x3e\\n\\n\u6570\u7ec4\u6241\u5e73\u5316\uff0c\u4e2a\u4eba\u7406\u89e3\u5c31\u662f\u591a\u7ef4\u6570\u7ec4\u8f6c\u4e3a\u4e00\u7ef4\u6570\u7ec4\uff0c\u53ef\u4ee5\u4e86\u89e3\u4e0b `Array.prototype.flat()` \u65b9\u6cd5\u3002\u4e0b\u9762\u5b9e\u73b0\u8fd9\u6837\u4e00\u4e2a\u9700\u6c42\\n\\n> let\xa0arr\xa0=\xa0\\\\[1,2,\\\\[1,2,9,8,7\\\\],\\\\[5,4\\\\],6\\\\]\xa0\xa0\xa0\xa0\xa0\\n> \\n> //\u8f93\u51fa\\\\[ 9, 8, 7, 6, 5, 4, 2, 1 \\\\]\\n\\n1\u3001\u6bd4\u8f83\u4f20\u7edf\u4e00\u70b9\u7684\u65b9\u6cd5\u5b9e\u73b0\uff0c\u6bd4\u5982\u51fd\u6570\\n\\n``` js \\nlet queueArr = [];\\n! function flat(arr) { //\u6241\u5e73\u5316\\n    for (let i = 0; i < arr.length; i++) {\\n        if (Array.isArray(arr[i])) {\\n            flat(arr[i])\\n        } else if (queueArr.indexOf(arr[i]) < 0) {\\n            queueArr.push(arr[i])\\n        }\\n    }\\n}(arr)\\n! function sort(arr) { //\u6392\u5e8f\\n    for (var i = arr.length - 1; i > 0; i--) {\\n        for (var j = 0; j < i; j++) {\\n            if (arr[j] > arr[j + 1]) {\\n                [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];\\n            }\\n        }\\n    }\\n    queueArr = arr\\n}(queueArr)\\nconsole.log(queueArr)\\n```\\n\\n\u4e0a\u9762\u7684\u4ee3\u7801\u76f8\u5bf9\u6bd4\u8f83\u591a\uff0c\u4f46\u5bb9\u6613\u770b\u61c2\\n\\n2\u3001\u4e0b\u9762\u4f7f\u7528 es6 \u7684\u65b0\u7279\u5f81\uff0c\u5feb\u901f\u5b8c\u6210\u9700\u6c42\\n\\n``` js \\nlet flatArr = [];\\nflatArr = arr.flat() //\u6241\u5e73\u5316\\nflatArr = new Set(flatArr) //\u53bb\u91cd\u590d\\nflatArr = Array.from(flatArr).sort((a, b) => { //\u6392\u5e8f\\n    return a - b;\\n})\\nconsole.log(flatArr);\\n```\\n\\n\u611f\u89c9 es6 \u65b0\u7279\u6027\u975e\u5e38\u591a\uff0c\u4f46\u65b9\u4fbf\u4e86\u4ee3\u7801\\n\\n3\u3001\u8fd8\u6709\u4e00\u53e5\u4ee3\u7801\u641e\u5b9a\u7684\\n\\n``` js \\nconsole.log(Array.from(new Set(arr.toString().split(\',\').sort())))\\n```"},{"id":"/24948","metadata":{"permalink":"/docusaurus/blog/24948","editUrl":"https://github.com/lzwdot/docusaurus/blog/2020/07-08-24948.md","source":"@site/blog/2020/07-08-24948.md","title":"\u4e86\u89e3 npm install -S -D -g \u7684\u7528\u6cd5","description":"\u5f53\u5b89\u88c5\u63d2\u4ef6\u914d\u7f6e\u5230 package.json \u6587\u4ef6\u65f6\uff0c\u4e86\u89e3 npm install -S -D -g \u7684\u7528\u6cd5\u533a\u522b","date":"2020-07-08T18:18:57.000Z","formattedDate":"2020\u5e747\u67088\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":0.925,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u4e86\u89e3 npm install -S -D -g \u7684\u7528\u6cd5","ID":"24948","date":"2020-07-08 18:18:57","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/24948","type":"blog"},"prevItem":{"title":"\u5b9e\u73b0 js \u6570\u7ec4\u6241\u5e73\u5316\u53bb\u91cd\u5e76\u6392\u5e8f","permalink":"/docusaurus/blog/24954"},"nextItem":{"title":"\u7b80\u5355\u7406\u89e3 vue.js \u6570\u636e\u53cc\u5411\u7ed1\u5b9a\u7684\u539f\u7406","permalink":"/docusaurus/blog/24942"}},"content":"\x3c!--truncate--\x3e\\n\\n\u5f53\u5b89\u88c5\u63d2\u4ef6\u914d\u7f6e\u5230 `package.json` \u6587\u4ef6\u65f6\uff0c\u4e86\u89e3 npm install -S -D -g \u7684\u7528\u6cd5\u533a\u522b\\n\\n\\\\--\u4fdd\u5b58\u5230 dependencies\\n\\n`npm install module_name -S`\xa0 \xa0 \u5373\xa0 \xa0 `npm install module_name --save`\xa0 \xa0\\n\\n\\\\--\u4fdd\u5b58\u5230 devDependencies\\n\\n`npm install module_name -D\xa0` \xa0 \u5373\xa0 \xa0 `npm install module_name --save-dev`\\n\\n\u6a21\u5757\u5b89\u88c5\u4f4d\u7f6e\\n\\n- `npm install module_name -g` \u5168\u5c40\u5b89\u88c5(\u547d\u4ee4\u884c\u4f7f\u7528)\\n- `npm install module_name` \u672c\u5730\u5b89\u88c5(\u5c06\u5b89\u88c5\u5305\u653e\u5728 ./node\\\\_modules \u4e0b)\\n\\n`dependencies` \u4e0e `devDependencies` \u6709\u4ec0\u4e48\u533a\u522b\u5462\uff1f\\n\\n`dependencies` \u7684\u63d2\u4ef6\u9700\u8981\u53d1\u5e03\u5230\u751f\u4ea7\u73af\u5883\u4e2d\\n\\n`devDependencies` \u4e2d\u7684\u63d2\u4ef6\u53ea\u5728\u5f00\u53d1\u73af\u5883\u4e0b\u4f7f\u7528\\n\\n\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u4f7f\u7528 weui \u7ec4\u4ef6\u65f6\uff0c\u56e0\u4e3a\u8981\u7528\u5230\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u5e94\u5199\u5165\u5230 `dependencies` \u4e2d\uff1b\u800c\u4f7f\u7528 eslint \u63d2\u4ef6\u53ea\u662f\u7528\u6765\u5f00\u53d1\u65f6\u8c03\u8bd5\u4ee3\u7801\uff0c\u5e94\u5199\u5165\u5230 `devDependencies` \u4e2d\u3002\u4f60\u7684\u660e\u767d\u4e86\u5417\uff1f"},{"id":"/24942","metadata":{"permalink":"/docusaurus/blog/24942","editUrl":"https://github.com/lzwdot/docusaurus/blog/2020/07-08-24942.md","source":"@site/blog/2020/07-08-24942.md","title":"\u7b80\u5355\u7406\u89e3 vue.js \u6570\u636e\u53cc\u5411\u7ed1\u5b9a\u7684\u539f\u7406","description":"\u804a\u5230 vue.js \u6570\u636e\u53cc\u5411\u7ed1\u5b9a\uff0c\u5c31\u4e0d\u5f97\u4e0d\u63d0 Object.defineProperty \u65b9\u6cd5\uff0c\u5b83\u662f\u5b9e\u73b0\u6570\u636e\u53cc\u5411\u7ed1\u5b9a\u539f\u7406\u6240\u5728\u3002\u5148\u4e0a\u4ee3\u7801\u518d\u89e3\u91ca","date":"2020-07-08T12:57:58.000Z","formattedDate":"2020\u5e747\u67088\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":1.12,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u7b80\u5355\u7406\u89e3 vue.js \u6570\u636e\u53cc\u5411\u7ed1\u5b9a\u7684\u539f\u7406","ID":"24942","date":"2020-07-08 12:57:58","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/24942","type":"blog"},"prevItem":{"title":"\u4e86\u89e3 npm install -S -D -g \u7684\u7528\u6cd5","permalink":"/docusaurus/blog/24948"},"nextItem":{"title":"\u5b9e\u73b0\u7c7b\u4f3c vue.js \u6a21\u677f\u5b57\u7b26\u4e32\u66ff\u6362","permalink":"/docusaurus/blog/24935"}},"content":"\x3c!--truncate--\x3e\\n\\n\u804a\u5230 vue.js \u6570\u636e\u53cc\u5411\u7ed1\u5b9a\uff0c\u5c31\u4e0d\u5f97\u4e0d\u63d0 `Object.defineProperty` \u65b9\u6cd5\uff0c\u5b83\u662f\u5b9e\u73b0\u6570\u636e\u53cc\u5411\u7ed1\u5b9a\u539f\u7406\u6240\u5728\u3002\u5148\u4e0a\u4ee3\u7801\u518d\u89e3\u91ca\\n\\n``` js \\n<div id=\\"view\\">view\u5c42</div>\\n<input id=\\"model\\" type=\\"text\\" value=\\"model\u5c42\\">\\n<script>\\n    //\u5355\u5411\u7ed1\u5b9a\\n    document.getElementById(\'model\').onkeyup = function(e){\\n        document.getElementById(\'view\').innerHTML = e.target.value\\n    }\\n    var obj = {}\\n    Object.defineProperty(obj,\'propertyName\',{\\n        get:function(){\\n            return obj\\n        },\\n        set:function(newVal){\\n            document.getElementById(\'view\').innerHTML = newVal\\n            document.getElementById(\'model\').value = newVal\\n        }\\n    })\\n    //\u53cc\u5411\u7ed1\u5b9a\\n    setTimeout(function(){\\n        obj.propertyName = \'\u6d4b\u8bd5\u6570\u636e\'\\n    },3000)\\n<\/script>\\n```\\n\\n\u4ee5\u4e0a\u6709\u4e24\u4e2a\u5206\u522b\u6a21\u62df view \u5c42\u548c model \u5c42\u7684 dom \u5143\u7d20\\n\\n``` js \\n<div id=\\"view\\">view\u5c42</div>\\n<input id=\\"model\\" type=\\"text\\" value=\\"model\u5c42\\">\\n```\\n\\n\u5bf9\u4e8e\u5355\u5411\u7ed1\u5b9a\uff0c\u901a\u8fc7 js \u4e8b\u4ef6\u4e5f\u53ef\u4ee5\u5b9e\u73b0\uff0c\u5982\u4ee5\u4e0a\u4ee3\u7801\u4e2d\u7684 onkeyup \u4e8b\u60c5\uff0c\u5c31\u5b9e\u73b0\u4e86 `model->view` \u7684\u7ed1\u5b9a\\n\\n\u90a3\u4e48\u53cc\u5411\u7ed1\u5b9a\u5373\uff1a `model<->view` \u7684\u7ed1\u5b9a\uff0c\u5c31\u9700\u8981 `Object.defineProperty` \u6765\u5b9e\u73b0\uff0c\u4f8b\u5982\u6d4b\u8bd5\u4ee3\u7801\uff1a\\n\\n``` js \\nsetTimeout(function(){\\n    obj.propertyName = \'\u6d4b\u8bd5\u6570\u636e\'\\n},3000)\\n```\\n\\n3\u79d2\u540e\u6267\u884c view \u548c model \u7684\u503c\u90fd\u4e3a \'\u6d4b\u8bd5\u6570\u636e\'\uff0c\u8fd9\u6837\u5c31\u7b80\u5355\u6a21\u62df\u4e86 vue.js \u6570\u636e\u53cc\u5411\u7ed1\u5b9a"},{"id":"/24935","metadata":{"permalink":"/docusaurus/blog/24935","editUrl":"https://github.com/lzwdot/docusaurus/blog/2020/07-07-24935.md","source":"@site/blog/2020/07-07-24935.md","title":"\u5b9e\u73b0\u7c7b\u4f3c vue.js \u6a21\u677f\u5b57\u7b26\u4e32\u66ff\u6362","description":"\u5b9e\u73b0\u4e00\u4e2a render(template, context) \u65b9\u6cd5\uff0c\u5c06 \u4ee5{{}} \u5305\u62ec\u7684\u53d8\u91cf\u66ff\u6362","date":"2020-07-07T13:03:37.000Z","formattedDate":"2020\u5e747\u67087\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":0.25,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u5b9e\u73b0\u7c7b\u4f3c vue.js \u6a21\u677f\u5b57\u7b26\u4e32\u66ff\u6362","ID":"24935","date":"2020-07-07 13:03:37","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/24935","type":"blog"},"prevItem":{"title":"\u7b80\u5355\u7406\u89e3 vue.js \u6570\u636e\u53cc\u5411\u7ed1\u5b9a\u7684\u539f\u7406","permalink":"/docusaurus/blog/24942"},"nextItem":{"title":"Jmeter\u6dfb\u52a0TPS\u7b49\u56fe\u5f62\u5316\u76d1\u63a7","permalink":"/docusaurus/blog/24597"}},"content":"\x3c!--truncate--\x3e\\n\\n\u5b9e\u73b0\u4e00\u4e2a `render(template, context)` \u65b9\u6cd5\uff0c\u5c06 \u4ee5`{{}}` \u5305\u62ec\u7684\u53d8\u91cf\u66ff\u6362\\n\\n``` js \\nvar template =\\"\u6211\u53eb{{name}}\uff0c\u4eca\u5e74{{age}}\u5c81\\"\\nvar context = {name:\'bob\',age:29}\\nfunction render(template,context){\\n    return template.replace(/{{(.*?)}}/g,(match,key)=>context[key.trim()]);\\n}\\nconsole.log(render(template,context))\\n```\\n\\n> \u7ed3\u679c\uff1a\u6211\u53ebbob\uff0c\u4eca\u5e7429\u5c81"},{"id":"/24597","metadata":{"permalink":"/docusaurus/blog/24597","editUrl":"https://github.com/lzwdot/docusaurus/blog/2020/04-10-24597.md","source":"@site/blog/2020/04-10-24597.md","title":"Jmeter\u6dfb\u52a0TPS\u7b49\u56fe\u5f62\u5316\u76d1\u63a7","description":"\u4e0b\u8f7d\u5730\u5740\uff1ahttps://jmeter-plugins.org/downloads/old/","date":"2020-04-10T14:54:08.000Z","formattedDate":"2020\u5e744\u670810\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"notes","permalink":"/docusaurus/blog/tags/notes"}],"readingTime":0.135,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"Jmeter\u6dfb\u52a0TPS\u7b49\u56fe\u5f62\u5316\u76d1\u63a7","ID":"24597","date":"2020-04-10 14:54:08","categories":["posts","notes"],"tags":["posts","notes"],"authors":["lzw"],"slug":"/24597","type":"blog"},"prevItem":{"title":"\u5b9e\u73b0\u7c7b\u4f3c vue.js \u6a21\u677f\u5b57\u7b26\u4e32\u66ff\u6362","permalink":"/docusaurus/blog/24935"},"nextItem":{"title":"\u591a\u53f0\u670d\u52a1\u5668\u4f7f\u7528 rsync \u540c\u6b65\u4ee3\u7801","permalink":"/docusaurus/blog/24486"}},"content":"\x3c!--truncate--\x3e\\n\\n\u4e0b\u8f7d\u5730\u5740\uff1a[https://jmeter-plugins.org/downloads/old/](https://jmeter-plugins.org/downloads/old/)\\n\\n\u5b89\u88c5\u4f7f\u7528\u53c2\u8003\uff1a[https://www.jianshu.com/p/0e6bf15b3ffa?utm\\\\_campaign](https://www.jianshu.com/p/0e6bf15b3ffa?utm_campaign)\\n\\n\u901a\u8fc7 jp@gc - Composite Graph \u53ef\u4ee5\u628a\u76d1\u63a7\u56fe\u5408\u6210"},{"id":"/24486","metadata":{"permalink":"/docusaurus/blog/24486","editUrl":"https://github.com/lzwdot/docusaurus/blog/2020/03-08-24486.md","source":"@site/blog/2020/03-08-24486.md","title":"\u591a\u53f0\u670d\u52a1\u5668\u4f7f\u7528 rsync \u540c\u6b65\u4ee3\u7801","description":"\u5f53\u591a\u53f0\u670d\u52a1\u5668\u4f7f\u7528\u8d1f\u8f7d\u5747\u8861\u7b49\u89e3\u51b3\u65b9\u6848\u65f6\uff0c\u5404\u670d\u52a1\u5668\u4ee3\u7801\u540c\u6b65\u53c8\u662f\u53e6\u4e00\u4e2a\u95ee\u9898\uff0c\u8fd9\u65f6\u4f7f\u7528 rsync \u662f\u4e00\u4e2a\u5e38\u7528\u7684\u65b9\u6848\u3002\u8fd9\u91cc\u4ee5\u4e24\u53f0\u670d\u52a1\u5668\u4e3a\u4f8b","date":"2020-03-08T21:33:20.000Z","formattedDate":"2020\u5e743\u67088\u65e5","tags":[{"label":"server","permalink":"/docusaurus/blog/tags/server"},{"label":"linux","permalink":"/docusaurus/blog/tags/linux"}],"readingTime":3.495,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u591a\u53f0\u670d\u52a1\u5668\u4f7f\u7528 rsync \u540c\u6b65\u4ee3\u7801","ID":"24486","date":"2020-03-08 21:33:20","categories":["server","linux"],"tags":["server","linux"],"authors":["lzw"],"slug":"/24486","type":"blog"},"prevItem":{"title":"Jmeter\u6dfb\u52a0TPS\u7b49\u56fe\u5f62\u5316\u76d1\u63a7","permalink":"/docusaurus/blog/24597"},"nextItem":{"title":"\u5b9d\u5854 ecs \u914d\u7f6e\u8d1f\u8f7d\u5747\u8861 slb \u7684\u95ee\u9898","permalink":"/docusaurus/blog/24469"}},"content":"\x3c!--truncate--\x3e\\n\\n\u5f53\u591a\u53f0\u670d\u52a1\u5668\u4f7f\u7528\u8d1f\u8f7d\u5747\u8861\u7b49\u89e3\u51b3\u65b9\u6848\u65f6\uff0c\u5404\u670d\u52a1\u5668\u4ee3\u7801\u540c\u6b65\u53c8\u662f\u53e6\u4e00\u4e2a\u95ee\u9898\uff0c\u8fd9\u65f6\u4f7f\u7528 rsync \u662f\u4e00\u4e2a\u5e38\u7528\u7684\u65b9\u6848\u3002\u8fd9\u91cc\u4ee5\u4e24\u53f0\u670d\u52a1\u5668\u4e3a\u4f8b\\n\\n> \u4e3b\u670d\u52a1\u5668 A \uff1a192.168.0.2\\n> \\n> \u8f85\u670d\u52a1\u5668 B \uff1a192.168.0.3\\n\\n## \u5b89\u88c5\u914d\u7f6e rsync\\n\\n\u5b89\u88c5 rsync \u5e76\u67e5\u770b\u7248\u672c\u4fe1\u606f\\n\\n``` js \\nyum install rsync\\nrsync -version \\n```\\n\\n\u542f\u52a8\u548c\u505c\u6b62 rsync\\n\\n``` js \\n/usr/bin/rsync --daemon --config=/etc/rsyncd.conf\\nps -ef|grep rsync\\nkill 12521\\n```\\n\\n**\u914d\u7f6e\u4e3b\u670d\u52a1\u5668 A**\uff0c \u9996\u5148\u7b80\u5355\u914d\u7f6e\u4e0b rsync\uff0c\u4f7f\u7528\u547d\u4ee4 `vi\xa0 /etc/rsyncd.conf`\\n\\n``` js \\n#\u8fd0\u884crsync\u5b88\u62a4\u8fdb\u7a0b\u7528\u6237\u548c\u7ec4\\nuid = nobody\\ngid = nobody\\n #\u5141\u8bb8\u6700\u5927\u8fde\u63a5\u6570 \u5c31\u662f\u9884\u5e8f\u591a\u5c11\u53f0\u670d\u52a1\u5668\u94fe\u63a5\\nmax connections = 4\\n#\u53ea\u8bfb\u6a21\u5f0f\\nread only = true\\n#\u9884\u5e8f\u94fe\u63a5\u7684ip \u591a\u4e2a\u7528\u9017\u53f7\u9694\u5f00\\n#hosts allow = 202.207.177.180\\n# \u73b0\u5728\u662f\u5141\u8bb8\u6240\u6709\u7684\u670d\u52a1\u5668\u90fd\u80fd\u8fde\\nhosts allow = *\\ntransfer logging = true\\nlog format = %h %o %f %l %b\\n#\u65e5\u5fd7\u6587\u4ef6\\nlog file = /var/log/rsyncd.log\\nslp refresh = 300\\n#\u8fdb\u7a0b\u6587\u4ef6\u4f4d\u7f6e\\npid file = /var/run/rsyncd.pid\\nlock file = /var/run/rsyncd.lock\\n[test]\\n#A\u670d\u52a1\u5668\u9700\u8981\u505a\u955c\u50cf\u7684\u76ee\u5f55\\npath = /www/wwwroot/test\\nread only = false\\n#\u5141\u8bb8\u7684\u8ba4\u8bc1\u7528\u6237\\nauth users = root\\n#\u5bc6\u7801\u6587\u4ef6\u4f4d\u7f6e\\nsecrets file = /etc/rsyncd.password\\n```\\n\\n> \u6ce8\u610f\uff1a\u6ce8\u91ca\u201c#\u201d\u4e0d\u80fd\u653e\u5728\u914d\u7f6e\u9879\u7684\u540e\u9762\uff0c\u9519\u8bef\u793a\u4f8b \u201c `secrets file = /etc/rsyncd.password #\u5bc6\u7801\u6587\u4ef6\u4f4d\u7f6e` \u201d\\n\\n\u63a5\u7740\u8bbe\u7f6e\u4e0a\u9762\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u5bc6\u7801\u6587\u4ef6 `vim rsyncd.password` \u6dfb\u52a0\u3010user:password\u3011\u683c\u5f0f\u7684\u5185\u5bb9\u5982\uff1a`root:123456`\uff0c_\u5e76\u8bbe\u7f6e 600 \u6743\u9650\uff0c\u8fd9\u70b9\u975e\u5e38\u91cd\u8981_\\n\\n``` js \\nchmod -R 600 rsyncd.password\\n```\\n\\n**\u914d\u7f6e\u8f85\u670d\u52a1\u5668 B**\uff0c\u8fd9\u91cc\u53ea\u9700\u8981\u6dfb\u52a0\u5bc6\u7801\u6587\u4ef6 `vim rsyncd.password` \u6dfb\u52a0\u3010password\u3011\u683c\u5f0f\u7684\u5185\u5bb9\u5982\uff1a`123456`\\n\\n**\u6dfb\u52a0\u5f00\u673a\u542f\u52a8**\uff0c\u9632\u6b62\u670d\u52a1\u5668\u91cd\u542f\u6216\u8005\u5b95\u673a\u4fee\u590d\u597d\u4e4b\u540e\uff0c\u9700\u8981\u624b\u52a8\u91cd\u542f\u670d\u52a1\\n\\n``` js \\nvi /etc/rc.local\\n/usr/bin/rsync --daemon --config=/ect/rsyncd.conf   #\u5f00\u673a\u81ea\u52a8\u8fd0\u884c\\n```\\n\\n## \u4ee3\u7801\u540c\u6b65\\n\\n\u914d\u7f6e\u597d\u4e86 rsync\uff0c\u73b0\u5728\u5c31\u6765\u5b9e\u73b0\u670d\u52a1\u5668 B \u4ece\u670d\u52a1\u5668 A \u540c\u6b65\u4ee3\u7801\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\\n\\n``` js \\nrsync -vzrtopg --progress root@192.168.0.2::test /www/wwwroot/test --password-file=/etc/rsyncd.password\\n```\\n\\n> `root` \u5bf9\u5e94\u670d\u52a1\u5668 A \u914d\u7f6e\u6587\u4ef6 rsyncd.conf \u4e2d\u7684 auth users = root\\n> \\n> `192.168.0.2` \u5e94\u670d\u52a1\u5668 A \u7684 ip\\n> \\n> `test` \u5bf9\u5e94\u670d\u52a1\u5668 A \u914d\u7f6e\u6587\u4ef6 rsyncd.conf \u4e2d\u7684 \\\\[test\\\\]\\n> \\n> `/www/wwwroot/test` \u662f\u670d\u52a1\u5668 B \u5b58\u653e\u540c\u6b65\u4ee3\u7801\u7684\u76ee\u5f55\\n> \\n> `/etc/rsyncd.password` \u662f\u670d\u52a1\u5668 B \u7684\u5bc6\u7801\u6587\u4ef6\\n\\n\u4ee5\u4e0a\u547d\u4ee4\u6267\u884c\u4e00\u6b21\uff0c\u540c\u6b65\u4e00\u6b21\uff0c\u9700\u8981\u7528\u5230 crontab \u8ba1\u5212\u4efb\u52a1\u6765\u505a\u5230\u5b9e\u65f6\u540c\u6b65\uff0c\u65b0\u5efa shell \u811a\u672c `vim /root/rsyncd.sh`\\n\\n``` js \\n#!/bin/bash\\nPATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin\\nexport PATH\\n#\u95f4\u9694\u7684\u79d2\u6570\uff0c\u4e0d\u80fd\u5927\u4e8e60\\nstep=1\\nfor (( i = 0; i < 60; i=(i+step) )); do\\n    $(rsync -vzrtopg --progress root@192.168.0.2::test /www/wwwroot/test --password-file=/etc/rsyncd.password)\\n    sleep $step\\ndone\\nexit 0\\n```\\n\\n\u7136\u540e\u5728\u670d\u52a1\u5668 B \u6dfb\u52a0\xa0 crontab \u5b9a\u65f6\u4efb\u52a1\uff0c \u6267\u884c `crontab -e`\\n\\n``` js \\n* * * * * sh /root/rsyncd.sh > /dev/null 2>&1\\n```\\n\\nOK\uff0c\u5927\u529f\u544a\u6210\uff0c\u8d76\u7d27\u53bb\u8bd5\u8bd5\u5427\uff01\\n\\n\u53c2\u8003\uff1a [https://blog.csdn.net/oljuydfcg/article/details/91639416](https://blog.csdn.net/oljuydfcg/article/details/91639416)"},{"id":"/24469","metadata":{"permalink":"/docusaurus/blog/24469","editUrl":"https://github.com/lzwdot/docusaurus/blog/2020/03-06-24469.md","source":"@site/blog/2020/03-06-24469.md","title":"\u5b9d\u5854 ecs \u914d\u7f6e\u8d1f\u8f7d\u5747\u8861 slb \u7684\u95ee\u9898","description":"\u5728\u914d\u7f6e slb \u5065\u5eb7\u68c0\u67e5\u975e\u5e38\u91cd\u8981\uff0c\u5982\u679c\u51fa\u73b0\u4ee5\u4e0b\u60c5\u51b5","date":"2020-03-06T14:10:18.000Z","formattedDate":"2020\u5e743\u67086\u65e5","tags":[{"label":"server","permalink":"/docusaurus/blog/tags/server"},{"label":"linux","permalink":"/docusaurus/blog/tags/linux"}],"readingTime":2.985,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u5b9d\u5854 ecs \u914d\u7f6e\u8d1f\u8f7d\u5747\u8861 slb \u7684\u95ee\u9898","ID":"24469","date":"2020-03-06 14:10:18","categories":["server","linux"],"tags":["server","linux"],"authors":["lzw"],"slug":"/24469","type":"blog"},"prevItem":{"title":"\u591a\u53f0\u670d\u52a1\u5668\u4f7f\u7528 rsync \u540c\u6b65\u4ee3\u7801","permalink":"/docusaurus/blog/24486"},"nextItem":{"title":"crypto-js\u4e0ephp\u901a\u8fc7aes\u52a0\u5bc6\u4f20\u8f93","permalink":"/docusaurus/blog/24382"}},"content":"\x3c!--truncate--\x3e\\n\\n\u5728\u914d\u7f6e slb \u5065\u5eb7\u68c0\u67e5\u975e\u5e38\u91cd\u8981\uff0c\u5982\u679c\u51fa\u73b0\u4ee5\u4e0b\u60c5\u51b5\\n\\n> \u4e0b\u8ff0\u539f\u56e0\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5065\u5eb7\u68c0\u67e5\u5f02\u5e38\uff1a  \\n> iptables \u9632\u706b\u5899\u914d\u7f6e\u5f00\u542f  \\n> \u540e\u7aef http \u63a2\u6d4b\u7801401\u3001403\u4e0e\u914d\u7f6e\u4e0d\u5339\u914d\\n\\n**1\u3001\u5173\u95ed iptables\u670d\u52a1**\uff0c centOS 7 \u9ed8\u8ba4\u7528\u7684\u662f firewalld\uff0c\u4e5f\u662f\u57fa\u4e8e iptables \u7684\uff0c\u4f46 iptables \u670d\u52a1\u662f\u6ca1\u5b89\u88c5\u7684\\n\\n``` js \\n#\u5f00\u542f\u9632\u706b\u5899\uff0c\u5e76\u542f\u7528\u8fd9\u4e2a\u670d\u52a1\\nsudo systemctl enable firewalld.service\\nsudo systemctl start firewalld.service\\n#\u505c\u6b62\u9632\u706b\u5899\uff0c\u5e76\u7981\u7528\u8fd9\u4e2a\u670d\u52a1\\nsudo systemctl stop firewalld.service\\nsudo systemctl disable firewalld.service\\n```\\n\\n\u5982\u679c\u60f3\u5728 centOS 7 \u6539\u7528 iptables \u7684\u8bdd\uff0c\u9700\u8981\u5b89\u88c5 iptables \u670d\u52a1\\n\\n``` js \\n#\u5b89\u88c5\\nsudo yum install iptables-services\\n#\u5f00\u542fiptables\\nsudo systemctl enable iptables\\nsudo systemctl enable ip6tables\\n#\u542f\u52a8\u670d\u52a1\\nsudo systemctl start iptables\\nsudo systemctl start ip6tables\\n```\\n\\n**2\u3001\u5982\u679c\u662f\u5b9d\u5854\u9762\u677f**\u7684 ecs \u670d\u52a1\u5668\uff0c\u4e00\u822c\u76d1\u542c 80 \u7aef\u53e3\u65f6\uff0c\u6700\u5bb9\u6613\u53d1\u751f\u5f02\u5e38\uff0c\u539f\u56e0\u8fd8\u662f\u670d\u52a1\u5668 nginx \u914d\u7f6e\u95ee\u9898\uff0c\u51c6\u786e\u7684\u8bf4\u5b89\u88c5 phpmyadmin \u7684\u95ee\u9898\u3002\u5f53\u542f\u52a8\u548c\u505c\u6b62 phpmyadmin \u65f6\uff0c \u67e5\u770b nginx \u914d\u7f6e\u6587\u4ef6 `root` \u914d\u7f6e\u9879\u4f1a\u6307\u5411 `root /www/server/phpmyadmin;` \u6216 `root /www/server/stop;` \u7aef\u53e3\u4e5f\u4f1a\u8ddf\u968f phpmyadmin \u914d\u7f6e\u4e00\u8d77\u53d8\u5316\u3002\u597d\u4e86\uff0c\u95ee\u9898\u627e\u5230\u4e86\uff0c\u90a3\u4e48\u600e\u4e48\u89e3\u51b3\uff1f\\n\\n> **\u66f4\u65b0\uff1a\u6700\u5feb\u65b9\u5f0f\u5c31\u662f\u5728\u5b9d\u5854\u91cc\u8bbe\u7f6e\u9ed8\u8ba4\u7ad9\u70b9\u5373\u53ef\uff0c\u4e0b\u9762\u7684\u4e0d\u7528\u770b\u4e86**\\n\\n**\u6700\u5feb\u6377\u65b9\u5f0f**\uff0c\u624b\u52a8\u4fee\u6539 nginx \u914d\u7f6e\u6587\u4ef6\u76d1\u542c\u7aef\u53e3 80\uff0croot \u6307\u5411 `/www/wwwroot/default/`\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4e0d\u80fd\u518d\u4f7f\u7528 phpmyadmin\\n\\n**\u65b0\u5efa\u914d\u7f6e\u6587\u4ef6\u65b9\u5f0f**\uff0c\u5728 `/www/server/panel/vhost` \u76ee\u5f55\u65b0\u5efa `nginx_slb.conf` \u6587\u4ef6\uff0c\u6dfb\u52a0\u914d\u7f6e\\n\\n``` js \\nserver\\n  {\\n    listen 80;\\n    server_name slb;\\n    index index.php index.html index.htm default.php default.htm default.html;\\n    root  /www/wwwroot/default;\\n    #error_page   404   /404.html;\\n    include enable-php.conf;\\n    location ~ .*.(gif|jpg|jpeg|png|bmp|swf)$\\n      {\\n      expires      30d;\\n    }\\n    location ~ .*.(js|css)?$\\n      {\\n      expires      12h;\\n    }\\n    location ~ /.\\n      {\\n      deny all;\\n    }\\n    location /{\\n      if (!-e $request_filename) {\\n         rewrite ^/(.*)/public/ /$1/public/index.php?$query_string last; #\u63a8\u8350\\n         break;\\n      }\\n    }\\n    access_log  /www/wwwlogs/slb.log;\\n    error_log  /www/wwwlogs/slb.error.log;\\n } \\n```\\n\\n\u5b8c\u6210\u540e\uff0c\u9700\u8981\u5728 nginx \u914d\u7f6e\u6587\u4ef6\u4e2d phpmyadmin \u7684 server **\u524d\u9762**\u5f15\u5165\u5373\u53ef\\n\\n``` js \\n server_tokens off;\\n        access_log off;\\ninclude /www/server/panel/vhost/nginx_slb.conf;\\nserver\\n    {\\n        listen 888;\\n        server_name phpmyadmin; \\n```\\n\\n3\u3001**https \u91cd\u5b9a\u5411\u7684\u6b21\u6570\u8fc7\u591a**\uff0c\u8fd9\u662f\u7aef\u670d\u52a1\u5668\u7aef\u53e3\u914d\u7f6e\u95ee\u9898\uff0c \u4fee\u6539\u7aef\u53e3\u4e3a 80\uff0c\u4f7f slb \u4e0e ecs \u670d\u52a1\u5668\u4e4b\u95f4\u901a\u8fc7 http \u8f6c\u53d1\u3002\u5982\u679c\u9875\u9762\u6837\u5f0f\u9519\u4e71\uff0c \u5219\u5c06 http \u8c03\u7528\u6539\u4e3a\u4e86https \uff0c\u5728\u9875\u9762\u6dfb\u52a0\\n\\n``` js \\n<meta http-equiv=\\"Content-Security-Policy\\" content=\\"upgrade-insecure-requests\\">\\n```\\n\\n> \u53c2\u8003\uff1a [https://blog.csdn.net/zhangyongbink/article/details/86636014](https://blog.csdn.net/zhangyongbink/article/details/86636014)\\n\\n\u5982\u679c\u662f laravel \u5e94\u7528\uff0c\u5219\u5728 `AppServiceProvider` \u7684 `boot()` \u65b9\u6cd5\u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801\uff08\u6ce8\u610f\uff1a\u9700\u8981\u5728 slb \u9ad8\u7ea7\u914d\u7f6e\u91cc\u52fe\u9009\u201c \u901a\u8fc7X-Forwarded-Proto\u5934\u5b57\u6bb5\u83b7\u53d6SLB\u7684\u76d1\u542c\u534f\u8bae \u201d\uff09\\n\\n``` js \\n$this->app[\'request\']->server->set(\'HTTPS\', isset($_SERVER[\'HTTP_X_FORWARDED_PROTO\']) && \'https\' == $_SERVER[\'HTTP_X_FORWARDED_PROTO\']);\\n```"},{"id":"/24382","metadata":{"permalink":"/docusaurus/blog/24382","editUrl":"https://github.com/lzwdot/docusaurus/blog/2020/01-17-24382.md","source":"@site/blog/2020/01-17-24382.md","title":"crypto-js\u4e0ephp\u901a\u8fc7aes\u52a0\u5bc6\u4f20\u8f93","description":"CryptoJS (crypto.js) \u4e3a JavaScript \u63d0\u4f9b\u4e86\u5404\u79cd\u5404\u6837\u7684\u52a0\u5bc6\u7b97\u6cd5\u3002\u76ee\u524d\u5df2\u652f\u6301\u7684\u7b97\u6cd5\u5305\u62ec\uff1a","date":"2020-01-17T11:31:40.000Z","formattedDate":"2020\u5e741\u670817\u65e5","tags":[{"label":"server","permalink":"/docusaurus/blog/tags/server"},{"label":"php-usage","permalink":"/docusaurus/blog/tags/php-usage"}],"readingTime":1.63,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"crypto-js\u4e0ephp\u901a\u8fc7aes\u52a0\u5bc6\u4f20\u8f93","ID":"24382","date":"2020-01-17 11:31:40","categories":["server","php-usage"],"tags":["server","php-usage"],"authors":["lzw"],"slug":"/24382","type":"blog"},"prevItem":{"title":"\u5b9d\u5854 ecs \u914d\u7f6e\u8d1f\u8f7d\u5747\u8861 slb \u7684\u95ee\u9898","permalink":"/docusaurus/blog/24469"},"nextItem":{"title":"\u5fae\u4fe1\u6d4f\u89c8\u5668\u201c\u524d\u8fdb\u540e\u9000\u201d\u7684\u5e95\u90e8banner\u6321\u4f4f\u4e86H5\u7684\u5e95\u90e8banner","permalink":"/docusaurus/blog/23828"}},"content":"\x3c!--truncate--\x3e\\n\\nCryptoJS (crypto.js) \u4e3a JavaScript \u63d0\u4f9b\u4e86\u5404\u79cd\u5404\u6837\u7684\u52a0\u5bc6\u7b97\u6cd5\u3002\u76ee\u524d\u5df2\u652f\u6301\u7684\u7b97\u6cd5\u5305\u62ec\uff1a\\n\\n- MD5\\n- SHA-1\\n- SHA-256\\n- AES  \\n    ....\\n\\n\u8fd9\u91cc\u6211\u4eec\u6f14\u793aaes\u5bf9\u79f0\u52a0\u5bc6\u6570\u636e\u4f20\u8f93\uff0c\u4e0b\u9762\u5217\u51facrypto-js\u7684\u51e0\u4e2a\u91cd\u8981\u94fe\u63a5\\n\\ngithub\u9879\u76ee\u5730\u5740  \\n[https://github.com/brix/crypto-js](https://github.com/brix/crypto-js)  \\n\u6587\u6863  \\n[https://github.com/brix/crypto-js/blob/master/docs/QuickStartGuide.wiki](https://github.com/brix/crypto-js/blob/master/docs/QuickStartGuide.wiki)  \\n\u6e90\u7801\u5730\u5740  \\n[https://github.com/brix/crypto-js/releases](https://github.com/brix/crypto-js/releases)\\n\\n**js\u524d\u7aef\u6f14\u793a\u4ee3\u7801\uff1a**\\n\\n``` js \\n<script src=\\"./crypto-js-3.1.9-1/crypto-js.js\\"><\/script>\\n<script type=\\"text/javascript\\">\\n    /**\u52a0\u5bc6\\n    *\\n    * @param data\\n    * @returns {string}\\n    */\\n    function encrypt(data) {\\n        let text = JSON.stringify(data);\\n        text = CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(text)).toString();\\n        let key = CryptoJS.enc.Utf8.parse(\'1234567887654321\'); //\u4e3a\u4e86\u907f\u514d\u8865\u4f4d\uff0c\u76f4\u63a5\u752816\u4f4d\u7684\u79d8\u94a5\\n        let iv = CryptoJS.enc.Utf8.parse(\'1234567887654321\'); //16\u4f4d\u521d\u59cb\u5411\u91cf\\n        let encrypted = CryptoJS.AES.encrypt(text, key, {\\n            iv: iv,\\n            mode: CryptoJS.mode.CBC,\\n            padding: CryptoJS.pad.ZeroPadding\\n        }).toString();\\n        return CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(encrypted)).toString();\\n    }\\n    /**\u89e3\u5bc6\\n    *\\n    * @param data\\n    * @returns {string}\\n    */\\n    function decrypt(data) {\\n        let encrypted = CryptoJS.enc.Utf8.stringify(CryptoJS.enc.Base64.parse(data)).toString();\\n        let key = CryptoJS.enc.Utf8.parse(\'1234567887654321\'); //\u4e3a\u4e86\u907f\u514d\u8865\u4f4d\uff0c\u76f4\u63a5\u752816\u4f4d\u7684\u79d8\u94a5\\n        let iv = CryptoJS.enc.Utf8.parse(\'1234567887654321\'); //16\u4f4d\u521d\u59cb\u5411\u91cf\\n        let decrypted = CryptoJS.AES.decrypt(encrypted, key, {\\n            iv: iv,\\n            mode: CryptoJS.mode.CBC,\\n            padding: CryptoJS.pad.ZeroPadding\\n        }).toString(CryptoJS.enc.Utf8);\\n        return CryptoJS.enc.Utf8.stringify(CryptoJS.enc.Base64.parse(decrypted)).toString();\\n    }\\n    let data = {\\"username\\": \\"admin\\", \\"pwd\\": \\"passwd\\"};\\n    let encrypt_data = encrypt(data);\\n    let decrypt_data = decrypt(encrypt_data);\\n    console.log(decrypt_data);\\n<\/script>\\n```\\n\\n**php\u540e\u7aef\u6f14\u793a\u4ee3\u7801\uff1a**\\n\\n``` js \\n/**\u52a0\u5bc6\\n* @param $data\\n* @return string\\n*/\\nfunction encrypt($data)\\n{\\n    $key = \\"1234567887654321\\";//\u79d8\u94a5\u5fc5\u987b\u4e3a\uff1a8/16/32\u4f4d\\n    $iv = \\"1234567887654321\\";\\n    $base64_str = base64_encode(json_encode($data));\\n    $encrypted = openssl_encrypt($base64_str, \\"aes-128-cbc\\", $key, OPENSSL_ZERO_PADDING, $iv);\\n    return base64_encode($encrypted);\\n}\\n/**\u89e3\u5bc6\\n* @param $data\\n* @return mixed\\n*/\\nfunction decrypt($data)\\n{\\n    $encrypted = base64_decode($data);\\n    $key = \\"1234567887654321\\";//\u79d8\u94a5\u5fc5\u987b\u4e3a\uff1a8/16/32\u4f4d\\n    $iv = \\"1234567887654321\\";\\n    $decrypted = openssl_decrypt($encrypted, \'aes-128-cbc\', $key, OPENSSL_ZERO_PADDING, $iv);\\n    return json_decode(base64_decode($decrypted), true);\\n}\\n$data = [\'username\'=>\'admin\',\'pwd\'=>\'admin\'];\\n$encrypt=encrypt($data);\\n$str=decrypt($encrypt);\\nvar_dump($str);\\n```\\n\\n\u53c2\u8003\uff1a[https://www.jianshu.com/p/5619d68bc2d1](https://www.jianshu.com/p/5619d68bc2d1)"},{"id":"/23828","metadata":{"permalink":"/docusaurus/blog/23828","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/09-23-23828.md","source":"@site/blog/2019/09-23-23828.md","title":"\u5fae\u4fe1\u6d4f\u89c8\u5668\u201c\u524d\u8fdb\u540e\u9000\u201d\u7684\u5e95\u90e8banner\u6321\u4f4f\u4e86H5\u7684\u5e95\u90e8banner","description":"\u95ee\u9898\u8bf4\u660e\uff1a","date":"2019-09-23T13:04:24.000Z","formattedDate":"2019\u5e749\u670823\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":0.905,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u5fae\u4fe1\u6d4f\u89c8\u5668\u201c\u524d\u8fdb\u540e\u9000\u201d\u7684\u5e95\u90e8banner\u6321\u4f4f\u4e86H5\u7684\u5e95\u90e8banner","ID":"23828","date":"2019-09-23 13:04:24","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/23828","type":"blog"},"prevItem":{"title":"crypto-js\u4e0ephp\u901a\u8fc7aes\u52a0\u5bc6\u4f20\u8f93","permalink":"/docusaurus/blog/24382"},"nextItem":{"title":"\u4f7f\u7528Node.js\u7684request\u5e93\u505a\u4ee3\u7406","permalink":"/docusaurus/blog/23690"}},"content":"\x3c!--truncate--\x3e\\n\\n\u95ee\u9898\u8bf4\u660e\uff1a\\n\\nios\u5fae\u4fe1\u5185\u7f6e\u6d4f\u89c8\u5668\u65b0\u589e\u4e86\u201c\u524d\u8fdb\u540e\u9000\u201d\u7684\u5e95\u90e8\u64cd\u4f5cbanner\uff0c\u5728H5\u4e5f\u5305\u542b fixed\u5728\u5e95\u90e8\u7684banner\u65f6\uff0c\u8fdb\u884c\u524d\u8fdb\u540e\u9000\u64cd\u4f5c\u540e\uff0c\u4f1a\u51fa\u73b0\u5fae\u4fe1 banner \u6321\u4f4f H5 \u7684banner\u7684\u60c5\u51b5\u3002\\n\\n\u89e3\u51b3\u601d\u8def\uff1a\\n\\n1\u3001 \u5fae\u4fe1\u6d4f\u89c8\u5668\u51fa\u73b0\u4e86\u5e95\u90e8\u64cd\u4f5cbanner\u540e\uff0c\u9875\u9762\u7684body\u4f1a\u53d8\u5316\uff0c\u9700\u8981\u91cd\u65b0\u77eb\u6b63\\n\\n2\u3001\u5f53\u8fd4\u56de\u9875\u9762\u65f6\uff0c\u8ba9\u9875\u9762\u6267\u884c\u77eb\u6b63 js\\n\\n``` js \\n<script>\\n    //\u89e3\u51b3IOS\u5fae\u4fe1\u5185\u7f6e\u6d4f\u89c8\u5668\u8fd4\u56de\u540e\u4e0d\u6267\u884cjs\u811a\u672c\u7684\u95ee\u9898\\n    var isPageHide = false;\\n    window.addEventListener(\'pageshow\', function () {\\n        if (isPageHide) {\\n            setTimeout(function(){\\n                $(\\"body\\").css(\'height\',window.innerHeight)\\n            },200);\\n        }\\n    });\\n    window.addEventListener(\'pagehide\', function () {\\n        isPageHide = true;\\n    });\\n<\/script>\\n```\\n\\n\u4ee3\u7801\u4e2d\u7684 `pageshow` \u7528\u6765\u89e3\u51b3ios \u8fd4\u56de\u4e0d\u6267\u884c js \u7684\u95ee\u9898"},{"id":"/23690","metadata":{"permalink":"/docusaurus/blog/23690","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/08-30-23690.md","source":"@site/blog/2019/08-30-23690.md","title":"\u4f7f\u7528Node.js\u7684request\u5e93\u505a\u4ee3\u7406","description":"\u9996\u5148\u5b89\u88c5 request \u548c axios\u4f9d\u8d56\uff0c axios \u7528\u4f5cajax\u8bf7\u6c42\uff1a","date":"2019-08-30T16:51:01.000Z","formattedDate":"2019\u5e748\u670830\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":1.6,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u4f7f\u7528Node.js\u7684request\u5e93\u505a\u4ee3\u7406","ID":"23690","date":"2019-08-30 16:51:01","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/23690","type":"blog"},"prevItem":{"title":"\u5fae\u4fe1\u6d4f\u89c8\u5668\u201c\u524d\u8fdb\u540e\u9000\u201d\u7684\u5e95\u90e8banner\u6321\u4f4f\u4e86H5\u7684\u5e95\u90e8banner","permalink":"/docusaurus/blog/23828"},"nextItem":{"title":"\u4ece\u96f6\u5f00\u59cb\u914d\u7f6evue.js\u7684webpack\u5f00\u53d1\u73af\u5883","permalink":"/docusaurus/blog/23661"}},"content":"\x3c!--truncate--\x3e\\n\\n\u9996\u5148\u5b89\u88c5 request \u548c axios\u4f9d\u8d56\uff0c axios \u7528\u4f5cajax\u8bf7\u6c42\uff1a\\n\\n``` js \\ncnpm install request --save-div\\ncnpm install axios --save   \\n```\\n\\n\u5b8c\u6210\u5b89\u88c5\u540e\uff0c\u5728\u9879\u76ee\u6839\u76ee\u5f55\u65b0\u5efaproxy.js\u7684\u6587\u4ef6\uff0c\u914d\u7f6e\u4ee3\u7406\uff1a\\n\\n``` js \\nconst http = require(\'http\');\\nconst request = require(\'request\');\\nconst hostname = \'127.0.0.1\';\\nconst port = 8010;\\n// \u521b\u5efa\u4e00\u4e2a API \u4ee3\u7406\u670d\u52a1\\nconst apiServer = http.createServer((req, res) => {\\n    const url = \'http://news-at.zhihu.com/api/4\' + req.url;\\n    const options = {\\n        url: url\\n    };\\n    function callback (error, response, body) {\\n        if (!error && response.statusCode === 200) {\\n            // \u8bbe\u7f6e\u7f16\u7801\u7c7b\u578b\uff0c\u5426\u5219\u4e2d\u6587\u4f1a\u663e\u793a\u4e3a\u4e71\u7801\\n            res.setHeader(\'Content-Type\', \'text/plain;charset=UTF-8\');\\n            // \u8bbe\u7f6e\u6240\u6709\u57df\u5141\u8bb8\u8de8\u57df\\n            res.setHeader(\'Access-Control-Allow-Origin\', \'*\');\\n            // \u8fd4\u56de\u4ee3\u7406\u540e\u7684\u5185\u5bb9\\n            res.end(body);\\n        }\\n    }\\n    request.get(options, callback);\\n});\\n// \u76d1\u542c 8010 \u7aef\u53e3\\napiServer.listen(port, hostname, () => {\\n    console.log(`\u63a5\u53e3\u4ee3\u7406\u8fd0\u884c\u5728 http://${hostname}:${port}/`);\\n}); \\n```\\n\\n\u4f7f\u7528 axios \u7528\u4f5cajax\u8bf7\u6c42 \uff0c\u5c01\u88c5\u4e3autil.js\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n``` js \\nimport axios from \'axios\';\\nconst Util = {\\n    apiPath: \'http://127.0.0.1:8010/\'\\n};\\n// Ajax \u901a\u7528\u914d\u7f6e\\nUtil.ajax = axios.create({\\n    baseURL: Util.apiPath\\n});\\n// \u6dfb\u52a0\u54cd\u5e94\u62e6\u622a\u5668\\nUtil.ajax.interceptors.response.use(res => {\\n    return res.data;\\n});\\nexport default Util; \\n```\\n\\n\u7136\u540e\u5728 vue.js \u7684\u7ec4\u4ef6\u4e2d\u7684\u6d4b\u8bd5\u4ee3\u7801\uff1a\\n\\n``` js \\n<template>\\n    <div>\u6d4b\u8bd5\uff1a{{data}}</div>\\n</template>\\n<script>\\nimport $ from \'./util\';\\nexport default {\\n    data(){\\n        return {\\n            data:[]\\n        }\\n    },\\n    mounted () {\\n         $.ajax.get(\'themes\').then(res => {\\n            this.data = res.limit;\\n        })\\n    }\\n}\\n<\/script> \\n```\\n\\n\u5206\u522b\u5728\u7ec8\u7aef\u547d\u4ee4\u4e2d\u542f\u52a8\u4ee3\u7406\uff0c\u548c\u542f\u52a8\u670d\u52a1\uff1a\\n\\n``` js \\nnode .proxy.js\\n#\u6210\u529f\u663e\u793a\u65e5\u5fd7\uff1a\u63a5\u53e3\u4ee3\u7406\u8fd0\u884c\u5728 http://127.0.0.1:8010/\\ncnpm run dev\\n```"},{"id":"/23661","metadata":{"permalink":"/docusaurus/blog/23661","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/08-27-23661.md","source":"@site/blog/2019/08-27-23661.md","title":"\u4ece\u96f6\u5f00\u59cb\u914d\u7f6evue.js\u7684webpack\u5f00\u53d1\u73af\u5883","description":"\u8fd9\u91cc\u4f7f\u7528\u7684webpack@2.3.2 \u7248\u672c","date":"2019-08-27T10:59:00.000Z","formattedDate":"2019\u5e748\u670827\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":6.895,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u4ece\u96f6\u5f00\u59cb\u914d\u7f6evue.js\u7684webpack\u5f00\u53d1\u73af\u5883","ID":"23661","date":"2019-08-27 10:59:00","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/23661","type":"blog"},"prevItem":{"title":"\u4f7f\u7528Node.js\u7684request\u5e93\u505a\u4ee3\u7406","permalink":"/docusaurus/blog/23690"},"nextItem":{"title":"\u6ed1\u52a8\u9519\u8bef\u63d0\u793a\uff1aUnable to preventDefault inside passive event listener due to target being treated as passive","permalink":"/docusaurus/blog/23656"}},"content":"\x3c!--truncate--\x3e\\n\\n> \u8fd9\u91cc\u4f7f\u7528\u7684webpack@2.3.2 \u7248\u672c\\n\\n### \u5b89\u88c5webpack\\n\\n\u9996\u5148\u9700\u8981\u4f7f\u7528npm\u6765\u521d\u59cb\u914d\u7f6e\uff1a\\n\\n``` js \\ncnpm init\\n```\\n\\n\u6267\u884c\u540e\uff0c\u4e00\u7cfb\u5217\u7684\u56de\u8f66\u540e\uff0c \u751f\u6210package.json\u6587\u4ef6 \uff0c\u63a5\u7740\u5b89\u88c5 webpack@2.3.2 \u548cwebpack-dev-server\uff1a\\n\\n``` js \\ncnpm install webpack@2.3.2 --save-dev\\ncnpm install webpack-dev-server@2.4.2 --save-dev\\n```\\n\\n\\\\--save-dev\u4f1a\u4f5c\u4e3a\u5f00\u53d1\u4f9d\u8d56\u6765\u5b89\u88c5webpack\u3002\u6267\u884c\u4ee5\u4e0a\u64cd\u4f5c\u7684package.json\u6587\u4ef6\uff1a\\n\\n``` js \\n{\\n  \\"name\\": \\"demo\\",\\n  \\"version\\": \\"1.0.0\\",\\n  \\"description\\": \\"\\",\\n  \\"main\\": \\"index.js\\",\\n  \\"scripts\\": {\\n    \\"test\\": \\"echo \\"Error: no test specified\\" && exit 1\\"\\n  },\\n  \\"author\\": \\"\\",\\n  \\"license\\": \\"ISC\\",\\n  \\"devDependencies\\": {\\n    \\"webpack\\": \\"^2.3.2\\",\\n    \\"webpack-dev-server\\": \\"^2.4.2\\"\\n  }\\n} \\n```\\n\\n### \u914d\u7f6ewebpack\\n\\n\u65b0\u5efawebpack.config.js\u6587\u4ef6\u7528\u6765\u4f5c\u4e3awebpack\u914d\u7f6e\uff1a\\n\\n``` js \\nvar path = require(\'path\');\\nvar config = {\\n    entry:{  //\u5165\u53e3main.js\u6587\u4ef6\\n        main:\'./main\'\\n    },\\n    output:{ //\u6253\u5305\u540e\\n        path:path.join(__dirname,\'./dist\'),\\n        publicPath:\'/dist/\',\\n        filename:\'main.js\'\\n    }\\n}\\nmodule.exports=config  \\n```\\n\\n\u4ee5\u4e0awebpack\u914d\u7f6e\u6587\u4ef6\u6700\u91cd\u8981\u7684\u4e24\u9879\u5c31\u662fentry\u548coutput\uff0c\u5728entry\u4e2d\u7684main.js\u662f\u914d\u7f6e\u7684\u5165\u53e3\u6587\u4ef6\uff0coutput\u4e2d\u7684main.js\u5219\u662f\u6253\u5305\u540e\u7684\u6587\u4ef6\u3002\u6240\u4ee5\uff0c\u8fd8\u9700\u8981\u4e00\u4e2a\u7a7a\u7684main.js\u5165\u53e3\u6587\u4ef6\uff0c\u73b0\u5728\uff0c\u6211\u4eec\u628awebpack\u4e0enpm\u73af\u5883\u8054\u7cfb\u8d77\u6765\uff0c\u5728package.json\u4e2d\u6dfb\u52a0webpack-dev-server\u542f\u52a8\u811a\u672c\uff1a\\n\\n``` js \\n\\"scripts\\": {\\n    \\"test\\": \\"echo \\"Error: no test specified\\" && exit 1\\",\\n    \\"dev\\": \\"webpack-dev-server --open --config webpack.config.js\\"\\n }, \\n```\\n\\n\u81f3\u6b64\uff0c\u6211\u4eec\u7684\u914d\u7f6e\u5c31\u5b8c\u6210\u4e86\uff0c\u4e0b\u9762\u5efa\u4e00\u4e2aindex.html\u6587\u4ef6\u4f5c\u4e3a\u9879\u76ee\u7684\u5165\u53e3\uff1a\\n\\n``` js \\n<!DOCTYPE html>\\n<html lang=\\"en\\">\\n<head>\\n    <meta charset=\\"UTF-8\\">\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\">\\n    <meta http-equiv=\\"X-UA-Compatible\\" content=\\"ie=edge\\">\\n    <title>webpack</title>\\n</head>\\n<body>\\n    <div id=\\"app\\">\\n        hello world\\n    </div>\\n    <script type=\\"text/javascript\\" src=\\"/dist/main.js\\"><\/script>\\n</body>\\n</html> \\n```\\n\\n\u6267\u884c\u542f\u52a8\u547d\u4ee4\u540e\uff0c\u4f1a\u81ea\u52a8\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00\u9875\u9762\uff1a\\n\\n```js \\ncnpm run dev\\n```\\n\\n\u5982\u679c\u4f60\u6210\u529f\u6253\u5f00\u4e00\u4e2a hello world\u7684\u9875\u9762\uff0c\u90a3\u4e48\u4f60\u5df2\u7ecf\u5b8c\u6210\u4e86\u6574\u4e2a\u5de5\u4f5c\u6700\u91cd\u8981\u7684\u4e00\u6b65\u4e86\u3002\\n\\n### \u52a0\u5165css\u5904\u7406\u914d\u7f6e\\n\\n\u5904\u7406css\u7b49\u6837\u5f0f\u6587\u4ef6\u5c31\u9700\u8981\u7528\u5230style-loader\u548ccss-loader\uff0c\u6240\u4ee5\u9700\u8981\u5b89\u88c5\u548c\u914d\u7f6e\u5b83\u4eec\uff1a\\n\\n``` js \\ncnpm install css-loader --save-dev\\ncnpm install style-loader --save-dev\\ncnpm install extract-text-webpack-plugin@2.1.2 ---save-dev--save-dev\\n```\\n\\n\u5229\u7528extract-text-webpack-plugin\u6765\u542f\u7528webpack\u7684\u63d2\u4ef6\u529f\u80fd\u3002\u5728wepack.config.js\u4e2d\u6dfb\u52a0css\u5904\u7406\u914d\u7f6e\uff1a\\n\\n``` js \\nvar ExtractTextPlugin = require(\'extract-text-webpack-plugin\')\\nvar config = {\\n    //...\\n    module:{\\n        rules:[\\n            { //\u5904\u7406css\u6587\u4ef6\\n                test:/.css$/,\\n                use:ExtractTextPlugin.extract({\\n                    use:\'css-loader\',\\n                    fallback:\'style-loader\'\\n                })\\n            }\\n        ]\\n    },\\n    plugins:[\\n        //\u6253\u5305\u751f\u6210\u7684css\u6587\u4ef6\\n        new ExtractTextPlugin(\'main.css\')\\n    ]\\n}\\nmodule.exports=config \\n```\\n\\n\u4e0b\u9762\u6211\u4eec\u6dfb\u52a0\u4e00\u4e2astyle.css\u6587\u4ef6\uff1a\\n\\n``` js \\n#app{\\n    font-size: 24px;\\n    color: #f50;\\n} \\n```\\n\\n\u5e76\u5728main.js\u4e2d\u901a\u8fc7 import \u5f15\u5165\uff1a\\n\\n``` js \\nimport \'./style.css\'; \\n```\\n\\n\u4f7f\u7528 cnpm run dev \u547d\u4ee4\u91cd\u542f\u670d\u52a1\uff0c\u5728\u6d4f\u89c8\u5668\u4e2d\u53ef\u4ee5\u770b\u5230\u901a\u8fc7 `<link>` \u5f15\u5165\u7684main.css\u6587\u4ef6\u751f\u6548\uff0c\u9875\u9762\u7684 hello world\u4e5f\u53d8\u5927\u53d8\u7ea2\u3002\\n\\n### \u5b89\u88c5vue\u76f8\u5173\u4f9d\u8d56\\n\\n\u5904\u7406.vue\u540e\u7f00\u6587\u4ef6\u548cES6\u8bed\u8a00\u8f6c\u6362\u7b49\uff0c\u9700\u8981\u5b89\u88c5\u76f8\u5e94\u7684\u4f9d\u8d56\uff1a\\n\\n``` js \\ncnpm install --save-dev vue\\ncnpm install --save-dev vue-loader\\ncnpm install --save-dev vue-style-loader\\ncnpm install --save-dev vue-template-compiler\\ncnpm install --save-dev vue-hot-reload-api\\ncnpm install --save-dev babel\\ncnpm install --save-dev babel-loader@7.1.5\\ncnpm install --save-dev babel-core\\ncnpm install --save-dev babel-plugin-transform-runtime\\ncnpm install --save-dev babel-preset-es2015\\ncnpm install --save-dev babel-runtime \\n```\\n\\n\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u914d\u7f6ewebpack.config.js\u6765\u652f\u6301.vue\u6587\u4ef6\u548cES6\u7684\u89e3\u6790\uff1a\\n\\n``` js \\nvar path = require(\'path\');\\nvar ExtractTextPlugin = require(\'extract-text-webpack-plugin\')\\nvar VueLoaderPlugin = require(\'vue-loader/lib/plugin\')\\nvar config = {\\n    entry:{\\n        main:\'./main\'\\n    },\\n    output:{\\n        path:path.join(__dirname,\'./dist\'),\\n        publicPath:\'/dist/\',\\n        filename:\'main.js\'\\n    },\\n    module:{\\n        rules:[\\n            {\\n                test:/.vue$/,\\n                loader:\'vue-loader\',\\n                options:{\\n                    loaders:{\\n                        css:ExtractTextPlugin.extract({\\n                            use:\'css-loader\',\\n                            fallback:\'vue-style-loader\'\\n                        })\\n                    }\\n                }\\n            },\\n            {\\n                test:/.js$/,\\n                loader:\'babel-loader\',\\n                exclude:/node_modules/\\n            },\\n            {\\n                test:/.css$/,\\n                use:ExtractTextPlugin.extract({\\n                    use:\'css-loader\',\\n                    fallback:\'style-loader\'\\n                })\\n            }\\n        ]\\n    },\\n    plugins:[\\n        new ExtractTextPlugin(\'main.css\'),\\n        new VueLoaderPlugin()\\n    ]\\n}\\nmodule.exports=config \\n```\\n\\n\u65b0\u5efa\u4e00\u4e2a.babelrc\u7684\u914d\u7f6e\u6587\u4ef6\uff0cwebpack\u4f1a\u6839\u636e\u6b64\u914d\u7f6e\u6765\u4f7f\u7528babel\u7f16\u8bd1ES6\u7684\u4ee3\u7801\uff1a\\n\\n``` js \\n{\\n    \\"presets\\":[\\"es2015\\"],\\n    \\"plugins\\": [\\"transform-runtime\\"],\\n    \\"comments\\": false\\n} \\n```\\n\\n\u914d\u7f6e\u597d\u8fd9\u4e9b\u540e\uff0c\u73b0\u5728\u5c31\u53ef\u4ee5\u4f7f\u7528.vue\u6587\u4ef6\u4e86\u3002\u73b0\u5728\u521b\u5efa\u4e00\u4e2aapp.vue\u6587\u4ef6\u5e76\u5199\u5165\u5185\u5bb9\uff1a\\n\\n``` js \\n<template>\\n    <div>\\n        hello {{name}}\\n    </div>\\n</template>\\n<script>\\nexport default {\\n    data(){\\n        return {\\n            name:\'vue.js\'\\n        }\\n    }\\n}\\n<\/script>\\n<style scoped>\\n    div{\\n        color: #f60;\\n        font-size:24px;\\n    }\\n</style> \\n```\\n\\n\u5199\u597d\u4e86\u7ec4\u4ef6\u540e\uff0c\u5c31\u53ef\u4ee5\u5728\u5165\u53e3\u6587\u4ef6main.js\u4e2d\u4f7f\u7528\u5b83\uff0c\u6253\u5f00main.js\u6587\u4ef6\uff0c\u66ff\u6362\u6210\u4ee5\u4e0b\u5185\u5bb9\uff1a\\n\\n``` js \\nimport Vue from \'vue\';\\nimport App  from \'./app.vue\';\\nnew Vue({\\n    el:\'#app\',\\n    render:h=>h(App)\\n}) \\n```\\n\\n\u91cd\u542f\u670d\u52a1\uff0c\u5728\u6d4f\u89c8\u5668\u4e2d\u53ef\u4ee5\u770b\u5230\u9875\u9762\u7684 `<div id=\\"app\\">` \u5df2\u7ecf\u88ab\u7ec4\u4ef6\u66ff\u6362\u4e86\uff1a\\n\\n``` js \\n<div data-v-381730fa>hello vue.js</div> \\n```\\n\\n\u5bf9\u5e94\u7684main.css\u4e3a\uff1a\\n\\n``` js \\ndiv[data-v-381730fa]{\\n     color: #f60;\\n     font-size:24px;\\n}\\n```\\n\\n### \u7528\u4e8e\u751f\u4ea7\u73af\u5883\\n\\n\u5b89\u88c5url-loader\u548cfile-loader\u6765\u5904\u7406\u56fe\u7247\uff0c\u5b57\u4f53\u7b49\u6587\u4ef6\uff1a\\n\\n``` js \\ncnpm install --save-dev url-loader\\ncnpm install --save-dev file-loader\\n```\\n\\n\u5728webpack.config.js\u6dfb\u52a0\u914d\u7f6e\uff0c?limit=1024\u662f\u6307\u6587\u4ef6\u5c0f\u4e8e1kb\uff0c\u5c31\u4ee5base64\u7684\u5f62\u5f0f\u52a0\u8f7d\uff1a\\n\\n``` js \\nvar config = {\\n    //...\\n    module:{\\n        rules:[\\n            //...\\n            {\\n                test:/.(gif|jpg|png|woff|svg|eot|ttf)??.*$/,\\n                loader:\'url-loader?limit=1024\'\\n            },\\n           //..\\n        ]\\n    },\\n}; \\n```\\n\\n\u653e\u7f6e\u4e00\u5f20\u56fe\u7247./images/image.png\uff0c\u5e76\u5728app.vue\u4e2d\u52a0\u8f7d\u5b83\uff1a\\n\\n``` js \\n <template>\\n    <div>\\n        hello {{name}}\\n        <p>\\n            <img src=\\"/./images/image.gif\\" alt=\\"\\">\\n        </p>\\n    </div>\\n</template>\\n```\\n\\n\u91cd\u542f\u670d\u52a1\u540e\uff0c\u6d4f\u89c8\u5668\u9875\u9762\u4e0a\u5c06\u663e\u793a\u56fe\u7247\uff0c\u5f53\u7136\uff0c\u8fd9\u53ea\u662f\u6d4b\u8bd5\uff0c\u66f4\u91cd\u8981\u7684\u662f\u628a\u6240\u6709\u7684\u9759\u6001\u8d44\u6e90\u6253\u5305\u538b\u7f29\u3002\u9700\u8981\u5b89\u88c5\u4e0b\u9762\u4e24\u4e2a\u4f9d\u8d56\uff1a\\n\\n``` js \\ncnpm install --save-dev webpack-merge\\ncnpm install --save-dev html-webpack-plugin\\n```\\n\\n\u4e3a\u4e86\u65b9\u4fbf\u5f00\u53d1\u548c\u751f\u4ea7\u73af\u5883\u5207\u6362\uff0c\u6211\u4eec\u65b0\u5efa\u4e00\u4e2awebpack.prod.config.js\u914d\u7f6e\u6587\u4ef6\uff0c\u5e76\u5728package.json\u4e2d\u52a0\u5165\u4e00\u4e2abuild\u7684\u811a\u672c\uff1a\\n\\n``` js \\n\\"scripts\\": {\\n    \\"test\\": \\"echo \\"Error: no test specified\\" && exit 1\\",\\n    \\"dev\\": \\"webpack-dev-server --open --config webpack.config.js\\",\\n    \\"build\\": \\"webpack --progress --hide-modules --config webpack.prod.config.js\\"\\n }, \\n```\\n\\n\u5148\u6765\u770b\u4e0bwebpack.prod.config.js\u7684\u914d\u7f6e\uff1a\\n\\n``` js \\nvar webpack= require(\'webpack\');\\nvar HtmlwebpackPlugin = require(\'html-webpack-plugin\');\\nvar ExtractTextPlugin = require(\'extract-text-webpack-plugin\');\\nvar merge = require(\'webpack-merge\');\\nvar webpackBaseConfig = require(\'./webpack.config.js\');\\nvar VueLoaderPlugin = require(\'vue-loader/lib/plugin\')\\n//\u6e05\u7a7a\u57fa\u672c\u914d\u7f6e\u7684\u63d2\u4ef6\u5217\u8868\\nwebpackBaseConfig.plugins=[];\\nmodule.exports = merge(webpackBaseConfig,{\\n    output:{\\n        publicPath:\'/dist/\',\\n        //\u5c06\u5165\u53e3\u6587\u4ef6main.js\u91cd\u547d\u540d\u4e3ahash\u503c\u7684\u6587\u4ef6\u540d\\n        filename:\'[name].[hash].js\'\\n    },\\n    plugins:[\\n        new ExtractTextPlugin({\\n            filename:\'[name].[hash].css\',\\n            allChunks:true\\n        }),\\n        //\u5b9a\u4e49\u5f53\u524dnode\u73af\u5883\u4e3a\u751f\u4ea7\u73af\u5883\\n        new webpack.DefinePlugin({\\n            \'process.env\':{\\n                NODE_ENV:\'\\"production\\"\'\\n            }\\n        }),\\n        //\u538b\u7f29js\\n        new webpack.optimize.UglifyJsPlugin({\\n            compress:{\\n                warnings:false\\n            }\\n        }),\\n        //\u63d0\u53d6\u6a21\u677f\uff0c\u5e76\u4fdd\u5b58\u5165\u53e3 html\u6587\u4ef6\\n        new HtmlwebpackPlugin({\\n            filename:\'../index_prod.html\',\\n            template:\'./index.ejs\',\\n            inject:false\\n        }),\\n        //\u52a0\u8f7dvue\u76f8\u5173\u63d2\u4ef6\\n        new VueLoaderPlugin()\\n    ]\\n}) \\n```\\n\\n\u4ece\u4e0a\u9762\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u770b\u51fa\uff0c\u8fd8\u9700\u8981\u4e00\u4e2aindex.ejs\u7684\u6a21\u677f\u6587\u4ef6\uff1a\\n\\n``` js \\n<!DOCTYPE html>\\n<html lang=\\"en\\">\\n<head>\\n    <meta charset=\\"UTF-8\\">\\n    <title>Webpack App</title>\\n    <link rel=\\"stylesheet\\" href=\\"<%= htmlWebpackPlugin.files.css[0] %>\\">\\n</head>\\n<body>\\n    <div id=\\"app\\"></div>\\n    <script type=\\"text/javascript\\" src=\\"<%= htmlWebpackPlugin.files.js[0] %>\\"><\/script>\\n</body>\\n</html>\\n```\\n\\n\u6700\u540e\u6267\u884c\u6253\u5305\u547d\u4ee4\uff1a\\n\\n``` js \\ncnpm run bulid\\n```\\n\\n\u4f1a\u751f\u6210\u4e00\u4e2adist\u7684\u76ee\u5f55\uff08\u5305\u542b\u9759\u6001\u8d44\u6599\uff09\u548cindex\\\\_prod.html\u6587\u4ef6\uff0c\u5728\u6d4f\u89c8\u5668\u901a\u8fc7\u8bbf\u95ee\u4e00\u4e0b\u94fe\u63a5\u5373\u53ef\uff1a\\n\\n``` js \\nhttp://localhost:8080/index_prod.html \\n```\\n\\n\u597d\u4e86\uff0cvue.js\u7684webpack\u5f00\u53d1\u73af\u5883\u57fa\u672c\u914d\u7f6e\u5c31\u662f\u8fd9\u6837\u5b50\u4e86\u3002"},{"id":"/23656","metadata":{"permalink":"/docusaurus/blog/23656","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/08-23-23656.md","source":"@site/blog/2019/08-23-23656.md","title":"\u6ed1\u52a8\u9519\u8bef\u63d0\u793a\uff1aUnable to preventDefault inside passive event listener due to target being treated as passive","description":"\u5173\u4e8e\u8fd9\u4e2a\u9519\u8bef\u63d0\u793a\u7f51\u4e0a\u7684\u6587\u7ae0\u5f88\u591a\uff0c\u6839\u636e\u641c\u7d22\u548c\u81ea\u5df1\u6d4b\u8bd5\u7684\u7ed3\u679c\u60c5\u51b5\uff0c\u5229\u7528touch-action\u65b9\u6cd5\u89e3\u51b3\u6bd4\u8f83\u7a33\u7684\u4e00\u79cd\uff1a","date":"2019-08-23T11:12:49.000Z","formattedDate":"2019\u5e748\u670823\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":0.835,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u6ed1\u52a8\u9519\u8bef\u63d0\u793a\uff1aUnable to preventDefault inside passive event listener due to target being treated as passive","ID":"23656","date":"2019-08-23 11:12:49","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/23656","type":"blog"},"prevItem":{"title":"\u4ece\u96f6\u5f00\u59cb\u914d\u7f6evue.js\u7684webpack\u5f00\u53d1\u73af\u5883","permalink":"/docusaurus/blog/23661"},"nextItem":{"title":"\u89e3\u51b3chrome\u4e0d\u652f\u6301form.submit\u7684\u95ee\u9898","permalink":"/docusaurus/blog/23600"}},"content":"\x3c!--truncate--\x3e\\n\\n\u5173\u4e8e\u8fd9\u4e2a\u9519\u8bef\u63d0\u793a\u7f51\u4e0a\u7684\u6587\u7ae0\u5f88\u591a\uff0c\u6839\u636e\u641c\u7d22\u548c\u81ea\u5df1\u6d4b\u8bd5\u7684\u7ed3\u679c\u60c5\u51b5\uff0c\u5229\u7528touch-action\u65b9\u6cd5\u89e3\u51b3\u6bd4\u8f83\u7a33\u7684\u4e00\u79cd\uff1a\\n\\n``` js \\nhtml {\\n    touch-action: none;\\n}\\n```\\n\\n\u8fd8\u6709\u53e6\u5916\u4e00\u79cd\u65b9\u5f0f\u4f7f\u7528passive:false\uff0c\u5982\u4e0b\u4ee3\u7801\uff1a\\n\\n``` js \\ndocument.addEventListener(\'touchmove\',function(e){//\\n    e.preventDefault();\\n},{\\n    passive:false\\n}) \\n```\\n\\n> \u8fd9\u6bb5\u4ee3\u7801\u672c\u6765\u53ea\u662f\u89e3\u51b3\u9519\u8bef\u63d0\u793a\u95ee\u9898\uff0c\u6709\u6ca1\u6709\u8ddf\u6211\u4e00\u6837\uff0c\u4ee5\u4e3a\u662f\u89e3\u51b3\u65b9\u6848\uff0c\u5c31\u76f4\u63a5\u590d\u5236\u4e86\uff0c\u7136\u540e\u9875\u9762\u4e0d\u52a8\u4e86\uff0c\u53c8\u5230\u5904\u641c\u7d22... ?\\n\\n\u5176\u5b9e\u8fd9\u4e2a passive:false \u5c31\u662f\u544a\u8bc9\u6d4f\u89c8\u5668\uff0c\u8981\u9a6c\u4e0a\u4f7f\u7528 e.preventDefault() \u6765\u963b\u6b62\u4e86 touchmove \u9ed8\u8ba4\u884c\u4e3a\uff08\u65e2\u6ed1\u52a8\u884c\u4e3a\uff09\uff0c\u6240\u4ee5\uff0c\u51fa\u73b0\u9875\u9762\u65e0\u6cd5\u6ed1\u52a8\u5c5e\u4e8e\u6b63\u5e38"},{"id":"/23600","metadata":{"permalink":"/docusaurus/blog/23600","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/08-14-23600.md","source":"@site/blog/2019/08-14-23600.md","title":"\u89e3\u51b3chrome\u4e0d\u652f\u6301form.submit\u7684\u95ee\u9898","description":"\u6700\u7b80\u5355\u7684\u601d\u8def\uff0c\u4fee\u6539 type=\\"button\\" \u6539\u6210 type=\\"submit\\"","date":"2019-08-14T17:50:40.000Z","formattedDate":"2019\u5e748\u670814\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":0.265,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u89e3\u51b3chrome\u4e0d\u652f\u6301form.submit\u7684\u95ee\u9898","ID":"23600","date":"2019-08-14 17:50:40","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/23600","type":"blog"},"prevItem":{"title":"\u6ed1\u52a8\u9519\u8bef\u63d0\u793a\uff1aUnable to preventDefault inside passive event listener due to target being treated as passive","permalink":"/docusaurus/blog/23656"},"nextItem":{"title":"Security AppScan Standard\u5e38\u89c1\u6f0f\u6d1e","permalink":"/docusaurus/blog/23583"}},"content":"\x3c!--truncate--\x3e\\n\\n\u6700\u7b80\u5355\u7684\u601d\u8def\uff0c\u4fee\u6539 type=\\"button\\" \u6539\u6210 type=\\"submit\\"\\n\\n``` js \\n<button type=\\"button\\" data-rel=\\"submit\\">\u63d0\u4ea4</button>\\n$(\'button[data-rel=\\"submit\\"]\').on(\'click\', function () {\\n    //\u9a8c\u8bc1\u6210\u529f\\n    if(true){\\n        //\u6ce8\u610f\uff0c\u9700\u8981\u5148\u89e3\u7ed1click\uff0c\u4e0d\u7136\u662f\u8fdb\u53bb\u6b7b\u5faa\u73af\\n        $(this).attr(\'type\', \'submit\').off(\'click\').trigger(\'click\');\\n    }\\n}\\n```"},{"id":"/23583","metadata":{"permalink":"/docusaurus/blog/23583","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/08-12-23583.md","source":"@site/blog/2019/08-12-23583.md","title":"Security AppScan Standard\u5e38\u89c1\u6f0f\u6d1e","description":"\u5df2\u542f\u7528\u76ee\u5f55","date":"2019-08-12T15:43:00.000Z","formattedDate":"2019\u5e748\u670812\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"notes","permalink":"/docusaurus/blog/tags/notes"}],"readingTime":6.445,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"Security AppScan Standard\u5e38\u89c1\u6f0f\u6d1e","ID":"23583","date":"2019-08-12 15:43:00","categories":["posts","notes"],"tags":["posts","notes"],"authors":["lzw"],"slug":"/23583","type":"blog"},"prevItem":{"title":"\u89e3\u51b3chrome\u4e0d\u652f\u6301form.submit\u7684\u95ee\u9898","permalink":"/docusaurus/blog/23600"},"nextItem":{"title":"\u7b80\u5355\u7684js\u5012\u8ba1\u65f6\u51fd\u6570","permalink":"/docusaurus/blog/23524"}},"content":"\x3c!--truncate--\x3e\\n\\n## \u5df2\u542f\u7528\u76ee\u5f55\\n\\n\u9700\u8981\u5173\u95ed\u76ee\u5f55\u6d4f\u89c8\u7d22\u5f15\\n\\n**Apache**\uff0c \u8fdb\u5165apache\u7684\u914d\u7f6e\u6587\u4ef6 httpd.conf \u4fee\u6539\\n\\n``` js \\nDocumentRoot \\"E:/www\\"\\n<Directory \\"E:/www\\">\\n    ...\\n    #Options Indexes FollowSymLinks Includes ExecCGI\\n    Options FollowSymLinks Includes ExecCGI #\u53bb\u6389Indexes\\n  ...\\n</Directory>\\n```\\n\\n**Nginx**\uff0c \u7f16\u8f91nginx\u914d\u7f6e\u6587\u4ef6 nginx.conf\uff0c\u4fee\u6539\\n\\n``` js \\nautoindex off;  #\u5f00\u542fnginx\u76ee\u5f55\u6d4f\u89c8\u529f\u80fd,on\u4e3a\u5f00\u542f,off\u4e3a\u5173\u95ed\\n```\\n\\n\u4ee5\u4e0a\u90fd\u9700\u8981\u91cd\u8f7d\u914d\u7f6e\u6587\u4ef6\uff0c\u624d\u751f\u6548\\n\\n## \u52a0\u5bc6\u4f1a\u8bdd\uff08SSL\uff09Cookie \u4e2d\u7f3a\u5c11 Secure \u5c5e\u6027\uff08PHP\uff09\\n\\n\u4f7f\u7528https\u8bbf\u95ee\u65f6\uff0c \u9700\u8981\u7ed9cookie\u52a0\u4e0aSecure\u548cHttpOnly\u5c5e\u6027\uff0c \u4f46\u9700\u8981\u6ce8\u610f\uff1a\\n\\n> \u8bbe\u7f6eHttpOnly=true\u7684cookie\u4e0d\u80fd\u88abjs\u83b7\u53d6\u5230\uff0c\u65e0\u6cd5\u7528document.cookie\u6253\u51facookie\u7684\u5185\u5bb9\u3002\\n\\n#### 1\\\\. \u8bbe\u7f6esecure\\n\\n\u53ef\u4ee5\u770b\u5230,\u53ea\u8981\u5728**setcookie**\u7b2c\u516d\u4e2a\u53c2\u6570\u8bbe\u7f6e\u4e3atrue,\u5c31\u53ef\u4ee5\u4e86\\n\\n#### 2\\\\. \u8bbe\u7f6ehttponly\\n\\n\u57285.1\u548c\u4e4b\u524d\u7684\u7248\u672c\u5728header\u8bbe\u7f6e\\n\\n``` js \\n<?php\\nheader(\\"Set-Cookie: hidden=value; httpOnly\\"); \\n```\\n\\n\u57285.2\u548c\u66f4\u9ad8\u7684\u7248\u672c\uff0cCookie \u53c2\u6570\u53ef\u4ee5\u5728 php.ini\u6587\u4ef6\u4e2d\u5b9a\u4e49\uff0c\u5982\u679c\u9700\u8981\u8bbe\u7f6e\u6709\u51e0\u4e2a\u9009\u62e9\\n\\n**1\\\\. \u4fee\u6539php\u5168\u5c40\u914d\u7f6e**\\n\\n``` js \\n#1) \u76f4\u63a5\u4fee\u6539php.ini\u6587\u4ef6\\nsession.cookie_httponly=true\\n#2) \u6b64\u914d\u7f6e\u53ef\u4ee5\u5728php\u4ee3\u7801\u4e2d\u4f7f\u7528`ini_set`\u51fd\u6570\u8bbe\u7f6e\\nini_set(\\"session.cookie_httponly\\", 1);\\n#3)\uff0c\u5728\u8c03\u7528 session_start()\u4e4b\u524d\u8c03\u7528 session_set_cookie_params()\u51fd\u6570\u8bbe\u7f6e\\n<?php\\nprivate function startSession($time = 3600, $ses = \'MYSES\') {\\n    session_set_cookie_params($time);\\n    session_name($ses);\\n    session_start();\\n    if (isset($_COOKIE[$ses]))\\n      #\u7b2c\u4e94\u4e2a\u53c2\u6570 \u8bbe\u7f6e\u4e3atrue\\n      setcookie($ses, $_COOKIE[$ses], time() + $time, \\"/\\", true);\\n}\\n?> \\n```\\n\\n[session\\\\_set\\\\_cookie\\\\_params()](https://php.net/manual/zh/function.session-set-cookie-params.php)\u51fd\u6570[session\\\\_start()](https://php.net/manual/zh/function.session-start.php) \u51fd\u6570\\n\\n**2\\\\. \u5728\u8bbe\u7f6ecookie\u65f6\u76f4\u63a5\u6307\u5b9ahttponly**\\n\\n\u524d\u9762\u4ecb\u7ecd\u5728setcookie\u51fd\u6570\u7b2c7\u4e2a\u53c2\u6570**httponly**\u8bbe\u7f6e\u4e3atrue\u5373\u53ef.\\n\\n> \u6ce8\u610f\u4e8b\u9879\\n> \\n> setcookie\u7684httponly\u53c2\u6570 \u57285.2.0\u7248\u672c\u5f00\u59cb\u624d\u6709\\n\\n\u53c2\u8003\uff1a[https://www.jianshu.com/p/87a72c26db2a](https://www.jianshu.com/p/87a72c26db2a)\\n\\n## \u4e0d\u5b89\u5168\u7684HTTP\u65b9\u6cd5\\n\\n\u53ea\u5141\u8bb8post\uff0cget\u7684http\u65b9\u6cd5\\n\\n**Apache**\u5728httpd.conf\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a\\n\\n``` js \\n<Location \\"/\\">\\n   AllowMethods GET POST\\n</Location>\\n```\\n\\n\u53c2\u8003\uff1a[https://httpd.apache.org/docs/2.4/mod/mod\\\\_allowmethods.html](https://httpd.apache.org/docs/2.4/mod/mod_allowmethods.html)\\n\\n**Nginx**\u5728nginx.conf\u4e2d\u8fdb\u884c\u5982\u4e0b\u8bbe\u7f6e\\n\\n``` js \\nif ($request_method !~ ^(GET|HEAD|POST)$ ) {\\n   return 403;\\n}\\n```\\n\\n## \u670d\u52a1\u5668\u7aefBanner\u6cc4\u6f0f\\n\\n\u9690\u85cfserver\u4fe1\u606f\u548c\u7248\u672c\u4fe1\u606f\uff0c nginx\u914d\u7f6e\u53ef\u4ee5\u53c2\u8003\u8fd9\u7bc7\u6587\u7ae0 [https://lzwdot.github.io/docusaurus/blog/22789](https://lzwdot.github.io/docusaurus/blog/22789)\\n\\nApache\u914d\u7f6e\u9690\u85cf\u7248\u672c\u53f7\uff0c \u5728httpd.conf\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a\\n\\n``` js \\n# \u627e\u5230ServerTokens\u548cServerSignature\u5e76\u4fee\u6539\u4e3a\uff1a\\nServerTokens  Prod\\nServerSignature  off\\n# \u5982\u679c\u6ca1\u6709\u627e\u5230ServerTokens\u548cServerSignature\u53ef\u4ee5\u5728\u6700\u540e\u4e00\u884c\u6dfb\u52a0\\n```\\n\\nphp\u9690\u85cf\u7248\u672c\u53f7\uff0c\u5728php.ini\u4e2d\u914d\u7f6e\uff1a\\n\\n``` js \\nexpose_php=Off\\n```\\n\\n## \u4f7f\u7528\u4f2a\u9020\u7684 URL \u8bbe\u7f6e Referer \u5934\\n\\n\u5c06\u53ef\u80fd\u5e72\u6270 CSRF \u653b\u51fb\u7684 HTTP \u5934\u9664\u53bb\uff0c\u5e76\u4f7f\u7528\u4f2a\u9020\u7684 URL \u8bbe\u7f6e Referer \u5934\u8fdb\u884c\u8bbf\u95ee\uff0c\u6240\u4ee5\u9700\u8981\u9a8c\u8bc1 Referer \u5934\\n\\n> \u8fd9\u79cd\u65b9\u5f0f\u53ea\u80fd\u8d77\u5230\u7b80\u5355\u53d1\u9632\u62a4\uff0c Referer \u5934\u662f\u53ef\u4ee5\u4f2a\u9020\u7684\uff0c\u66f4\u63a8\u8350\u4f7f\u7528csrf-token\u8868\u5355\u65b9\u5f0f\u8fdb\u884c\u9632\u62a4\\n\\n``` js \\nif (isset($_SERVER[\'HTTP_REFERER\']) && strpos($_SERVER[\'HTTP_REFERER\'], $_SERVER[\'SERVER_NAME\']) === false) {\\n   exit(\'\u4e0d\u5141\u8bb8\u7684\u8bf7\u6c42\');\\n}\\n```\\n\\n## \u5173\u95edapache\u4e0bicons\u76ee\u5f55\u5217\u8868\\n\\n\u4f7f\u7528apache\u670d\u52a1\u5668\uff0c\u5f53\u6211\u8bbf\u95ee[http://localhost/icons/\u65f6\u4f1a\u81ea\u52a8\u663e\u793a\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u7684\u6240\u4ee5\u6587\u4ef6\u5217\u8868](http://localhost/icons/\u65f6\u4f1a\u81ea\u52a8\u663e\u793a\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u7684\u6240\u4ee5\u6587\u4ef6\u5217\u8868)\uff0c\u51fa\u4e8e\u5b89\u5168\u8003\u8651\u9700\u8981\u5173\u95ed\u76ee\u5f55\u5217\u8868\\n\\n\u76ee\u5f55`apache/conf/extra/`\u4e0b\u7684\u6587\u4ef6`httpd-autoindex.conf`\u4fee\u6539\\n\\n``` js \\nAlias /icons/ \\"/xampp/apache/icons/\\"\\n<Directory \\"/xampp/apache/icons\\">\\n    #Options Indexes MultiViews\\n    Options MultiViews #\u53bb\u6389Indexes\\n    AllowOverride None\\n    Require all granted\\n</Directory>\\n```\\n\\n## Flash \u53c2\u6570 AllowScriptAccess \u5df2\u8bbe\u7f6e\u4e3a always\\n\\n\u5f53\u663e\u793a\u6709\u8fd9\u4e2a\u6f0f\u6d1e\u65f6\uff0c\u4e00\u822c\u662fjs\u6587\u4ef6\u5305\u4e86 `<param name=\\"allowscriptaccess\\" value=\\"always\\" />` \u53c2\u6570\uff0c\u5982`ueditor hird-partywebuploaderwebuploader.js`\u6587\u4ef6\u7684\u5927\u69826472\u884c\u3002\u4e00\u822c\u5efa\u8bae\u4fee\u6539\u4e3a `<param name=\\"allowscriptaccess\\" value=\\"sameDomain\\" />`\\n\\n## AppScan\u68c0\u6d4b\u5230\u9690\u85cf\u76ee\u5f55\\n\\n\u76f4\u63a5\u8bbf\u95ee\u5728\u7ad9\u70b9\u6839\u76ee\u5f55\u7684css\uff0cimages\u65f6\uff0c\u7cfb\u7edf\u53ef\u80fd\u4f1a\u8fd4\u56de `403 forbidden` \uff0c\u8fd9\u65f6\u5b89\u5168\u8f6f\u4ef6\u4f1a\u89c9\u5f97\u662f\u4e00\u4e2a\u4e0d\u5b89\u5168\u7684\u65b9\u5f0f\u914d\u7f6e\u3002\u53ef\u80fd\u7684\u8bdd\uff0c\u8bf7\u53d1\u51fa\u6539\u7528\u201c404 \uff0d \u627e\u4e0d\u5230\u201d\u54cd\u5e94\u72b6\u6001\u4ee3\u7801\uff0c\u800c\u4e0d\u662f\u201c403 \uff0d \u7981\u6b62\u201d\u3002\u8fd9\u9879\u66f4\u6539\u4f1a\u5c06\u7ad9\u70b9\u7684\u76ee\u5f55\u6a21\u7cca\u5316\uff0c\u53ef\u4ee5\u9632\u6b62\u6cc4\u6f0f\u7ad9\u70b9\u7ed3\u6784\u3002\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u6709\u4e24\u79cd\u65b9\u5f0f\uff0c**\u65b9\u5f0f\u4e00\u662f\u901a\u8fc7\u81ea\u5b9a\u4e49 403 \u9519\u8bef\u9875\u9762\u8fd4\u56de 404\uff0c\u5373 403 \u7684\u9519\u8bef\u9875\u9762\u627e\u4e0d\u5230**\uff1a\\n\\n**Nginx** \u5728 sever \u6a21\u5757\u4e2d\u914d\u7f6e\\n\\n``` js \\nlocation / {\\n    ...\\n        error_page 403 /404;\\n    ...\\n}\\n```\\n\\n**Apache** \u5728 httpd.conf \u6587\u4ef6\u4e2d\u914d\u7f6e `ErrorDocument 403 /404`\\n\\n**\u65b9\u6cd5\u4e8c**\u662f\u5728css\uff0cimage\u7b49\u76ee\u5f55\u4e2d\u65b0\u5efa\u4e00\u4e2a\u7a7a\u767d\u7684 `index.html` \u6587\u4ef6\u5373\u53ef\\n\\n## \u7f3a\u5c11\u8de8\u5e27\u811a\u672c\u7f16\u5236\u9632\u5fa1\\n\\n\u4e00\u822c\u4f7f\u7528 X-Frame-Options \u9632\u6b62\uff08\u9650\u5236\uff09\u5728 iFrame \u4e2d\u5d4c\u5165\u9875\u9762\uff0c\u914d\u7f6e\u65b9\u6cd5\u6709\uff1a\\n\\n**PHP** \u4ee3\u7801 `header(\'X-Frame-Options:Deny\');` \u6216\u8005 `header(\'X-Frame-Options:SAMEORIGIN);//\u89c9\u5f97\u7528\u8fd9\u4e2a\u6bd4\u8f83\u597d`\\n\\n**Nginx** \u914d\u7f6e `add_header X-Frame-Options SAMEORIGIN`\\n\\n**Apache** \u914d\u7f6e `Header always append X-Frame-Options SAMEORIGIN`\\n\\n## \u53d1\u73b0\u53ef\u9ad8\u901f\u7f13\u5b58\u7684 SSL \u9875\u9762\\n\\n\u4e00\u822c\u5efa\u8bae\u9875\u9762\u6807\u9898\u4e2d\u7684\u201cCache-Control: no-store\u201d\u548c\u201cPragma: no-cache\u201d\u6216\u201cCache-Control: no-cache\u201d\u54cd\u5e94\u4f2a\u6307\u4ee4\u6765\u5b9e\u73b0\u6b64\u64cd\u4f5c\uff0c\u9875\u9762\u6dfb\u52a0\uff1a\\n\\n``` js \\n <meta http-equiv=\\"Cache-Control\\" content=\\"no-cache, no-store\\">\\n <meta http-equiv=\\"Pragma\\" content=\\"no-cache\\">     \\n```\\n\\n\u544a\u77e5\u6d4f\u89c8\u5668\u4e0d\u7f13\u5b58\u9875\u9762\uff1b\u5982\u679c\u9700\u8981\u8bbe\u7f6e\u54cd\u5e94\u8fc7\u671f\u65e5\u671f\u59cb\u7ec8\u4e3a\u8fc7\u671f\uff0c\u5219\u6dfb\u52a0 `<meta http-equiv=\\"Expires\\" content=\\"0\\">` \u6d4f\u89c8\u5668\u4f1a\u5728\u8fd9\u6bb5\u65f6\u95f4\u4e4b\u540e\u66f4\u65b0\u7f13\u5b58\u91cc\u7684\u9875\u9762\u3002\u5982\u679c\u4f7f\u7528Laravel\u6846\u67b6\uff0c\u5219\u53ef\u4ee5\u4e2d\u95f4\u4ef6\u6dfb\u52a0\uff1a\\n\\n``` js \\nreturn $next($request)->header(\'Cache-Control\', \'no-cache, no-store\')->header(\'Pragma\', \'no-cache\');\\n```\\n\\n## \u7f3a\u5c11 HTTP Strict-Transport-Security \u5934\\n\\n**Nginx** \u914d\u7f6e `add_header Strict-Transport-Security \\"max-age=63072000; includeSubdomains\\" always;`\\n\\n**Apache** \u914d\u7f6e `Header always set Strict-Transport-Security \\"max-age=63072000; includeSubdomains; preload\\"`\\n\\n## \u7f3a\u5c11\u201cContent-Security-Policy\u201d\u5934\\n\\n**\u9875\u9762** \u6dfb\u52a0 `<meta http-equiv=\\"Content-Security-Policy\\" content=\\"upgrade-insecure-requests\\">`\\n\\n**Nginx** \u914d\u7f6e `add_header Content-Security-Policy \\"upgrade-insecure-requests;connect-src *\\";`\\n\\n**Apache** \u914d\u7f6e `Header set Content-Security-Policy \\"default-src \'self\';\\"`\\n\\n\u53c2\u8003\uff1a\\n\\n[https://www.uedbox.com/post/56310/](https://www.uedbox.com/post/56310/)\\n\\n[https://www.cnblogs.com/hustskyking/p/upgrade-insecure-requests.html](https://www.cnblogs.com/hustskyking/p/upgrade-insecure-requests.html)\\n\\n## \u7f3a\u5c11\u201cX-Content-Type-Options\u201d\u5934\\n\\n**Nginx** \u914d\u7f6e `add_header X-Content-Type-Options nosniff;`\\n\\n**Apache** \u914d\u7f6e `Header always set X-Content-Type-Options nosniff`\\n\\n## \u7f3a\u5c11\u201cX-XSS-Protection\u201d\u5934\\n\\n**\u9875\u9762**\u8bbe\u7f6e `<meta http-equiv=\\"Content-Type\\" content=\\"X-XSS-Protection:1;mode=block\\" />`\\n\\n**Nginx** \u914d\u7f6e `add_header X-XSS-Protection \\"1; mode=block\\";`\\n\\n**Apache** `\u914d\u7f6e Header always append X-XSS-Protection \\"1;mode=block\\"`\\n\\n> \u5173\u4e8e\u6dfb\u52a0HTTP\u5934\u90e8\u8bbe\uff0cNginx\u53ef\u4ee5\u53c2\u8003 [https://www.jdon.com/idea/htmlcss/7-http-headers-to-secure-your-app.html](https://www.jdon.com/idea/htmlcss/7-http-headers-to-secure-your-app.html) \uff0cApache\u53ef\u4ee5\u53c2\u8003 [http://itindex.net/detail/52305-apache-header-%E5%AE%89%E5%85%A8](http://itindex.net/detail/52305-apache-header-%E5%AE%89%E5%85%A8)"},{"id":"/23524","metadata":{"permalink":"/docusaurus/blog/23524","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/07-18-23524.md","source":"@site/blog/2019/07-18-23524.md","title":"\u7b80\u5355\u7684js\u5012\u8ba1\u65f6\u51fd\u6570","description":"\u9700\u8981\u5f15\u5165jQuery","date":"2019-07-18T17:53:47.000Z","formattedDate":"2019\u5e747\u670818\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":0.365,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u7b80\u5355\u7684js\u5012\u8ba1\u65f6\u51fd\u6570","ID":"23524","date":"2019-07-18 17:53:47","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/23524","type":"blog"},"prevItem":{"title":"Security AppScan Standard\u5e38\u89c1\u6f0f\u6d1e","permalink":"/docusaurus/blog/23583"},"nextItem":{"title":"js\u65f6\u95f4\u51e0\u5929\u524d\uff0c\u51e0\u5c0f\u65f6\u524d\uff0c\u51e0\u5206\u949f\u524d","permalink":"/docusaurus/blog/23306"}},"content":"\x3c!--truncate--\x3e\\n\\n> \u9700\u8981\u5f15\u5165jQuery\\n\\n``` js \\n/\\n* \u5012\u8ba1\u65f6\\n*@param el\\n*@param time\\n*/\\nfunction smsTimeOut(el, time) {\\n    var time = time || 60;\\n    window.localTimer = setTimeout(function () {\\n        smsTimeOut(el, time);\\n    }, 1000);\\n    if (window.localTime == undefined) window.localTime = time;\\n    if (window.localTime > 0) {\\n        $(el).prop(\'disabled\', true).html(window.localTime + \'\u79d2\u540e\u83b7\u53d6\')\\n        window.localTime--;\\n    } else {\\n        clearTimeout(window.localTimer);\\n        window.localTime = time;\\n        $(el).prop(\'disabled\', false).html(\' \u83b7\u53d6\u9a8c\u8bc1\u7801\');\\n    }\\n}\\n```"},{"id":"/23306","metadata":{"permalink":"/docusaurus/blog/23306","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/05-26-23306.md","source":"@site/blog/2019/05-26-23306.md","title":"js\u65f6\u95f4\u51e0\u5929\u524d\uff0c\u51e0\u5c0f\u65f6\u524d\uff0c\u51e0\u5206\u949f\u524d","description":"\u7b80\u5355\u5199\u6cd5","date":"2019-05-26T16:57:26.000Z","formattedDate":"2019\u5e745\u670826\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":2.415,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"js\u65f6\u95f4\u51e0\u5929\u524d\uff0c\u51e0\u5c0f\u65f6\u524d\uff0c\u51e0\u5206\u949f\u524d","ID":"23306","date":"2019-05-26 16:57:26","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/23306","type":"blog"},"prevItem":{"title":"\u7b80\u5355\u7684js\u5012\u8ba1\u65f6\u51fd\u6570","permalink":"/docusaurus/blog/23524"},"nextItem":{"title":"js\u4e2dcontains\u548cindexOf\u7684\u4f7f\u7528","permalink":"/docusaurus/blog/23297"}},"content":"\x3c!--truncate--\x3e\\n\\n\u7b80\u5355\u5199\u6cd5\\n\\n``` js \\nfunction FormatTime(timestamp) {\\n    var mistiming = Math.round(new Date() / 1000) - timestamp;\\n    var postfix = mistiming > 0 ? \'\u524d\' : \'\u540e\'\\n    mistiming = Math.abs(mistiming)\\n    var arrr = [\'\u5e74\', \'\u4e2a\u6708\', \'\u661f\u671f\', \'\u5929\', \'\u5c0f\u65f6\', \'\u5206\u949f\', \'\u79d2\'];\\n    var arrn = [31536000, 2592000, 604800, 86400, 3600, 60, 1];\\n    for (var i = 0; i < 7; i++) {\\n        var inm = Math.floor(mistiming / arrn[i])\\n        if (inm != 0) {\\n            return inm + arrr[i] + postfix\\n        }\\n    }\\n}\\n```\\n\\n\u66f4\u60f3\u8be6\u7ec6\u5199\u6cd5\\n\\n``` js \\nvar Time = {\\n    // \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u6233\\n  getUnix: function () {\\n        var date = new Date();\\n        return date.getTime();\\n    },\\n    // \u83b7\u53d6\u4eca\u59290\u70b90\u52060\u79d2\u7684\u65f6\u95f4\u6233\\n  getTodayUnix: function () {\\n        var date = new Date();\\n        date.setHours(0); //\u8bbe\u7f6e\u6307\u5b9a\u65f6\u95f4\u7684\u5c0f\u65f6\u5b57\u6bb5\\n  date.setMinutes(0);\\n        date.setSeconds(0);\\n        date.setMilliseconds(0);\\n        return date.getTime();\\n    },\\n    // \u83b7\u53d6\u4eca\u5e741\u67081\u65e50\u70b90\u52060\u79d2\u7684\u65f6\u95f4\u6233\\n  getYearUnix: function () {\\n        var date = new Date();\\n        date.setMonth(0)\\n        date.setDate(1);\\n        date.setHours(0);\\n        date.setMinutes(0);\\n        date.setSeconds(0);\\n        date.setMilliseconds(0);\\n        return date.getTime();\\n    },\\n    // \u83b7\u53d6\u6807\u51c6\u5e74\u6708\u65e5\\n  getLastDate: function (time) {\\n        var date = new Date(time);\\n        var month = date.getMonth() + 1 < 10 ? \'0\' + (date.getMonth() + 1) : date.getMonth() + 1;\\n        var day = date.getDate() < 10 ? \'0\' + date.getDate() : date.getDate();\\n        return date.getFullYear() + \'-\' + month + \'-\' + day\\n    },\\n    // \u8f6c\u6362\u65f6\u95f4\\n  getFormatTime: function (timestamp) {\\n        var now = this.getUnix(); //\u5f53\u524d\u65f6\u95f4\u6233\\n  var today = this.getTodayUnix(); //\u4eca\u59290\u70b9\u65f6\u95f4\u6233\\n  var year = this.getYearUnix(); //\u4eca\u5e740\u70b9\u65f6\u95f4\u6233\\n  var timer = (now - timestamp) / 1000; //\u8f6c\u5316\u4e3a\u79d2\u7ea7\u65f6\u95f4\u6233\\n  var tip = \'\';\\n        // 1\u5206\u949f\u4ee5\u524d\uff0c\u663e\u793a\u201c\u521a\u521a\u201d\u3002\\n  // 1\u5206\u949f~1\u5c0f\u65f6\u4e4b\u95f4\uff0c\u663e\u793a\u201cxx\u5206\u949f\u524d\u201d\u3002\\n  // 1\u5c0f\u65f6~1\u5929\u4e4b\u95f4\uff0c\u663e\u793a\u201cxx\u5c0f\u65f6\u524d\u201d\u3002\\n  // 1\u5929~1\u4e2a\u6708\uff0831\u5929\uff09\u4e4b\u95f4\uff0c\u663e\u793a\u201cxx\u5929\u524d\u201d\u3002\\n  // \u5927\u4e8e1\u4e2a\u6708\uff0c\u663e\u793a\u201cxx\u5e74xx\u6708xx\u65e5\u201d\u3002\\n  if (timer <= 0) {\\n            tip = \'\u521a\u521a\';\\n        } else if (Math.floor(timer / 60) <= 0) {\\n            tip = \'\u521a\u521a\'\\n  } else if (timer < 3600) {\\n            tip = Math.floor(timer / 60) + \'\u5206\u949f\u524d\';\\n        } else if (timer >= 3600 && (timestamp - today >= 0)) {\\n            tip = Math.floor(timer / 3600) + \'\u5c0f\u65f6\u524d\'\\n  } else if (timer / 86400 <= 31) {\\n            tip = Math.ceil(timer / 86400) + \'\u5929\u524d\'\\n  } else {\\n            tip = this.getLastDate(timestamp);\\n        }\\n        return tip;\\n    }\\n}\\n```"},{"id":"/23297","metadata":{"permalink":"/docusaurus/blog/23297","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/05-26-23297.md","source":"@site/blog/2019/05-26-23297.md","title":"js\u4e2dcontains\u548cindexOf\u7684\u4f7f\u7528","description":"contains\uff1a \u7528\u6765\u67e5\u770bdom\u5143\u7d20\u7684\u5305\u542b\u5173\u7cfb\uff0c\u5982","date":"2019-05-26T15:51:15.000Z","formattedDate":"2019\u5e745\u670826\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":0.36,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"js\u4e2dcontains\u548cindexOf\u7684\u4f7f\u7528","ID":"23297","date":"2019-05-26 15:51:15","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/23297","type":"blog"},"prevItem":{"title":"js\u65f6\u95f4\u51e0\u5929\u524d\uff0c\u51e0\u5c0f\u65f6\u524d\uff0c\u51e0\u5206\u949f\u524d","permalink":"/docusaurus/blog/23306"},"nextItem":{"title":"\u5343\u5206\u4f4d\u8f6c\u6362\u7684\u6b63\u5219","permalink":"/docusaurus/blog/22882"}},"content":"\x3c!--truncate--\x3e\\n\\ncontains\uff1a \u7528\u6765\u67e5\u770bdom\u5143\u7d20\u7684\u5305\u542b\u5173\u7cfb\uff0c\u5982\\n\\n``` js \\nif(document.contains(e.target)){\\n    //...\\n    return false;\\n}\\n```\\n\\nindexOf\uff1a \u96c6\u5408\u4e2d\u662f\u5426\u5305\u542b\u53e6\u4e00\u4e2a\u96c6\u5408\uff0c\u5982\\n\\n``` js \\nvar _Arrays_ = [\'11\',\'22\',\'33\'];\\nvar _Array_ =\'11\';\\nif(_Arrays_.indexOf(_Array_) >= 0) {\\n    _alert_(\'Arrays\u4e2d\u5305\u542bArray\');\\n}\\nvar _strs_ = \'112233\';\\nvar _str_ =\'11\';\\nif(_strs_.indexOf(_str_) >= 0) {\\n    _alert_(\'Arrays\u4e2d\u5305\u542bArray\');\\n}\\n```"},{"id":"/22882","metadata":{"permalink":"/docusaurus/blog/22882","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/05-13-22882.md","source":"@site/blog/2019/05-13-22882.md","title":"\u5343\u5206\u4f4d\u8f6c\u6362\u7684\u6b63\u5219","description":"\u7ed3\u679c\uff1a","date":"2019-05-13T22:49:22.000Z","formattedDate":"2019\u5e745\u670813\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":0.665,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u5343\u5206\u4f4d\u8f6c\u6362\u7684\u6b63\u5219","ID":"22882","date":"2019-05-13 22:49:22","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/22882","type":"blog"},"prevItem":{"title":"js\u4e2dcontains\u548cindexOf\u7684\u4f7f\u7528","permalink":"/docusaurus/blog/23297"},"nextItem":{"title":"H5\u7684\u89c6\u9891\u97f3\u9891\u517c\u5bb9\u683c\u5f0f","permalink":"/docusaurus/blog/22830"}},"content":"\x3c!--truncate--\x3e\\n\\n``` js \\n//\u6bcf\u4e09\u4f4d\u6570\u9017\u53f7\u9694\u5f00\\n\'123456789\'.toString().replace(/B(?=(d{3})+$)/g,\',\');  \\n\\n// or\\nNumber(\'123456789\').toLocaleString()\\n\\n// or\\n\'123456789\'.toString().replace(/\\\\d{1,3}(?=(\\\\d{3})+$)/g, \'$&,\')\\n```\\n\\n\u7ed3\u679c\uff1a\\n\\n``` js \\n123,456,789 \\n```\\n\\n> `B`\uff1a\u5339\u914d\u975e\u5355\u8bcd\u8fb9\u754c  \\n> `(?=)`\uff1a\u6b63\u5411\u96f6\u5bbd\u65ad\u8a00  \\n> `d{3}`\uff1a\u5339\u914d\u4e09\u4e2a\u6570\u5b57\u5b57\u7b26  \\n> `+`\uff1a\u4e0e\u524d\u9762\u7684d{3}\u7ed3\u5408\u8868\u793a\u5339\u914d3\u7684\u6574\u6570\u500d\u4e2a\u6570\u5b57\u5b57\u7b26  \\n> `$`\uff1a\u5b57\u7b26\u4e32\u7ed3\u5c3e \\n> `$&` \u8868\u793a\u5339\u914d\u5230\u7684\u6570\u5b57\uff0c\u6bd4\u5982\uff1a\u2019123\u2018\uff0c\u2019456\u2018   \\n> \u6240\u4ee5\u5408\u8d77\u6765\u7684\u610f\u601d\u5c31\u662f\uff1a\u5339\u914d\u5355\u8bcd\u4e2d\u7684\u67d0\u4e2a\u4f4d\u7f6e\uff0c\u8fd9\u4e2a\u4f4d\u7f6e\u4e4b\u540e\u7684\u5b57\u7b26\u5168\u90e8\u4e3a\u6570\u5b57\uff0c\u4e14\u51fa\u73b0\u6b21\u6570\u662f3\u7684\u6574\u6570\u500d\u3002"},{"id":"/22830","metadata":{"permalink":"/docusaurus/blog/22830","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/04-22-22830.md","source":"@site/blog/2019/04-22-22830.md","title":"H5\u7684\u89c6\u9891\u97f3\u9891\u517c\u5bb9\u683c\u5f0f","description":"\u89c6\u9891\u517c\u5bb9\u6027\u6700\u597d\u7684\u683c\u5f0f\u662f H.264\uff0c\u5373MP4","date":"2019-04-22T22:40:22.000Z","formattedDate":"2019\u5e744\u670822\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":0.13,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"H5\u7684\u89c6\u9891\u97f3\u9891\u517c\u5bb9\u683c\u5f0f","ID":"22830","date":"2019-04-22 22:40:22","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/22830","type":"blog"},"prevItem":{"title":"\u5343\u5206\u4f4d\u8f6c\u6362\u7684\u6b63\u5219","permalink":"/docusaurus/blog/22882"},"nextItem":{"title":"\u5b9d\u5854\u91cd\u65b0\u7f16\u8bd1nginx\uff0c\u9690\u85cfserver\u4fe1\u606f\u548c\u7248\u672c\u4fe1\u606f","permalink":"/docusaurus/blog/22789"}},"content":"\x3c!--truncate--\x3e\\n\\n\u89c6\u9891\u517c\u5bb9\u6027\u6700\u597d\u7684\u683c\u5f0f\u662f H.264\uff0c\u5373MP4  \\n\u97f3\u9891\u517c\u5bb9\u6027\u6700\u597d\u683c\u5f0f\u662f: AAC"},{"id":"/22789","metadata":{"permalink":"/docusaurus/blog/22789","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/04-03-22789.md","source":"@site/blog/2019/04-03-22789.md","title":"\u5b9d\u5854\u91cd\u65b0\u7f16\u8bd1nginx\uff0c\u9690\u85cfserver\u4fe1\u606f\u548c\u7248\u672c\u4fe1\u606f","description":"\u73af\u5883","date":"2019-04-03T08:57:00.000Z","formattedDate":"2019\u5e744\u67083\u65e5","tags":[{"label":"server","permalink":"/docusaurus/blog/tags/server"},{"label":"linux","permalink":"/docusaurus/blog/tags/linux"}],"readingTime":1.325,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u5b9d\u5854\u91cd\u65b0\u7f16\u8bd1nginx\uff0c\u9690\u85cfserver\u4fe1\u606f\u548c\u7248\u672c\u4fe1\u606f","ID":"22789","date":"2019-04-03 08:57:00","categories":["server","linux"],"tags":["server","linux"],"authors":["lzw"],"slug":"/22789","type":"blog"},"prevItem":{"title":"H5\u7684\u89c6\u9891\u97f3\u9891\u517c\u5bb9\u683c\u5f0f","permalink":"/docusaurus/blog/22830"},"nextItem":{"title":"\u767e\u5ea6\u5730\u56fe\uff08BD-09\uff09\u548c\u817e\u8baf\u5730\u56fe\uff08GCJ-02\uff09\u5750\u6807\u7cfb\u8f6c\u6362\uff08PHP\u7248\uff09","permalink":"/docusaurus/blog/22722"}},"content":"\x3c!--truncate--\x3e\\n\\n**\u73af\u5883**  \\n\u7cfb\u7edf: CentOS Linux 7.6.1810 (Core)  \\n\u5b9d\u5854\uff1a\u514d\u8d39\u7248 5.9.1  \\nNginx\u7248\u672c\uff1a1.15\\n\\n**\u9700\u6c42**  \\n\u9690\u85cfnginx\u7684server\u4fe1\u606f\u548c\u7248\u672c\u4fe1\u606f\\n\\n## \u4fee\u6539\u914d\u7f6e\u548c\u6e90\u7801\\n\\n1.\u9690\u85cf\u7248\u672c\u4fe1\u606f\\n\\n\u5728nginx.conf\u91cc\u9762\u6dfb\u52a0\\n\\n``` js \\nserver_tokens off; \\n```\\n\\n2.\u9690\u85cfserver\u4fe1\u606f\uff08\u9700\u8981\u91cd\u65b0\u7f16\u8bd1ngnix\uff09\\n\\n\u8fdb\u5165nginx\u6e90\u7801\u76ee\u5f55/www/server/nginx/src\\n\\n``` js \\n# vi src/http/ngx_http_header_filter_module.c \\n```\\n\\n\u5c06\\n\\n``` js \\nstatic u_char ngx_http_server_string[] = \\"Server: nginx\\" CRLF;\\nstatic u_char ngx_http_server_full_string[] = \\"Server: \\" NGINX_VER CRLF;\\nstatic u_char ngx_http_server_build_string[] = \\"Server: \\" NGINX_VER_BUILD CRLF; \\n```\\n\\n\u6539\u4e3a\\n\\n``` js \\nstatic u_char ngx_http_server_string[] = \\"Server: webServer\\" CRLF;\\nstatic u_char ngx_http_server_full_string[] = \\"Server: webServer\\" CRLF;\\nstatic u_char ngx_http_server_build_string[] = \\"Server: webServer\\" CRLF; \\n```\\n\\n## \u91cd\u65b0\u7f16\u8bd1nginx\\n\\n\u7531\u4e8e\u4f7f\u7528\u5b9d\u5854\u5b89\u88c5nginx\uff0c\u6240\u4ee5\u53ef\u4ee5\u53c2\u8003\u5b9d\u5854\u5b89\u88c5\u811a\u672c\uff1a`/www/server/panel/install/nginx.sh`\\n\\n``` js \\n...\\nif [ \\"${version}\\" == \\"1.15\\" ];then\\n        ./configure --user=www --group=www --prefix=${Setup_Path} --with-openssl=${Setup_Path}/src/openssl --add-module=${Setup_Path}/src/ngx_devel_kit --add-module=${Setup_Path}/src/lua_nginx_module --add-module=${Setup_Path}/src/ngx_cache_purge --add-module=${Setup_Path}/src/nginx-sticky-module --with-http_stub_status_module --with-http_ssl_module --with-http_v2_module --with-http_image_filter_module --with-http_gzip_static_module --with-http_gunzip_module --with-stream --with-stream_ssl_module --with-ipv6 --with-http_sub_module --with-http_flv_module --with-http_addition_module --with-http_realip_module --with-http_mp4_module --with-ld-opt=\\"-Wl,-E\\" --with-openssl-opt=\\"enable-tls1_3 enable-weak-ssl-ciphers\\" --with-cc-opt=\\"-Wno-error\\" ${jemallocLD}\\n... \\n```\\n\\n> \u5c06 ${Setup\\\\_Path} \u6539\u4e3a /www/server/nginx  \\n> \u5c06 ${jemallocLD} \u6539\u4e3a --with-ld-opt=\\"-ljemalloc\\"\\n\\n**\u7f16\u8bd1nginx**\\n\\n``` js \\n# cd /www/server/nginx/src\\n# ./configure --user=www --group=www --prefix=/www/server/nginx --with-openssl=/www/server/nginx/src/openssl --add-module=/www/server/nginx/src/ngx_devel_kit --add-module=/www/server/nginx/src/lua_nginx_module --add-module=/www/server/nginx/src/ngx_cache_purge --add-module=/www/server/nginx/src/nginx-sticky-module --with-http_stub_status_module --with-http_ssl_module --with-http_v2_module --with-http_image_filter_module --with-http_gzip_static_module --with-http_gunzip_module --with-stream --with-stream_ssl_module --with-ipv6 --with-http_sub_module --with-http_flv_module --with-http_addition_module --with-http_realip_module --with-http_mp4_module --with-ld-opt=\\"-Wl,-E\\" --with-openssl-opt=\\"enable-tls1_3 enable-weak-ssl-ciphers\\" --with-cc-opt=\\"-Wno-error\\" --with-ld-opt=\\"-ljemalloc\\"\\n# make && make install \\n```\\n\\n\u91cd\u542fnginx\u5373\u53ef"},{"id":"/22722","metadata":{"permalink":"/docusaurus/blog/22722","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/04-01-22722.md","source":"@site/blog/2019/04-01-22722.md","title":"\u767e\u5ea6\u5730\u56fe\uff08BD-09\uff09\u548c\u817e\u8baf\u5730\u56fe\uff08GCJ-02\uff09\u5750\u6807\u7cfb\u8f6c\u6362\uff08PHP\u7248\uff09","description":"\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u5e38\u89c1\u7684\u5730\u7406\u7ecf\u7eac\u5ea6\u5750\u6807\u7cfb\uff1a","date":"2019-04-01T11:24:53.000Z","formattedDate":"2019\u5e744\u67081\u65e5","tags":[{"label":"server","permalink":"/docusaurus/blog/tags/server"},{"label":"php-usage","permalink":"/docusaurus/blog/tags/php-usage"}],"readingTime":2.055,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u767e\u5ea6\u5730\u56fe\uff08BD-09\uff09\u548c\u817e\u8baf\u5730\u56fe\uff08GCJ-02\uff09\u5750\u6807\u7cfb\u8f6c\u6362\uff08PHP\u7248\uff09","ID":"22722","date":"2019-04-01 11:24:53","categories":["server","php-usage"],"tags":["server","php-usage"],"authors":["lzw"],"slug":"/22722","type":"blog"},"prevItem":{"title":"\u5b9d\u5854\u91cd\u65b0\u7f16\u8bd1nginx\uff0c\u9690\u85cfserver\u4fe1\u606f\u548c\u7248\u672c\u4fe1\u606f","permalink":"/docusaurus/blog/22789"},"nextItem":{"title":"\u4f7f\u7528\u5fae\u4fe1\u516c\u4f17\u53f7\u548c\u767e\u5ea6\u5730\u56fe\u83b7\u53d6\u4f4d\u7f6e","permalink":"/docusaurus/blog/22709"}},"content":"\x3c!--truncate--\x3e\\n\\n\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u5e38\u89c1\u7684\u5730\u7406\u7ecf\u7eac\u5ea6\u5750\u6807\u7cfb\uff1a\\n\\n### `WGS-84`\u5750\u6807\u7cfb\uff1a\\n\\n\u662f\u56fd\u9645\u6807\u51c6\u5750\u6807\u7cfb\uff0c`GPS`\u5750\u6807\uff08`Google Earth`\u4f7f\u7528\u3001\u6216\u8005`GPS`\u6a21\u5757\uff09\u3002\\n\\n### `GCJ-02`\u5750\u6807\u7cfb\uff1a\\n\\n\u706b\u661f\u5750\u6807\u7cfb\uff0c`GCJ-02`\u662f\u7531\u4e2d\u56fd\u56fd\u5bb6\u6d4b\u7ed8\u5c40\u5236\u8ba2\u7684\u5730\u7406\u4fe1\u606f\u7cfb\u7edf\u7684\u5750\u6807\u7cfb\u7edf\u3002\u5b83\u662f\u4e00\u79cd\u5bf9\u7ecf\u7eac\u5ea6\u6570\u636e\u7684\u52a0\u5bc6\u7b97\u6cd5\uff0c\u5373\u52a0\u5165\u968f\u673a\u7684\u504f\u5dee\u3002\u56fd\u5185\u51fa\u7248\u7684\u5404\u79cd\u5730\u56fe\u7cfb\u7edf\uff08\u5305\u62ec\u7535\u5b50\u5f62\u5f0f\uff09\uff0c\u51fa\u4e8e\u56fd\u5bb6\u5b89\u5168\u8003\u8651\uff0c\u5fc5\u987b\u81f3\u5c11\u91c7\u7528`GCJ-02`\u5bf9\u5730\u7406\u4f4d\u7f6e\u8fdb\u884c\u9996\u6b21\u52a0\u5bc6\u3002\u56fd\u5185\u817e\u8baf\u5730\u56fe\u548c\u9ad8\u5fb7\u5730\u56fe\u90fd\u91c7\u7528\u4e86`GCJ-02`\u706b\u661f\u5750\u6807\u7cfb\u3002\\n\\n### `BD-09`\u5750\u6807\u7cfb\uff1a\\n\\n\u767e\u5ea6\u5750\u6807\u7cfb\uff0c\u4e5f\u5c31\u662f\u5728`GCJ-02`\u7684\u57fa\u7840\u4e0a\uff0c\u8fdb\u884c\u4e86`BD-09`\u4e8c\u6b21\u52a0\u5bc6\u63aa\u65bd\u751f\u6210\u7684\u4e00\u79cd\u5750\u6807\u7cfb\u3002\\n\\n`GCJ-02`(\u706b\u661f\uff0c\u817e\u8baf) \u5750\u6807\u548c`BD-09`(\u767e\u5ea6) \u5750\u6807\u76f8\u4e92\u8f6c\u6362\u7684\u51fd\u6570`PHP`\u7248\u672c\uff1a\\n\\n``` js \\n /*\\n \u4e2d\u56fd\u6b63\u5e38GCJ02\u5750\u6807----\x3e\u767e\u5ea6\u5730\u56feBD09\u5750\u6807\\n \u817e\u8baf\u5730\u56fe\u7528\u7684\u4e5f\u662fGCJ02\u5750\u6807\\n @param double $lat \u7eac\u5ea6\\n @param double $lng \u7ecf\u5ea6\\n */\\n function Convert_GCJ02_To_BD09($lat,$lng){\\n     $x_pi = 3.14159265358979324 * 3000.0 / 180.0;\\n     $x = $lng;\\n     $y = $lat;\\n     $z =sqrt($x * $x + $y * $y) + 0.00002 * sin($y * $x_pi);\\n     $theta = atan2($y, $x) + 0.000003 * cos($x * $x_pi);\\n     $lng = $z * cos($theta) + 0.0065;\\n     $lat = $z * sin($theta) + 0.006;\\n     return array(\'lng\'=>$lng,\'lat\'=>$lat);\\n }\\n /*\\n \u767e\u5ea6\u5730\u56feBD09\u5750\u6807----\x3e\u4e2d\u56fd\u6b63\u5e38GCJ02\u5750\u6807\\n \u817e\u8baf\u5730\u56fe\u7528\u7684\u4e5f\u662fGCJ02\u5750\u6807\\n @param double $lat \u7eac\u5ea6\\n @param double $lng \u7ecf\u5ea6\\n @return array();\\n */\\n function Convert_BD09_To_GCJ02($lat,$lng){\\n     $x_pi = 3.14159265358979324 * 3000.0 / 180.0;\\n     $x = $lng - 0.0065;\\n     $y = $lat - 0.006;\\n     $z = sqrt($x * $x + $y * $y) - 0.00002 * sin($y * $x_pi);\\n     $theta = atan2($y, $x) - 0.000003 * cos($x * $x_pi);\\n     $lng = $z * cos($theta);\\n     $lat = $z * sin($theta);\\n     return array(\'lng\'=>$lng,\'lat\'=>$lat);\\n }\\n```"},{"id":"/22709","metadata":{"permalink":"/docusaurus/blog/22709","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/03-25-22709.md","source":"@site/blog/2019/03-25-22709.md","title":"\u4f7f\u7528\u5fae\u4fe1\u516c\u4f17\u53f7\u548c\u767e\u5ea6\u5730\u56fe\u83b7\u53d6\u4f4d\u7f6e","description":"1\u3001\u5f15\u5165\u5730\u56fe jsSdk","date":"2019-03-25T12:34:03.000Z","formattedDate":"2019\u5e743\u670825\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":3.1,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u4f7f\u7528\u5fae\u4fe1\u516c\u4f17\u53f7\u548c\u767e\u5ea6\u5730\u56fe\u83b7\u53d6\u4f4d\u7f6e","ID":"22709","date":"2019-03-25 12:34:03","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/22709","type":"blog"},"prevItem":{"title":"\u767e\u5ea6\u5730\u56fe\uff08BD-09\uff09\u548c\u817e\u8baf\u5730\u56fe\uff08GCJ-02\uff09\u5750\u6807\u7cfb\u8f6c\u6362\uff08PHP\u7248\uff09","permalink":"/docusaurus/blog/22722"},"nextItem":{"title":"mysql\uff0cphp\u548cjs\u6839\u636e\u7ecf\u7eac\u5ea6\u8ba1\u7b97\u8ddd\u79bb","permalink":"/docusaurus/blog/22692"}},"content":"\x3c!--truncate--\x3e\\n\\n1\u3001\u5f15\u5165\u5730\u56fe jsSdk\\n\\n``` js \\n<script src=\\"//res2.wx.qq.com/open/js/jweixin-1.4.0.js\\"><\/script>\\n<script src=\\"//api.map.baidu.com/api?v=3.0&ak=ak\\"><\/script> \\n```\\n\\n> \u6ce8\u610f\uff1a\u5fae\u4fe1\u516c\u4f17\u53f7\u9700\u8981appID\u548cappSecret\uff0c\u767e\u5ea6\u5730\u56fe\u9700\u8981\u7533\u8bf7ak\\n\\n\u5fae\u4fe1jsSdk\u914d\u7f6e\uff1a\\n\\n``` js \\nwx.config({\\n    debug: true, // \u5f00\u542f\u8c03\u8bd5\u6a21\u5f0f,\u8c03\u7528\u7684\u6240\u6709api\u7684\u8fd4\u56de\u503c\u4f1a\u5728\u5ba2\u6237\u7aefalert\u51fa\u6765\uff0c\u82e5\u8981\u67e5\u770b\u4f20\u5165\u7684\u53c2\u6570\uff0c\u53ef\u4ee5\u5728pc\u7aef\u6253\u5f00\uff0c\u53c2\u6570\u4fe1\u606f\u4f1a\u901a\u8fc7log\u6253\u51fa\uff0c\u4ec5\u5728pc\u7aef\u65f6\u624d\u4f1a\u6253\u5370\u3002\\n    appId: \'\', // \u5fc5\u586b\uff0c\u516c\u4f17\u53f7\u7684\u552f\u4e00\u6807\u8bc6\\n    timestamp: , // \u5fc5\u586b\uff0c\u751f\u6210\u7b7e\u540d\u7684\u65f6\u95f4\u6233\\n    nonceStr: \'\', // \u5fc5\u586b\uff0c\u751f\u6210\u7b7e\u540d\u7684\u968f\u673a\u4e32\\n    signature: \'\',// \u5fc5\u586b\uff0c\u7b7e\u540d\\n    jsApiList: [\'getLocation\'] // \u5fc5\u586b\uff0c\u9700\u8981\u4f7f\u7528\u7684JS\u63a5\u53e3\u5217\u8868\\n}); \\n```\\n\\n2\u3001\u83b7\u53d6\u5730\u7406\u4f4d\u7f6e\\n\\n- \u9996\u5148\u5224\u65ad\u662f\u5426\u5fae\u4fe1\\n- \u83b7\u53d6\u5fae\u4fe1\u83b7\u53d6\u7ecf\u7eac\u5ea6\u8f6c\u4e3a\u767e\u5ea6\u5730\u56fe\u7684\u7ecf\u7eac\u5ea6\\n- \u6216\u8005\u76f4\u63a5\u4f7f\u7528\u767e\u5ea6\u5730\u56fe\u83b7\u53d6\\n- \u901a\u8fc7\u51fd\u6570\u56de\u8c03\uff0c\u4f7f\u7528\u7ecf\u7eac\u5ea6\u4f4d\u7f6e\\n\\n\u5224\u65ad\u662f\u5fae\u4fe1\uff1a\\n\\n``` js \\n//\u5224\u65ad\u662f\u5426\u662f\u5fae\u4fe1\u6d4f\u89c8\u5668\u7684\u51fd\u6570\\nfunction isWeiXin() {\\n    //window.navigator.userAgent\u5c5e\u6027\u5305\u542b\u4e86\u6d4f\u89c8\u5668\u7c7b\u578b\u3001\u7248\u672c\u3001\u64cd\u4f5c\u7cfb\u7edf\u7c7b\u578b\u3001\u6d4f\u89c8\u5668\u5f15\u64ce\u7c7b\u578b\u7b49\u4fe1\u606f\uff0c\u8fd9\u4e2a\u5c5e\u6027\u53ef\u4ee5\u7528\u6765\u5224\u65ad\u6d4f\u89c8\u5668\u7c7b\u578b\\n    var ua = window.navigator.userAgent.toLowerCase();\\n    //\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914dua\u4e2d\u662f\u5426\u542b\u6709MicroMessenger\u5b57\u7b26\u4e32\\n    if (ua.match(/MicroMessenger/i) == \'micromessenger\') {\\n        return true;\\n    } else {\\n        return false;\\n    }\\n} \\n```\\n\\n\u83b7\u53d6\u7ecf\u7eac\u5ea6\uff1a\\n\\n``` js \\n//\u83b7\u53d6\u6211\u7684\u4f4d\u7f6e\u7ecf\u7eac\u5ea6\\nfunction myLngLat(callback) {\\n    //\u9ed8\u8ba4\u5e02\u6c11\u4e2d\u5fc3\\n    var longitude = 114.052031, latitude = 22.54639;\\n    var myLng = sessionStorage.getItem(\'myLng\'), myLat = sessionStorage.getItem(\'myLat\');\\n    if (myLng && myLat) {\\n        callback(myLng, myLat)\\n    } else {\\n        if (isWeiXin()) {\\n            wx.ready(function () {\\n                wx.getLocation({\\n                    type: \'wgs84\', // \u9ed8\u8ba4\u4e3awgs84\u7684gps\u5750\u6807\uff0c\u5982\u679c\u8981\u8fd4\u56de\u76f4\u63a5\u7ed9openLocation\u7528\u7684\u706b\u661f\u5750\u6807\uff0c\u53ef\u4f20\u5165\'gcj02\'\\n                    success: function (res) {\\n                        latitude = res.latitude; // \u7eac\u5ea6\uff0c\u6d6e\u70b9\u6570\uff0c\u8303\u56f4\u4e3a90 ~ -90\\n                        longitude = res.longitude; // \u7ecf\u5ea6\uff0c\u6d6e\u70b9\u6570\uff0c\u8303\u56f4\u4e3a180 ~ -180\u3002\\n                        // \u8f6c\u6210\u767e\u5ea6\u5730\u56fe\\n                        $.ajax({\\n                            url: \'http://api.map.baidu.com/geoconv/v1/?coords=\' + longitude + \',\' + latitude + \'&from=1&to=5&ak=ak\',\\n                            type: \'GET\',\\n                            dataType: \'jsonp\',\\n                            processData: false,\\n                            success: function (res) {\\n                                console.log(res)\\n                                if (res.status == 0) {\\n                                    longitude = res.result[0].x;\\n                                    latitude = res.result[0].y;\\n                                }\\n                                //\u7ecf\u7eac\u5ea6\\n                                callback(longitude, latitude);\\n                            }\\n                        })\\n                    }\\n                })\\n            })\\n        }\\n        else {\\n            // \u767e\u5ea6\u5730\u56feAPI\u529f\u80fd\\n            var geolocation = new BMap.Geolocation();\\n            geolocation.getCurrentPosition(function (r) {\\n                if (this.getStatus() == BMAP_STATUS_SUCCESS) {\\n                    var mk = new BMap.Marker(r.point);\\n                    console.log(r.point.lng, r.point.lat);\\n                    //alert(\'\u60a8\u7684\u4f4d\u7f6e\uff1a\'+r.point.lng+\',\'+r.point.lat);\\n                    longitude = r.point.lng;\\n                    latitude = r.point.lat;\\n                    //\u7ecf\u7eac\u5ea6\\n                    sessionStorage.setItem(\'myLng\', longitude)\\n                    sessionStorage.setItem(\'myLat\', latitude)\\n                } else {\\n                    alert(\'\u5b9a\u4f4d\u5931\u8d25\uff0c\u8bf7\u5141\u8bb8\u5730\u56fe\u83b7\u53d6\u60a8\u7684\u4f4d\u7f6e\uff01\');\\n                    console.log(\'failed\' + this.getStatus());\\n                }\\n                callback(longitude, latitude);\\n            }, {enableHighAccuracy: true});\\n        }\\n    }\\n} \\n```\\n\\n3\u3001\u4f7f\u7528\u5730\u7406\u4f4d\u7f6e\\n\\n``` js \\nmyLngLat(function(myLng,myLat){\\n    console.log(myLng,myLat)\\n}) \\n```\\n\\n\u5728\u5fae\u4fe1\u4e2d\u4f7f\u7528\u516c\u53f7\u7684\u63a5\u53e3\u83b7\u53d6\u5730\u7406\u4f4d\u7f6e\u4f1a\u66f4\u51c6\u786e\u4e9b"},{"id":"/22692","metadata":{"permalink":"/docusaurus/blog/22692","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/03-12-22692/index.md","source":"@site/blog/2019/03-12-22692/index.md","title":"mysql\uff0cphp\u548cjs\u6839\u636e\u7ecf\u7eac\u5ea6\u8ba1\u7b97\u8ddd\u79bb","description":"\u6839\u636e\u7ecf\u7eac\u5ea6\u8ba1\u7b97\u8ddd\u79bb\u516c\u5f0f","date":"2019-03-12T16:28:00.000Z","formattedDate":"2019\u5e743\u670812\u65e5","tags":[{"label":"server","permalink":"/docusaurus/blog/tags/server"},{"label":"php-usage","permalink":"/docusaurus/blog/tags/php-usage"}],"readingTime":3.135,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"mysql\uff0cphp\u548cjs\u6839\u636e\u7ecf\u7eac\u5ea6\u8ba1\u7b97\u8ddd\u79bb","ID":"22692","date":"2019-03-12 16:28:00","categories":["server","php-usage"],"tags":["server","php-usage"],"authors":["lzw"],"slug":"/22692","type":"blog"},"prevItem":{"title":"\u4f7f\u7528\u5fae\u4fe1\u516c\u4f17\u53f7\u548c\u767e\u5ea6\u5730\u56fe\u83b7\u53d6\u4f4d\u7f6e","permalink":"/docusaurus/blog/22709"},"nextItem":{"title":"\u5982\u4f55\u7981\u7528http\u7684delete put trace \u65b9\u6cd5","permalink":"/docusaurus/blog/22650"}},"content":"\x3c!--truncate--\x3e\\n\\n### \u6839\u636e\u7ecf\u7eac\u5ea6\u8ba1\u7b97\u8ddd\u79bb\u516c\u5f0f\\n\\n![](./images/1345407982.jpg)\\n\\n> \u56fe\u7247\u6765\u81ea\u4e92\u8054\u7f51\\n\\n\u5bf9\u4e0a\u9762\u7684\u516c\u5f0f\u89e3\u91ca\u5982\u4e0b\uff1a\\n\\n1. Lung1 Lat1\u8868\u793aA\u70b9\u7ecf\u7eac\u5ea6\uff0c Lung2 Lat2\u8868\u793aB\u70b9\u7ecf\u7eac\u5ea6\uff1b\\n2. a=Lat1 \u2013 Lat2 \u4e3a\u4e24\u70b9\u7eac\u5ea6\u4e4b\u5dee b=Lung1 -Lung2 \u4e3a\u4e24\u70b9\u7ecf\u5ea6\u4e4b\u5dee\uff1b\\n3. 6378.137\u4e3a\u5730\u7403\u534a\u5f84\uff0c\u5355\u4f4d\u4e3a\u5343\u7c73\uff1b\\n4. \u8ba1\u7b97\u51fa\u6765\u7684\u7ed3\u679c\u5355\u4f4d\u4e3a\u5343\u7c73\uff0c\u82e5\u5c06\u534a\u5f84\u6539\u4e3a\u7c73\u4e3a\u5355\u4f4d\u5219\u8ba1\u7b97\u7684\u7ed3\u679c\u5355\u4f4d\u4e3a\u7c73\u3002\\n5. \u8ba1\u7b97\u7cbe\u5ea6\u4e0e\u8c37\u6b4c\u5730\u56fe\u7684\u8ddd\u79bb\u7cbe\u5ea6\u5dee\u4e0d\u591a\uff0c\u76f8\u5dee\u8303\u56f4\u57280.2\u7c73\u4ee5\u4e0b\u3002\\n\\n### \u53c2\u6570\u8bf4\u660e\\n\\nlng\uff1a\u7ecf\u5ea6  \\nlat\uff1a\u7eac\u5ea6  \\n\u5730\u7403\u534a\u5f84\uff1a6378.137\uff08\u5343\u7c73\uff09\\n\\n\u4e00\u822c\u5730\u56fe\u4e0a\u663e\u793a\u7684\u5750\u6807\u987a\u5e8f\u4e3a\uff0c\u7eac\u5ea6\u5728\u524d\uff08\u8303\u56f4-90 ~ 90\uff09\uff0c\u7ecf\u5ea6\u5728\u540e\uff08\u8303\u56f4-180 ~ 180\uff09\\n\\n### \u5404\u79cd\u8bed\u8a00\u8ba1\u7b97\u8ddd\u79bb\u7684\u4ee3\u7801\\n\\n> \u8fd9\u79cd\u8ba1\u7b97\u65b9\u5f0f\u4e00\u822c\u90fd\u662f\u76f4\u7ebf\u8ddd\u79bb\\n\\nsql\u8bed\u53e5\\n\\n``` js \\nSELECT\\n    *,\\n    6378.138 * 2 * ASIN(\\n      SQRT(\\n        POW(\\n          SIN(\\n            (\\n              \'.$lat.\' * PI() / 180 - lat * PI() / 180\\n            ) / 2\\n          ), 2\\n        ) + COS(\'.$lat.\' * PI() / 180) * COS(lat * PI() / 180) * POW(\\n          SIN(\\n            (\\n              \'.$lng.\' * PI() / 180 - lng * PI() / 180\\n            ) / 2\\n          ), 2\\n        )\\n      )\\n    ) *1000 AS distance\\nFROM\\n    distance\\nORDER BY\\n    distance ASC\\n```\\n\\nphp\u8ba1\u7b97\u8ddd\u79bb\\n\\n``` js \\n/**\\n * \u6839\u636e\u4e24\u70b9\u95f4\u7684\u7ecf\u7eac\u5ea6\u8ba1\u7b97\u8ddd\u79bb\\n * @param $lng1\\n * @param $lat1\\n * @param $lng2\\n * @param $lat2\\n * @return int\\n */\\npublic static function getDistance($lng1, $lat1, $lng2, $lat2)\\n{\\n    //\u5c06\u89d2\u5ea6\u8f6c\u4e3a\u72d0\u5ea6\\n    $radLat1 = deg2rad($lat1);//deg2rad()\u51fd\u6570\u5c06\u89d2\u5ea6\u8f6c\u6362\u4e3a\u5f27\u5ea6\\n    $radLat2 = deg2rad($lat2);\\n    $radLng1 = deg2rad($lng1);\\n    $radLng2 = deg2rad($lng2);\\n    $a = $radLat1 - $radLat2;\\n    $b = $radLng1 - $radLng2;\\n    $s = 2 * asin(sqrt(pow(sin($a / 2), 2) + cos($radLat1) * cos($radLat2) * pow(sin($b / 2), 2))) * 6378.137 * 1000;\\n    return $s;\\n}\\n```\\n\\njs\u6c42\u8ddd\u79bb\u7684\u65b9\u6cd5\\n\\n``` js \\n/**\\n * \u8f6c\u6362\u5f27\u5ea6\\n * @param d\\n * @returns {number}\\n */\\nfunction getRad(d){\\n    var PI = Math.PI;\\n    return d*PI/180.0;\\n}\\n/**\\n * \u6839\u636e\u7ecf\u7eac\u5ea6\u8ba1\u7b97\u4e24\u70b9\u95f4\u8ddd\u79bb\\n * @param lng1\\n * @param lat1\\n * @param lng2\\n * @param lat2\\n * @returns {number|*}\\n * @constructor\\n */\\nfunction CoolWPDistance(lng1,lat1,lng2,lat2){\\n    var f = getRad((lat1 + lat2)/2);\\n    var g = getRad((lat1 - lat2)/2);\\n    var l = getRad((lng1 - lng2)/2);\\n    var sg = Math.sin(g);\\n    var sl = Math.sin(l);\\n    var sf = Math.sin(f);\\n    var s,c,w,r,d,h1,h2;\\n    var a = 6378137.0;//The Radius of eath in meter.\\n    var fl = 1/298.257;\\n    sg = sg*sg;\\n    sl = sl*sl;\\n    sf = sf*sf;\\n    s = sg*(1-sl) + (1-sf)*sl;\\n    c = (1-sg)*(1-sl) + sf*sl;\\n    w = Math.atan(Math.sqrt(s/c));\\n    r = Math.sqrt(s*c)/w;\\n    d = 2*w*a;\\n    h1 = (3*r -1)/2/c;\\n    h2 = (3*r +1)/2/s;\\n    s = d*(1 + fl*(h1*sf*(1-sg) - h2*(1-sf)*sg));\\n    if(s >= 1000 && s <= 99000){\\n        var kilometer = s/1000;\\n        s = kilometer.toFixed(1) + \'km\';\\n    }else if(s > 99000){\\n        s = \'>99km\';\\n    }else{\\n        s = Math.round(s) + \'m\';\\n    }\\n    // s = s/1000;\\n    // s = s.toFixed(2);//\u6307\u5b9a\u5c0f\u6570\u70b9\u540e\u7684\u4f4d\u6570\u3002\\n    return s;\\n}\\n```\\n\\n\u4ee5\u4e0a\u4ee3\u7801\u5927\u90e8\u5206\u6765\u81ea\u7f51\u4e0a\u6536\u96c6\uff0c\u7ecf\u8fc7\u9a8c\u8bc1\u8fc7\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528"},{"id":"/22650","metadata":{"permalink":"/docusaurus/blog/22650","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/02-25-22650.md","source":"@site/blog/2019/02-25-22650.md","title":"\u5982\u4f55\u7981\u7528http\u7684delete put trace \u65b9\u6cd5","description":"1\u3001Apache\u5728httpd.conf\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a","date":"2019-02-25T07:36:01.000Z","formattedDate":"2019\u5e742\u670825\u65e5","tags":[{"label":"server","permalink":"/docusaurus/blog/tags/server"},{"label":"nginx","permalink":"/docusaurus/blog/tags/nginx"}],"readingTime":0.21,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u5982\u4f55\u7981\u7528http\u7684delete put trace \u65b9\u6cd5","ID":"22650","date":"2019-02-25 07:36:01","categories":["server","nginx"],"tags":["server","nginx"],"authors":["lzw"],"slug":"/22650","type":"blog"},"prevItem":{"title":"mysql\uff0cphp\u548cjs\u6839\u636e\u7ecf\u7eac\u5ea6\u8ba1\u7b97\u8ddd\u79bb","permalink":"/docusaurus/blog/22692"},"nextItem":{"title":"h5\u5229\u7528cropper.js\u5b9e\u73b0\u56fe\u7247\u88c1\u526a","permalink":"/docusaurus/blog/22645"}},"content":"\x3c!--truncate--\x3e\\n\\n1\u3001Apache\u5728httpd.conf\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a\\n\\n``` js \\n<Location \\"/\\">\\n   AllowMethods GET POST\\n</Location>\\n```\\n\\n\u53c2\u8003\uff1a[https://httpd.apache.org/docs/2.4/mod/mod\\\\_allowmethods.html](https://httpd.apache.org/docs/2.4/mod/mod_allowmethods.html)\\n\\n2\u3001Nginx\u5728nginx.conf\u4e2d\u8fdb\u884c\u5982\u4e0b\u8bbe\u7f6e\\n\\n``` js \\nif ($request_method !~ ^(GET|HEAD|POST)$ ) {\\n   return 403;\\n}\\n```"},{"id":"/22645","metadata":{"permalink":"/docusaurus/blog/22645","editUrl":"https://github.com/lzwdot/docusaurus/blog/2019/02-13-22645.md","source":"@site/blog/2019/02-13-22645.md","title":"h5\u5229\u7528cropper.js\u5b9e\u73b0\u56fe\u7247\u88c1\u526a","description":"\u6700\u8fd1\u4e3a\u4e86\u5b9e\u73b0h5\u56fe\u7247\u88c1\u526a\u529f\u80fd\uff0c\u5728\u7f51\u4e0a\u67e5\u9605\u4e86\u5f88\u591a\u8d44\u6599\uff0c\u6700\u540e\u627e\u5230cropper.js\u975e\u5e38\u597d\u7528\uff0c\u4ee5\u6b64\u8bb0\u5f55\u4e0b\u5b9e\u73b0\u8fc7\u7a0b\uff1a","date":"2019-02-13T15:10:34.000Z","formattedDate":"2019\u5e742\u670813\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":5.285,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"h5\u5229\u7528cropper.js\u5b9e\u73b0\u56fe\u7247\u88c1\u526a","ID":"22645","date":"2019-02-13 15:10:34","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/22645","type":"blog"},"prevItem":{"title":"\u5982\u4f55\u7981\u7528http\u7684delete put trace \u65b9\u6cd5","permalink":"/docusaurus/blog/22650"},"nextItem":{"title":"Windows\u4e0b\u7528Nginx\u914d\u7f6ehttps\u670d\u52a1\u5668","permalink":"/docusaurus/blog/22177"}},"content":"\x3c!--truncate--\x3e\\n\\n\u6700\u8fd1\u4e3a\u4e86\u5b9e\u73b0h5\u56fe\u7247\u88c1\u526a\u529f\u80fd\uff0c\u5728\u7f51\u4e0a\u67e5\u9605\u4e86\u5f88\u591a\u8d44\u6599\uff0c\u6700\u540e\u627e\u5230cropper.js\u975e\u5e38\u597d\u7528\uff0c\u4ee5\u6b64\u8bb0\u5f55\u4e0b\u5b9e\u73b0\u8fc7\u7a0b\uff1a\\n\\n### \u5173\u4e8ecropper.js\\n\\n> cropper\u662f\u4e00\u6b3e\u4f7f\u7528\u7b80\u5355\u4e14\u529f\u80fd\u5f3a\u5927\u7684\u56fe\u7247\u526a\u88c1js\u63d2\u4ef6\u3002\u8be5\u56fe\u7247\u526a\u88c1\u63d2\u4ef6\u652f\u6301\u56fe\u7247\u653e\u5927\u7f29\u5c0f\uff0c\u652f\u6301\u9f20\u6807\u6eda\u8f6e\u64cd\u4f5c\uff0c\u652f\u6301\u56fe\u7247\u65cb\u8f6c\uff0c\u652f\u6301\u89e6\u6478\u5c4f\u8bbe\u5907\uff0c\u652f\u6301canvas\uff0c\u5e76\u4e14\u652f\u6301\u8de8\u6d4f\u89c8\u5668\u4f7f\u7528  \\n> \u5b98\u65b9\u7f51\u7ad9\uff1a[http://fengyuanchen.github.io/cropper/](http://fengyuanchen.github.io/cropper/)\\n\\n## \u524d\u7aef\u56fe\u7247\u88c1\u526a\u5904\u7406\\n\\n1. \u5f15\u5165cropper\u6587\u4ef6\uff0c\u521d\u59cb\u5316\u6587\u6863\u7ed3\u6784\\n\\n``` js \\n<!DOCTYPE html>\\n<html>\\n<head>\\n<link rel=\\"stylesheet\\" href=\\"./cropper.min.css\\">\\n</head>\\n<body>\\n    \x3c!--\u6587\u4ef6\u4e0a\u4f20--\x3e\\n    <input type=\\"file\\" class=\\"js-uploadfile\\">\\n    \x3c!--\u786e\u5b9a\u88c1\u526a--\x3e\\n    <input type=\\"button\\" class=\\"js-ok\\" value=\\"\u88c1\u526a\\">\\n    \x3c!--cropper\u57fa\u672c\u7ed3\u6784--\x3e\\n    <div class=\\"container js-container\\">\\n        <img class=\\"js-image\\" src=\\"\\">\\n    </div>\\n    \x3c!--\u88c1\u526a\u7ed3\u679c\u663e\u793a--\x3e\\n    <br/>\\n    <div class=\\"js-result\\"></div>\\n    <script src=\\"./jquery-1.10.1.min.js\\"><\/script>\\n    <script src=\\"./cropper.min.js\\"><\/script>\\n    <script>//\u5176\u4ed6js\u4ee3\u7801<\/script>\\n</body>\\n</html> \\n```\\n\\n\u4ee5\u4e0a\u4ee3\u7801\u5305\u542b\u6587\u4ef6\u4e0a\u4f20\uff0c\u88c1\u526a\u6309\u94ae\u548ccropper\u57fa\u672c\u7ed3\u6784\uff0c\u6253\u597d\u7ed3\u6784\u67b6\u5b50\uff0c\u4e0b\u9762\u5c31\u662f\u529f\u80fd\u7684\u5b9e\u73b0\\n\\n1. \u6838\u5fc3js\u4ee3\u7801\uff0c\u5b9e\u73b0\u529f\u80fd\u6709\uff1a\\n\\n- \u6587\u4ef6\u4e0a\u4f20\\n- \u56fe\u7247\u88c1\u526a\\n- \u56fe\u7247\u63d0\u4ea4\\n\\n\u6839\u636einput\\\\[type=file\\\\]\u7684\u503c\u53d8\u5316\u83b7\u53d6\u56fe\u7247\u7684base64\u6587\u4ef6\u4fe1\u606f\\n\\n``` js \\nvar cropper;\\n$(\\".js-uploadfile\\").on(\\"change\\", function () {\\n    var fr = new FileReader();\\n    var file = this.files[0];\\n    if (!/image/w+/.test(file.type)) {\\n        showTips(file.name + \\"\u4e0d\u662f\u56fe\u7247\u6587\u4ef6\uff01\\");\\n        return false;\\n    } else if (file.size > 2 * 1024 * 1024) {\\n        showTips(\'\u56fe\u7247\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc72M\');\\n        return false;\\n    }\\n    fr.readAsDataURL(file);\\n    fr.onload = function () {\\n        //\u8fd9\u91cc\u521d\u59cb\u5316cropper\\n        console.log(fr);\\n        $(\'.js-image\').attr(\'src\',fr.result);\\n        iniCropper()\\n    };\\n}); \\n```\\n\\n\u7136\u540e\u521d\u59cb\u5316cropper\uff0c\u53c2\u6570\u89e3\u91ca\u53c2\u8003\u5b98\u65b9\u6587\u6863\\n\\n``` js \\nvar croppable = false;\\nfunction iniCropper() {\\n    var $image = $(\'.js-image\'),\\n        image = $image[0];\\n    cropper = new Cropper(image, {\\n        dragMode: \'move\',\\n        aspectRatio: 1,\\n        autoCropArea: 0.65,\\n        restore: false,\\n        viewMode: 1,\\n        guides: false,\\n        center: false,\\n        highlight: false,\\n        cropBoxMovable: false,\\n        cropBoxResizable: false,\\n        toggleDragModeOnDblclick: false,\\n        ready: function () {\\n            croppable = true;\\n        }\\n    });\\n} \\n```\\n\\n\u5b9e\u73b0\u88c1\u526a\uff0c\u5e76\u4e0a\u4f20\u56fe\u7247\u3002\u8fd9\u91cc\u9700\u8981\u8c03\u7528\u4e24\u4e2a\u51fd\u6570getRectCanvas\uff0cconvertBase64UrlToBlob\uff1a  \\ngetRectCanvas\uff1a\u7528\u4e8e\u7ed8\u5236\u77e9\u5f62Canvas\uff0c  \\nconvertBase64UrlToBlob\uff1a\u5c06\u4ee5base64\u7684\u56fe\u7247url\u6570\u636e\u8f6c\u6362\u4e3aBlob\\n\\n``` js \\n$(\'.js-ok\').on(\'click\', function () {\\n    var croppedCanvas;\\n    var rectCanvas;\\n    var rectImage;\\n    if (!croppable) {\\n        return false;\\n    }\\n    // Crop\\n    croppedCanvas = cropper.getCroppedCanvas();\\n    //Rect\\n    rectCanvas = getRectCanvas(croppedCanvas);\\n    // Show\\n    rectImage = document.createElement(\'img\');\\n    rectImage.src = rectCanvas.toDataURL();\\n    $(\'.js-result\').html(\'\').append(rectImage);\\n    //var form=document.forms[0];\\n    var formData = new FormData();   //\u8fd9\u91cc\u8fde\u5e26form\u91cc\u7684\u5176\u4ed6\u53c2\u6570\u4e5f\u4e00\u8d77\u63d0\u4ea4\u4e86,\u5982\u679c\u4e0d\u9700\u8981\u63d0\u4ea4\u5176\u4ed6\u53c2\u6570\u53ef\u4ee5\u76f4\u63a5FormData\u65e0\u53c2\u6570\u7684\u6784\u9020\u51fd\u6570\\n    //convertBase64UrlToBlob\u51fd\u6570\u662f\u5c06base64\u7f16\u7801\u8f6c\u6362\u4e3aBlob\\n    formData.append(\\"filename\\", convertBase64UrlToBlob(rectCanvas.toDataURL()));  //append\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u540e\u53f0\u83b7\u53d6\u6570\u636e\u7684\u53c2\u6570\u540d,\u548chtml\u6807\u7b7e\u7684input\u7684name\u5c5e\u6027\u529f\u80fd\u76f8\u540c\\n    //ajax \u63d0\u4ea4form\\n    return false;//\u4e0d\u63d0\u4ea4\\n    $.ajax({\\n        url: \'\',\\n        type: \\"POST\\",\\n        data: formData,\\n        dataType: \\"text\\",\\n        processData: false,         // \u544a\u8bc9jQuery\u4e0d\u8981\u53bb\u5904\u7406\u53d1\u9001\u7684\u6570\u636e\\n        contentType: false,        // \u544a\u8bc9jQuery\u4e0d\u8981\u53bb\u8bbe\u7f6eContent-Type\u8bf7\u6c42\u5934\\n        success: function (res) {\\n            var data = JSON.parse(res);\\n            if (data.status) {\\n                hideLoading();\\n                showTips(data.msg);\\n                setTimeout(function () {\\n                    location.href = \'url?t=\' + (new Date()).getTime();\\n                }, 200);\\n            } else {\\n                console.log(data);\\n            }\\n        },\\n        xhr: function () {            //\u5728jquery\u51fd\u6570\u4e2d\u76f4\u63a5\u4f7f\u7528ajax\u7684XMLHttpRequest\u5bf9\u8c61\\n            var xhr = new XMLHttpRequest();\\n            xhr.upload.addEventListener(\\"progress\\", function (evt) {\\n                if (evt.lengthComputable) {\\n                    var percentComplete = Math.round(evt.loaded * 100 / evt.total);\\n                    console.log(\\"\u6b63\u5728\u63d0\u4ea4...\\" + percentComplete.toString() + \'%\');        //\u5728\u63a7\u5236\u53f0\u6253\u5370\u4e0a\u4f20\u8fdb\u5ea6\\n                }\\n            }, false);\\n            return xhr;\\n        }\\n    });\\n}); \\n```\\n\\n\u529f\u80fd\u51fd\u6570: getRectCanvas\uff1a\u7528\u4e8e\u7ed8\u5236\u77e9\u5f62Canvas\uff0c  \\nconvertBase64UrlToBlob\uff1a\u5c06\u4ee5base64\u7684\u56fe\u7247url\u6570\u636e\u8f6c\u6362\u4e3aBlob\\n\\n``` js \\n//\u7ed8\u5236\u77e9\u5f62canvas\\nfunction getRectCanvas(sourceCanvas) {\\n    var canvas = document.createElement(\'canvas\');\\n    var context = canvas.getContext(\'2d\');\\n    var width = sourceCanvas.width;\\n    var height = sourceCanvas.height;\\n    canvas.width = width;\\n    canvas.height = height;\\n    context.imageSmoothingEnabled = true;\\n    context.drawImage(sourceCanvas, 0, 0, width, height);\\n    context.globalCompositeOperation = \'destination-in\';\\n    context.beginPath();\\n    context.rect(0, 0, width, height);\\n    context.fill();\\n    return canvas;\\n}\\n/**\\n* \u5c06\u4ee5base64\u7684\u56fe\u7247url\u6570\u636e\u8f6c\u6362\u4e3aBlob\\n* @param urlData\\n* \u7528url\u65b9\u5f0f\u8868\u793a\u7684base64\u56fe\u7247\u6570\u636e\\n*/\\nfunction convertBase64UrlToBlob(urlData) {\\n    var bytes = window.atob(urlData.split(\',\')[1]);       //\u53bb\u6389url\u7684\u5934\uff0c\u5e76\u8f6c\u6362\u4e3abyte\\n    //\u5904\u7406\u5f02\u5e38,\u5c06ascii\u7801\u5c0f\u4e8e0\u7684\u8f6c\u6362\u4e3a\u5927\u4e8e0\\n    var ab = new ArrayBuffer(bytes.length);\\n    var ia = new Uint8Array(ab);\\n    for (var i = 0; i < bytes.length; i++) {\\n        ia[i] = bytes.charCodeAt(i);\\n    }\\n    return new Blob([ab], { type: \'image/png\' });\\n} \\n```\\n\\n## \u540e\u7aefphp\u63a5\u6536\u88c1\u526a\u56fe\u7247\u6570\u636e\\n\\n\u63a5\u6536\u6570\u636e\u5206\u4e24\u79cd\u60c5\u51b5\uff1a\\n\\n1. \u63a5\u6536Blob\u6587\u4ef6\u6570\u636e\\n\\n``` js \\n$filename = $_FILES[\'filename\'];\\nmove_uploaded_file($filename[\'tmp_name\'],\'./\'.$filename[\'name\'].\'png\');\\nexit(json_encode([\'status\'=>1,\'msg\'=>\'\u5934\u50cf\u4e0a\u4f20\u6210\u529f\'])); \\n```\\n\\n1. \u63a5\u6536base64\u6587\u4ef6\u6570\u636e\\n\\n``` js \\nheader(\'Content-type:text/html;charset=utf-8\');\\n$base64_image_content = $_FILES[\'filename\'];\\n//\u4fdd\u5b58base64\u5b57\u7b26\u4e32\u4e3a\u56fe\u7247\\n//\u5339\u914d\u51fa\u56fe\u7247\u7684\u683c\u5f0f\\nif (preg_match(\'/^(data:s*image/(w+);base64,)/\', $base64_image_content, $result)) {\\n    $type = $result[2];\\n    $new_file = \\"./test.{$type}\\";\\n    if (file_put_contents($new_file, base64_decode(str_replace($result[1], \'\', $base64_image_content)))) {\\n        echo \'\u65b0\u6587\u4ef6\u4fdd\u5b58\u6210\u529f\uff1a\',\\n        $new_file;\\n    }\\n} \\n```\\n\\n\u597d\u4e86\u5927\u544a\u6210\u529f\uff0c\u4ee5\u4e0a\u5c31\u662fh5\u5229\u7528cropper.js\u5b9e\u73b0\u56fe\u7247\u88c1\u526a\u5b9e\u73b0\u8fc7\u7a0b\\n\\n> demo\u548c\u6e90\u7801\\n\\ndemo:\xa0[https://lzwdot.github.io/html/cropperjs-demo/index.html](https://lzwdot.github.io/html/cropperjs-demo/index.html)  \\n\u6e90\u7801\uff1a[https://github.com/lzwdot/html/tree/master/swiper-demo](https://github.com/lzwdot/html/tree/master/swiper-demo)"},{"id":"/22177","metadata":{"permalink":"/docusaurus/blog/22177","editUrl":"https://github.com/lzwdot/docusaurus/blog/2018/11-08-22177.md","source":"@site/blog/2018/11-08-22177.md","title":"Windows\u4e0b\u7528Nginx\u914d\u7f6ehttps\u670d\u52a1\u5668","description":"\u4ee5Windows 10\u7cfb\u7edf\u4e3a\u4f8b\u3002","date":"2018-11-08T15:09:00.000Z","formattedDate":"2018\u5e7411\u67088\u65e5","tags":[{"label":"server","permalink":"/docusaurus/blog/tags/server"},{"label":"php-usage","permalink":"/docusaurus/blog/tags/php-usage"}],"readingTime":9.44,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"Windows\u4e0b\u7528Nginx\u914d\u7f6ehttps\u670d\u52a1\u5668","ID":"22177","date":"2018-11-08 15:09:00","categories":["server","php-usage"],"tags":["server","php-usage"],"authors":["lzw"],"slug":"/22177","type":"blog"},"prevItem":{"title":"h5\u5229\u7528cropper.js\u5b9e\u73b0\u56fe\u7247\u88c1\u526a","permalink":"/docusaurus/blog/22645"},"nextItem":{"title":"JMeter\u63a5\u53e3\u6d4b\u8bd5\uff0cResponse Data\u8fd4\u56de\u4e2d\u6587\u4e71\u7801\u548cjson\u6570\u636e\u8f6c\u7801","permalink":"/docusaurus/blog/21997"}},"content":"\x3c!--truncate--\x3e\\n\\n\u4ee5Windows 10\u7cfb\u7edf\u4e3a\u4f8b\u3002\\n\\n### \u4e00\u3001\u5b89\u88c5OpenSSL\\n\\n\u5148\u5230[http://slproweb.com/products/Win32OpenSSL.html](http://slproweb.com/products/Win32OpenSSL.html) \u53bb\u4e0b\u8f7dOpenSSL\uff08\u6839\u636e\u7cfb\u7edf\u9009\u62e932\u4f4d\u6216\u800564\u4f4d\u7248\u672c\u4e0b\u8f7d\u5b89\u88c5\uff09\u3002\\n\\n\u7136\u540e\u5b89\u88c5\u5728C:OpenSSL-Win64\u4e0b\u3002\\n\\n\u7136\u540e\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u3002\u5728\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u4e2d\u6dfb\u52a0\u73af\u5883\u53d8\u91cf\uff1a\\n\\n\u53d8\u91cf\u540d\uff1aOPENSSL_HOME\\n\\n\u53d8\u91cf\u503c\uff1aC:OpenSSL-Win64\\\\bin;\\n\\n\uff08\u53d8\u91cf\u503c\u4e3aOPENSSL\u5b89\u88c5\u4f4d\u7f6e\u4e0b\u7684bin\u76ee\u5f55\uff09\\n\\n\u5e76\u5728Path\u53d8\u91cf\u7ed3\u5c3e\u6dfb\u52a0\u4e00\u6761\uff1a %OPENSSL\\\\_HOME%\\n\\n### \u4e8c\u3001\u5b89\u88c5Nginx\\n\\n\u5230[Nginx\u5b98\u7f51](http://nginx.org/en/download.html)\u4e0b\u8f7dNginx\uff0c\u6211\u8fd9\u91cc\u4e0b\u8f7d\u7684\u662f nginx/Windows-1.12.0 \u8fd9\u4e2a\u7248\u672c\u3002\\n\\n\u628a\u4e0b\u8f7d\u597d\u7684\u538b\u7f29\u5305\u89e3\u538b\u51fa\u6765\uff0c\u62f7\u8d1d\u5176\u4e2d\u7684nginx-1.12.0\u76ee\u5f55\u5230c:\u4e0b\u3002\u5e76\u5c06\u6587\u4ef6\u5939\u540d\u5b57\u4fee\u6539\u4e3anginx\u3002\u8fd9\u6837\uff0cNginx\u5c31\u88ab\u5b89\u88c5\u5230\u4e86c:  \\nginx\u76ee\u5f55\u4e0b\u3002\\n\\n\u8fdb\u5165\u5230C:  \\nginx\u76ee\u5f55\u4e0b\uff0c\u53cc\u51fbnginx.exe\u6587\u4ef6\u5373\u53ef\u542f\u52a8\u670d\u52a1\u5668\u3002\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165[http://localhost](http://localhost)\uff0c\u5982\u679c\u53ef\u4ee5\u6210\u529f\u8bbf\u95ee\u5230Nginx\u7684\u6b22\u8fce\u754c\u9762\uff0c\u5219\u8bf4\u660e\u5b89\u88c5\u6210\u529f\u3002\\n\\n### \u4e09\u3001\u751f\u6210\u8bc1\u4e66\\n\\n#### 1\u3001\u9996\u5148\u5728Nginx\u5b89\u88c5\u76ee\u5f55\u4e2d\u521b\u5efassl\u6587\u4ef6\u5939\u7528\u4e8e\u5b58\u653e\u8bc1\u4e66\u3002\u6bd4\u5982\u6211\u7684\u6587\u4ef6\u76ee\u5f55\u4e3a C:\\n\\nginxssl\\n\\n\u5728\u63a7\u5236\u53f0\u4e2d\u6267\u884c\uff1a\\n\\n``` js \\ncd C:\\nginxssl \\n```\\n\\n#### 2\u3001\u521b\u5efa\u79c1\u94a5\\n\\n\u5728\u547d\u4ee4\u884c\u4e2d\u6267\u884c\u547d\u4ee4\uff1a\\n\\n``` js \\nopenssl genrsa -des3 -out test.key 1024     # test\u6587\u4ef6\u540d\u662f\u81ea\u5df1\u968f\u4fbf\u8d77\u5373\u53ef \\n```\\n\\n\u8f93\u5165\u5bc6\u7801\u540e\uff0c\u518d\u6b21\u91cd\u590d\u8f93\u5165\u786e\u8ba4\u5bc6\u7801\u3002\u8bb0\u4f4f\u6b64\u5bc6\u7801\uff0c\u540e\u9762\u4f1a\u7528\u5230\u3002\\n\\n#### 3\u3001\u521b\u5efacsr\u8bc1\u4e66\\n\\n\u5728\u547d\u4ee4\u884c\u4e2d\u6267\u884c\u547d\u4ee4\uff1a\\n\\n``` js \\nopenssl req -new -key test.key -out test.csr \\n```\\n\\n\u5176\u4e2dkey\u6587\u4ef6\u4e3a\u521a\u624d\u751f\u6210\u7684\u6587\u4ef6\u3002\\n\\n\u6267\u884c\u4e0a\u8ff0\u547d\u4ee4\u540e\uff0c\u9700\u8981\u8f93\u5165\u4e00\u7cfb\u5217\u7684\u4fe1\u606f\u3002\u8f93\u5165\u7684\u4fe1\u606f\u4e2d\u6700\u91cd\u8981\u7684\u4e3aCommon Name\uff0c\u8fd9\u91cc\u8f93\u5165\u7684\u57df\u540d\u5373\u4e3a\u6211\u4eec\u8981\u4f7f\u7528https\u8bbf\u95ee\u7684\u57df\u540d \uff0c\u6bd4\u5982\u6211\u8f93\u5165\u7684\u662flocalhost\u3002\u5176\u5b83\u7684\u5185\u5bb9\u968f\u4fbf\u586b\u5373\u53ef\u3002\\n\\n\u4ee5\u4e0a\u6b65\u9aa4\u5b8c\u6210\u540e\uff0cssl\u6587\u4ef6\u5939\u5185\u51fa\u73b0\u4e24\u4e2a\u6587\u4ef6\uff1atest.csr \u548c buduhuis.key\\n\\n#### 4\u3001\u53bb\u9664\u5bc6\u7801\u3002\\n\\n\u5728\u52a0\u8f7dSSL\u652f\u6301\u7684Nginx\u5e76\u4f7f\u7528\u4e0a\u8ff0\u79c1\u94a5\u65f6\u9664\u53bb\u5fc5\u987b\u7684\u53e3\u4ee4\uff0c\u5426\u5219\u4f1a\u5728\u542f\u52a8nginx\u7684\u65f6\u5019\u9700\u8981\u8f93\u5165\u5bc6\u7801\u3002\\n\\n\u590d\u5236test.key\u5e76\u91cd\u547d\u540d\u4e3atest.copy.key\u3002\\n\\n\u5728\u547d\u4ee4\u884c\u4e2d\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u4ee5\u53bb\u9664\u53e3\u4ee4\uff1a\\n\\n``` js \\nopenssl rsa -in test.copy.key -out test.key \\n```\\n\\n\u7136\u540e\u8f93\u5165\u5bc6\u7801\uff0c\u8fd9\u4e2a\u5bc6\u7801\u5c31\u662f\u4e0a\u6587\u4e2d\u5728\u521b\u5efa\u79c1\u94a5\u7684\u65f6\u5019\u8f93\u5165\u7684\u5bc6\u7801\u3002\\n\\n#### 5\u3001\u751f\u6210crt\u8bc1\u4e66\\n\\n\u5728\u547d\u4ee4\u884c\u4e2d\u6267\u884c\u6b64\u547d\u4ee4\uff1a\\n\\n``` js \\nopenssl x509 -req -days 365 -in test.csr -signkey test.key -out test.crt \\n```\\n\\n\u81f3\u6b64\uff0c\u8bc1\u4e66\u751f\u6210\u5b8c\u6bd5\u3002\u6211\u4eec\u53d1\u73b0\uff0cssl\u6587\u4ef6\u5939\u4e2d\u4e00\u5171\u751f\u6210\u4e864\u4e2a\u6587\u4ef6\u3002\u4e0b\u9762\uff0c\u914d\u7f6ehttps\u670d\u52a1\u5668\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u7528\u5230\u7684\u662f\u5176\u4e2d\u7684test.crt\u548ctest.key\u8fd9\u4e24\u4e2a\u6587\u4ef6\u3002\\n\\n### \u56db\u3001\u4fee\u6539Nginx\u7684nginx.conf\u914d\u7f6e\u6587\u4ef6\\n\\n\u6211\u7684\u8fd9\u4e2a\u6587\u4ef6\u5728C:  \\nginxconf\u76ee\u5f55\u4e0b\u3002\u7528\u4efb\u610f\u4e00\u4e2a\u7f16\u8f91\u5668\uff08\u5982Sublime Text\u4e4b\u7c7b\uff09\u6253\u5f00\u8fd9\u4e2anginx.conf\u6587\u4ef6\u3002\\n\\n\u627e\u5230HTTPS server\u914d\u7f6e\u7684\u90a3\u4e00\u6bb5\uff08\u5373\u5305\u542b\u6709listen 443 ssl\u914d\u7f6e\u90a3\u4e00\u6bb5\uff09\u3002\u6211\u4eec\u53d1\u73b0\u8fd9\u6bb5\u4ee3\u7801\u88ab\u6ce8\u91ca\u6389\u4e86\u3002\u6240\u4ee5\uff0c\u9996\u5148\u6211\u4eec\u628a\u8be5\u6bb5\u4ee3\u7801\u524d\u9762\u7684#\u53f7\u53bb\u6389\u3002\u7136\u540e\u5206\u522b\u4fee\u6539\u5176\u4e2d\u7684ssl\\\\_certificate\u548cssl\\\\_certificate\\\\_key\u914d\u7f6e\u9879\u4e3a\u521a\u624d\u6240\u751f\u6210\u7684test.crt\u548ctest.key\u8fd9\u4e24\u4e2a\u6587\u4ef6\u7684\u76ee\u5f55\u3002\u5e76\u914d\u7f6eserver\\\\_name\u4e3alocalhost\u3002\u4fee\u6539\u540e\u7684\u8be5\u6bb5\u914d\u7f6e\u5982\u4e0b\uff1a\\n\\n``` js \\nserver {\\n    listen       443 ssl;\\n    server_name  localhost;\\n    ssl_certificate      C://nginx//ssl//test.crt;  # \u8fd9\u4e2a\u662f\u8bc1\u4e66\u7684crt\u6587\u4ef6\u6240\u5728\u76ee\u5f55\\n    ssl_certificate_key  C://nginx//ssl//test.key;  # \u8fd9\u4e2a\u662f\u8bc1\u4e66key\u6587\u4ef6\u6240\u5728\u76ee\u5f55\\n    ssl_session_cache    shared:SSL:1m;\\n    ssl_session_timeout  5m;\\n    ssl_ciphers  HIGH:!aNULL:!MD5;\\n    ssl_prefer_server_ciphers  on;\\n    location / {\\n      root   html;                  # \u8fd9\u4e2a\u662f\u6307\u5b9a\u4e00\u4e2a\u9879\u76ee\u6240\u5728\u76ee\u5f55\\n      index  index.html index.htm;  # \u8fd9\u4e2a\u662f\u6307\u5b9a\u9996\u9875\u7684\u6587\u4ef6\u540d\\n    }\\n} \\n```\\n\\n\u6ce8\u610f\u4e00\u4e0b\u90a3\u4e24\u4e2a\u8bc1\u4e66\u7684\u6587\u4ef6\u8def\u5f84\u7684\u5199\u6cd5\u3002\\n\\n### \u4e94\u3001Nginx\u7684\u5e38\u7528\u64cd\u4f5c\\n\\n\u5728\u7ee7\u7eed\u540e\u9762\u7684\u5185\u5bb9\u4e4b\u524d\uff0c\u5148\u7b80\u5355\u4ecb\u7ecd\u4e0bWindows\u547d\u4ee4\u884c\u4e2d\u64cd\u4f5cNginx\u7684\u51e0\u4e2a\u5e38\u7528\u7684\u8bed\u53e5\uff1a\\n\\n``` js \\nstart nginx               # \u542f\u52a8Nginx\\nnginx.exe -s stop         # \u5feb\u901f\u505c\u6b62Nginx\uff0c\u53ef\u80fd\u5e76\u4e0d\u4fdd\u5b58\u76f8\u5173\u4fe1\u606f\\nnginx.exe -s quit         # \u5b8c\u6574\u6709\u5e8f\u7684\u505c\u6b62Nginx\uff0c\u5e76\u4fdd\u5b58\u76f8\u5173\u4fe1\u606f\\nnginx.exe -s reload       # \u91cd\u65b0\u8f7d\u5165Nginx\uff0c\u5f53\u914d\u7f6e\u4fe1\u606f\u4fee\u6539\uff0c\u9700\u8981\u91cd\u65b0\u8f7d\u5165\u8fd9\u4e9b\u914d\u7f6e\u65f6\u4f7f\u7528\u6b64\u547d\u4ee4\u3002\\nnginx.exe -s reopen       # \u91cd\u65b0\u6253\u5f00\u65e5\u5fd7\u6587\u4ef6\\nnginx -v                  # \u67e5\u770bNginx\u7248\u672c \\n```\\n\\n\u56e0\u4e3a\u4fee\u6539\u4e86\u914d\u7f6e\u6587\u4ef6\uff0c\u6240\u4ee5\u9700\u8981\u9000\u51fa\u63a7\u5236\u53f0\uff0c\u5e76\u91cd\u65b0\u6253\u5f00\u4e00\u4e2a\u63a7\u5236\u53f0\u3002\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a\\n\\n``` js \\ncd c:\\nginx\\nnginx.exe -s quit\\nstart nginx \\n```\\n\\n\u5373\u9000\u51faNginx\uff0c\u7136\u540e\u518d\u91cd\u65b0\u542f\u52a8\u5b83\u3002\u8fd9\u65f6\u5019\uff0c\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165[https://localhost](https://localhost)\u5e76\u56de\u8f66\u3002\\n\\n\u8fd9\u65f6\u5019\uff0c\u4f60\u53ef\u80fd\u770b\u5230\u201c\u60a8\u7684\u8fde\u63a5\u4e0d\u662f\u79c1\u5bc6\u8fde\u63a5\u201d\u7684\u63d0\u793a\uff0c\u5355\u51fb\u9875\u9762\u4e2d\u7684\u201c\u9ad8\u7ea7\u201d\uff0c\u5e76\u63a5\u7740\u5355\u51fb\u201c\u7ee7\u7eed\u524d\u5f80m.test.com\uff08\u4e0d\u5b89\u5168\uff09\u201d\uff0c\u5c31\u53ef\u4ee5\u770b\u5230Nginx\u7684\u6b22\u8fce\u754c\u9762\u4e86\u3002\u8bf4\u660ehttps\u670d\u52a1\u5668\u5df2\u7ecf\u914d\u7f6e\u6210\u529f\u4e86\u3002\\n\\n\u5982\u679c\u4f60\u53ea\u60f3\u7528[https://localhost\u8bbf\u95ee\u8fd9\u4e2ahttps\u670d\u52a1\u5668](https://localhost\u8bbf\u95ee\u8fd9\u4e2ahttps\u670d\u52a1\u5668)\uff0c\u90a3\u4e48\u4e0b\u9762\u7684\u5185\u5bb9\u4f60\u5c31\u4e0d\u7528\u63a5\u7740\u5f80\u4e0b\u770b\u4e86\u3002\\n\\n\u4f46\u662f\uff0c\u4e5f\u8bb8\u4f60\u53ef\u80fd\u8fd8\u60f3\u8981\u7528\u4e00\u4e2a\u522b\u7684\u57df\u540d\uff08\u4f8b\u5982\uff1a[https://m.test.com](https://m.test.com)\uff09\u6765\u8bbf\u95ee\u8fd9\u4e2a\u670d\u52a1\u5668\u3002\u90a3\u4e48\u600e\u4e48\u505a\u5462\uff1f\u8fd9\u5c31\u9700\u8981\u7ee7\u7eed\u5f80\u4e0b\u770b\u4e86\u3002\\n\\n### \u516d\u3001\u4fee\u6539hosts\u914d\u7f6e\uff0c\u5b9e\u73b0\u57df\u540d\u6620\u5c04\\n\\n\u8981\u60f3\u7528\u522b\u7684\u57df\u540d\u6765\u8bbf\u95ee\u4e0a\u6587\u914d\u7f6e\u597d\u7684https\u670d\u52a1\u5668\uff0c\u4e5f\u5f88\u7b80\u5355\uff0c\u4fee\u6539hosts\u914d\u7f6e\u5c31\u53ef\u4ee5\u4e86\u3002\u4f60\u53ef\u4ee5\u5230[\u8fd9\u91cc](http://www.xiazaiba.com/html/23970.html)\u4e0b\u8f7d\u4e00\u4e2ahosts\u7ba1\u7406\u5de5\u5177\u2014\u2014SwitchHosts\u3002\u5b89\u88c5\u53f7\u597d\u4e4b\u540e\uff0c\u4ee5\u7ba1\u7406\u5458\u8eab\u4efd\u8fd0\u884c\u5b83\u3002\u5e76\u6dfb\u52a0\u4e0a\u4e00\u4e2ahosts\u9879\uff1a\\n\\n``` js \\n127.0.0.1  m.test.com \\n```\\n\\n\u8fd9\u6837\uff0c\u4f60\u5c31\u53ef\u4ee5\u901a\u8fc7[https://m.test.com](https://m.test.com)\u6765\u8bbf\u95ee\u914d\u7f6e\u597d\u7684https\u670d\u52a1\u5668\u4e86\u3002\\n\\n\u987a\u4fbf\u63d0\u4e00\u4e0b\uff0c\u5173\u4e8eMac\u73af\u5883\u4e0b\u5982\u4f55\u6620\u5c04\u4e00\u4e2ahttp\u8def\u5f84\u5230\u4e00\u4e2ahttps\u8def\u5f84\uff0c\u53ef\u4ee5\u901a\u8fc7Charles\u5de5\u5177\u6765\u5b9e\u73b0\u3002\u53c2\u89c1[\u8fd9\u91cc](http://www.cnblogs.com/jiasm/archive/2016/11/14/6063317.html)\u3002\\n\\n### \u4e03\u3001\u53ef\u80fd\u9047\u5230\u7684\u95ee\u9898\u53ca\u5176\u89e3\u51b3\u529e\u6cd5\\n\\n#### 1\u3001\u7aef\u53e3\u88ab\u5360\u7528\\n\\n\u5b8c\u6210\u4e0a\u8ff0\u5de5\u4f5c\u4e4b\u540e\uff0c\u5728\u542f\u52a8nginx\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u63d0\u793a\u7aef\u53e3\u88ab\u5360\u7528\u6216\u8005\u867d\u7136\u6ca1\u6709\u51fa\u9519\u63d0\u793a\uff0c\u4f46\u662f\u8bbf\u95eehttps\u9875\u9762\u5374\u8bbf\u95ee\u4e0d\u5230\u7684\u60c5\u51b5\uff0c\u8fd9\u65f6\u5019\uff0c\u4f60\u9700\u8981\u68c0\u67e5\u4e00\u4e0b443\u7aef\u53e3\u662f\u5426\u5df2\u7ecf\u88ab\u5360\u7528\u4e86\u3002\\n\\n\u53ef\u4ee5\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\uff1a\\n\\n``` js \\nnetstat -ano | findstr 443 \\n```\\n\\n\u4e00\u822c\u6765\u8bf4\uff0c\u5982\u679c\u6709\u7a0b\u5e8f\u5728\u5360\u7528\u7684\u8bdd\uff0c\u8f93\u51fa\u7684\u7b2c\u4e00\u884c\u7684\u6700\u540e\u4e00\u5217\u5c31\u662f\u5360\u7528\u4e86443\u7aef\u53e3\u7684PID\u3002\\n\\n\u627e\u5230\u8fd9\u4e2aPID\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u7528\u5982\u4e0b\u547d\u4ee4\u5f3a\u5236\u7ed3\u675f\u5b83\uff1a\\n\\n``` js \\ntaskkill /F /IM \u8fd9\u91cc\u8f93\u5165\u4e0a\u9762\u627e\u51fa\u6765\u7684PID \\n```\\n\\n#### 2\u3001\u51fa\u73b0\u9519\u8bef\u63d0\u793a\uff1a\u201c\u60a8\u7684\u8fde\u63a5\u4e0d\u662f\u79c1\u5bc6\u8fde\u63a5\u201d\\n\\n\u70b9\u51fb\u9875\u9762\u6700\u5e95\u90e8\u7684\u201c\u9ad8\u7ea7\u201d\uff0c\u7136\u540e\u70b9\u201c\u7ee7\u7eed\u524d\u5f80WALLET.WALLET.COM\uff08\u4e0d\u5b89\u5168\uff09\u201d\\n\\n#### 3\u3001\u9759\u6001\u7684\u9875\u9762\u8d44\u6e90\u5728\u5f00\u53d1\u8005\u5de5\u5177\u7684Network\u4e2d\u663e\u793a\u7684Status\u4e3afailed\\n\\n\u53ef\u4ee5\u5728\u5f00\u53d1\u8005\u5de5\u5177\u7684Network\u4e2d\u7684\u8be5\u8d44\u6e90\u4e0a\u53f3\u952e\u5355\u51fb\u5b83\uff0c\u7136\u540e\u9009\u62e9\u201cOpen in new tab\u201d\uff0c\u63a5\u7740\u4f1a\u63d0\u793a\u201c\u60a8\u7684\u8fde\u63a5\u4e0d\u662f\u79c1\u5bc6\u8fde\u63a5\u201d\uff0c\u7136\u540e\u6309\u7167\u4e0a\u9762\u7684\u95ee\u98982\u7684\u5904\u7406\u65b9\u5f0f\u8fdb\u884c\u5904\u7406\u5c31\u53ef\u4ee5\u4e86\u3002\u672c\u8d28\u4e0a\u4e0e\u4e0a\u4e00\u4e2a\u95ee\u9898\u662f\u540c\u6837\u7684\u95ee\u9898\uff0c\u53ea\u4e0d\u8fc7\u56e0\u4e3a\u4f60\u7684\u9759\u6001\u8d44\u6e90\u57df\u540d\u548c\u9875\u9762\u57df\u540d\u7528\u7684\u4e0d\u662f\u540c\u4e00\u4e2a\u7f62\u4e86\u3002\\n\\n#### 4\u3001\u5fd8\u8bb0\u914d\u7f6ehosts\uff0c\u5bfc\u81f4\u8bbf\u95ee\u5230\u7684\u4e0d\u662f\u4f60\u672c\u673a\u4e0a\u7684\u670d\u52a1\u7684\u95ee\u9898\\n\\n\u53ea\u9700\u8981\u914d\u7f6e\u597dhost\u5c31\u53ef\u4ee5\u4e86\u3002\u6ce8\u610f\uff0c\u5982\u679c\u4f60\u7684\u9875\u9762\u57df\u540d\u3001\u9759\u6001\u8d44\u6e90\u57df\u540d\u4e24\u8005\u662f\u4e0d\u4e00\u6837\u7684\u8bdd\uff0c\u90a3\u4e48\u4e24\u8005\u90fd\u9700\u8981\u914d\u7f6ehosts\u4e2d\uff0c\u6bd4\u5982\uff1a\\n\\n127.0.0.1 m.paian.com 127.0.0.1 static.pain.com\\n\\n#### 5\u3001\u51fa\u73b0\u6743\u9650\u4e0d\u8db3\u7684\u95ee\u9898\\n\\n\u8fd9\u65f6\u5019\uff0c\u4f60\u53ea\u9700\u8981\u4ee5\u7ba1\u7406\u5458\u8eab\u4efd\u6253\u5f00\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u518d\u6b63\u5e38\u8fdb\u884c\u64cd\u4f5c\u5373\u53ef\u3002\\n\\n\u539f\u6587\uff1a[http://mobilesite.github.io/2017/03/11/windows-nginx-https-config/](http://mobilesite.github.io/2017/03/11/windows-nginx-https-config/)"},{"id":"/21997","metadata":{"permalink":"/docusaurus/blog/21997","editUrl":"https://github.com/lzwdot/docusaurus/blog/2018/10-16-21997.md","source":"@site/blog/2018/10-16-21997.md","title":"JMeter\u63a5\u53e3\u6d4b\u8bd5\uff0cResponse Data\u8fd4\u56de\u4e2d\u6587\u4e71\u7801\u548cjson\u6570\u636e\u8f6c\u7801","description":"\u5f53\u6ca1\u6709\u8bbe\u7f6e\u7f16\u7801\u65f6\uff0cjmeter\u4f1a\u6309\u7167jmeter.properties\u6587\u4ef6\u4e2d\u7684sampleresult.default.encoding\u8bbe\u7f6e\u7684\u683c\u5f0f\u89e3\u6790\uff0c\u5bf9\u4e8e\u4e2d\u6587\u89e3\u6790\u4f7f\u7528ISO-8859-1\u7f16\u7801\u80af\u5b9a\u4f1a\u51fa\u9519\u3002\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u8bf4\u660e\u89e3\u51b3\u95ee\u9898","date":"2018-10-16T10:35:47.000Z","formattedDate":"2018\u5e7410\u670816\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"notes","permalink":"/docusaurus/blog/tags/notes"}],"readingTime":1.98,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"JMeter\u63a5\u53e3\u6d4b\u8bd5\uff0cResponse Data\u8fd4\u56de\u4e2d\u6587\u4e71\u7801\u548cjson\u6570\u636e\u8f6c\u7801","ID":"21997","date":"2018-10-16 10:35:47","categories":["posts","notes"],"tags":["posts","notes"],"authors":["lzw"],"slug":"/21997","type":"blog"},"prevItem":{"title":"Windows\u4e0b\u7528Nginx\u914d\u7f6ehttps\u670d\u52a1\u5668","permalink":"/docusaurus/blog/22177"},"nextItem":{"title":"supervisor\u5b89\u88c5\u4ee5\u53ca\u914d\u7f6e\u5e38\u89c1\u95ee\u9898","permalink":"/docusaurus/blog/20415"}},"content":"\x3c!--truncate--\x3e\\n\\n\u5f53\u6ca1\u6709\u8bbe\u7f6e\u7f16\u7801\u65f6\uff0cjmeter\u4f1a\u6309\u7167jmeter.properties\u6587\u4ef6\u4e2d\u7684sampleresult.default.encoding\u8bbe\u7f6e\u7684\u683c\u5f0f\u89e3\u6790\uff0c\u5bf9\u4e8e\u4e2d\u6587\u89e3\u6790\u4f7f\u7528ISO-8859-1\u7f16\u7801\u80af\u5b9a\u4f1a\u51fa\u9519\u3002\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u8bf4\u660e\u89e3\u51b3\u95ee\u9898\\n\\n## \u4e2d\u6587\u4e71\u7801\u95ee\u9898\\n\\n\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\\n\\n### \u4fee\u6539jmeter.properties\u6587\u4ef6\uff08\u6c38\u4e45\u4fee\u6539\uff09\\n\\n1\u3001apache-jmeter-4.0\u6253\u5f00\u5b89\u88c5\u8def\u5f84injmeter.properties\u6587\u4ef6\uff0c\u641c\u7d22\u201cdefault.encoding\u201d\u5173\u952e\u5b57\uff0c\u627e\u5230\u5982\u4e0b\u914d\u7f6e\uff1a\\n\\n``` js \\n# The encoding to be used if none is provided (default ISO-8859-1)\\n#sampleresult.default.encoding=ISO-8859-1\\n```\\n\\n2\u3001\u5c06\u6ce8\u91ca#\u5220\u6389\uff0c\u5e76\u6539\u6210utf-8\u7f16\u7801\uff0c\u5982\u4e0b\uff1a\\n\\n``` js \\n# The encoding to be used if none is provided (default utf-8)\\nsampleresult.default.encoding=utf-8\\n```\\n\\n3\u3001\u91cd\u542fJMeter\u5373\u53ef\\n\\n### \u4f7f\u7528BeanShell PostProcessor\uff08\u52a8\u6001\u4fee\u6539\uff09\\n\\n1\u3001\u6307\u5b9a\u8bf7\u6c42\u8282\u70b9\u4e0b\uff0c\u65b0\u5efa\u540e\u7f6e\u63a7\u5236\u5668\u201dBeanShell PostProcessor\u201d\\n\\n2\u3001\u5176\u811a\u672c\u6846\u4e2d\u8f93\u5165\uff1aprev.setDataEncoding(\u201cUTF-8\u201d);\\n\\n3\u3001\u4fdd\u5b58\\n\\n## json\u6570\u636e\u8f6c\u7801\uff08unicode\u8f6c\u6210\u4e2d\u6587\uff09\\n\\n\u9996\u5148\u628a\u8fd4\u56de\u6570\u636e\u8bbe\u7f6e\u4e3a\u201cjson\u201d\u683c\u5f0f\u3002\u5728Jmeter\u91cc\u9762\u7684\u67e5\u770b\u7ed3\u679c\u6811\u7684\u8f93\u51fa\u6846\u5de6\u4fa7\u6709\u4e00\u680f\uff0c\u53ef\u4ee5\u5207\u6362\u54cd\u5e94\u8f93\u51fa\u7684\u683c\u5f0f\uff0c\u5982\u4e0b\u56fe\uff1a\\n\\n1\u3001\u5728\u540e\u7f6e\u5904\u7406\u5668\u4e2d\u589e\u52a0 bean shell preprocessor\\n\\n2\u3001\u52a0\u5165script:\\n\\n``` js \\nprev.setDataEncoding(\\"utf-8\\");\\nString s2=new String(prev.getResponseData(),\\"UTF-8\\");\\n//---------------\u4e00\u4e0b\u6b65\u9aa4\u4e3a\u8f6c\u7801\u8fc7\u7a0b---------------\\n        char aChar;\\n        int len= s2.length();\\n        StringBuffer outBuffer=new StringBuffer(len);\\n        for(int x =0; x <len;){\\n            aChar= s2.charAt(x++);\\n            if(aChar==\'\\\\\\\\\'){\\n                aChar= s2.charAt(x++);\\n                if(aChar==\'u\'){\\n                    int value =0;\\n                    for(int i=0;i<4;i++){\\n                        aChar= s2.charAt(x++);\\n                        switch(aChar){\\n                            case\'0\':\\n                            case\'1\':\\n                            case\'2\':\\n                            case\'3\':\\n                            case\'4\':\\n                            case\'5\':\\n                            case\'6\':\\n                            case\'7\':\\n                            case\'8\':\\n                            case\'9\':\\n                                value=(value <<4)+aChar-\'0\';\\n                                break;\\n                            case\'a\':\\n                            case\'b\':\\n                            case\'c\':\\n                            case\'d\':\\n                            case\'e\':\\n                            case\'f\':\\n                                value=(value <<4)+10+aChar-\'a\';\\n                                break;\\n                            case\'A\':\\n                            case\'B\':\\n                            case\'C\':\\n                            case\'D\':\\n                            case\'E\':\\n                            case\'F\':\\n                                value=(value <<4)+10+aChar-\'A\';\\n                                break;\\n                            default:\\n                                throw new IllegalArgumentException(\\n                                        \\"Malformed   \\\\\\\\uxxxx  encoding.\\");}}\\n                    outBuffer.append((char) value);}else{\\n                    if(aChar==\'t\')\\n                        aChar=\'\\\\t\';\\n                    else if(aChar==\'r\')\\n                    aChar=\'\\\\r\';\\n                    else if(aChar==\'n\')\\n                    aChar=\'\\\\n\';\\n                    else if(aChar==\'f\')\\n                    aChar=\'\\\\f\';\\n                    outBuffer.append(aChar);}}else\\n                outBuffer.append(aChar);}\\n//-----------------\u4ee5\u4e0a\u5185\u5bb9\u4e3a\u8f6c\u7801\u8fc7\u7a0b---------------------------\\n//\u5c06\u8f6c\u6210\u4e2d\u6587\u7684\u54cd\u5e94\u7ed3\u679c\u5728\u67e5\u770b\u7ed3\u679c\u6811\u4e2d\u663e\u793a\\nprev.setResponseData(outBuffer.toString());\\n```\\n\\n3\u3001\u5173\u95ed\u7a0b\u5e8f\uff0c\u91cd\u65b0\u542f\u52a8\uff0c\u8fd0\u884c\u811a\u672c"},{"id":"/20415","metadata":{"permalink":"/docusaurus/blog/20415","editUrl":"https://github.com/lzwdot/docusaurus/blog/2018/08-02-20415.md","source":"@site/blog/2018/08-02-20415.md","title":"supervisor\u5b89\u88c5\u4ee5\u53ca\u914d\u7f6e\u5e38\u89c1\u95ee\u9898","description":"1\u3001\u9996\u5148\u6211\u4eec\u8981\u660e\u786e\u95ee\u9898\u51fa\u5728supervisor\u4e0a\u8fd8\u662f\u542f\u52a8\u7684\u7a0b\u5e8f\u4e0a\uff0c\u53ef\u4ee5\u7528ps -ef | grep supervisord\u67e5\u770b\u662f\u5426\u542f\u52a8\uff0c\u5728\u7528ps\u67e5\u770b\u81ea\u5df1\u7684\u8fdb\u7a0b\u6709\u6ca1\u6709\u542f\u52a8\uff1b","date":"2018-08-02T19:13:01.000Z","formattedDate":"2018\u5e748\u67082\u65e5","tags":[{"label":"server","permalink":"/docusaurus/blog/tags/server"},{"label":"linux","permalink":"/docusaurus/blog/tags/linux"}],"readingTime":4.3,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"supervisor\u5b89\u88c5\u4ee5\u53ca\u914d\u7f6e\u5e38\u89c1\u95ee\u9898","ID":"20415","date":"2018-08-02 19:13:01","categories":["server","linux"],"tags":["server","linux"],"authors":["lzw"],"slug":"/20415","type":"blog"},"prevItem":{"title":"JMeter\u63a5\u53e3\u6d4b\u8bd5\uff0cResponse Data\u8fd4\u56de\u4e2d\u6587\u4e71\u7801\u548cjson\u6570\u636e\u8f6c\u7801","permalink":"/docusaurus/blog/21997"},"nextItem":{"title":"supervisor\u5b89\u88c5\u914d\u7f6e\u4ee5\u53caLaravel\u961f\u5217\u8bbe\u7f6e","permalink":"/docusaurus/blog/20413"}},"content":"\x3c!--truncate--\x3e\\n\\n# \u57fa\u672c\u601d\u8def\uff1a\\n\\n1\u3001\u9996\u5148\u6211\u4eec\u8981\u660e\u786e\u95ee\u9898\u51fa\u5728supervisor\u4e0a\u8fd8\u662f\u542f\u52a8\u7684\u7a0b\u5e8f\u4e0a\uff0c\u53ef\u4ee5\u7528`ps -ef | grep supervisord`\u67e5\u770b\u662f\u5426\u542f\u52a8\uff0c\u5728\u7528ps\u67e5\u770b\u81ea\u5df1\u7684\u8fdb\u7a0b\u6709\u6ca1\u6709\u542f\u52a8\uff1b\\n\\n2\u3001\u786e\u8ba4\u4e0b\u542f\u52a8\u7684supervisor\u914d\u7f6e\u6587\u4ef6\u662f\u54ea\u4e2a\uff0c\u6709\u7684\u662f/etc/supervisor/supervisord.conf\uff0c\u6709\u7684\u662f/etc/supervisord.conf\uff0c\u4ee5\u81ea\u5df1\u7684\u4e3a\u51c6\uff0c\u4e0d\u8981\u5f04\u6df7\uff1b\\n\\n**3\u3001\uff08\u91cd\u70b9\uff09\u63a8\u8350\u4f7f\u7528apt-get\u5b89\u88c5\uff0c\u5176\u6b21\u662fpip \uff0c\u6700\u540e\u624d\u662fyum\u3002\u4e0d\u8981\u95ee\u4e3a\u4ec0\u4e48\uff0c\u8e29\u5751\u8e29\u5f97\u3002\u53e6\u5916\uff0c\u5c3d\u91cf\u7528supervisord 3.x\u4ee5\u4e0a\u7684\u7248\u672c\uff0c2.x\u7248\u672c\u51fa\u95ee\u9898\u6982\u7387\u5927\uff1b**\\n\\n4\u3001supervisord\u7684\u65e5\u5fd7\u5728 /var/log/supervisor/supervisord.log\uff0c\u542f\u52a8\u5931\u8d25\u4e00\u822c\u80fd\u518d\u8fd9\u91cc\u627e\u5230\u6709\u7528\u7684\u4fe1\u606f\\n\\n# \u5e38\u7528\u547d\u4ee4\\n\\n\u542f\u52a8\u5b88\u62a4\u8fdb\u7a0b\uff1a\\n\\n``` js \\nsupervisord -c /etc/supervisor/supervisord.conf\\n```\\n\\n\u91cd\u8f7d\u914d\u7f6e\uff1a\\n\\n``` js \\nsupervisorctl reload\\n```\\n\\n# \u5177\u4f53\u62a5\u9519\u5206\u6790\\n\\n\u4e0b\u9762\u662f\u4e09\u79cd\u5e38\u89c1\u7684\u901a\u7528\u62a5\u9519\uff1a\\n\\n## \u7b2c\u4e00\u7c7b\\n\\n\u62a5\u9519\u4fe1\u606f\uff1a  \\n`error: <class \'socket.error\'>, [Errno 2] No such file or directory: file: <string> line: 1`\\n\\n\u89e3\u51b3\u529e\u6cd5\uff1a  \\n\u8fd9\u4e2a\u53ef\u80fd\u6709\u591a\u79cd\u539f\u56e0\uff0c\u53ef\u80fd\u662f\u5df2\u7ecf\u542f\u52a8\u8fc7\u4e86\u4e5f\u53ef\u80fd\u662f\u6ca1\u6743\u9650\uff0c\u89e3\u51b3\u6b65\u9aa4\u5982\u4e0b\uff1a\\n\\n1. \u5148\u8981\u786e\u8ba4\u662f\u5426\u5df2\u7ecf\u542f\u52a8\u8fc7\u4e86\uff1a\u2019ps -ef | grep supervisord\u2019\\n2. \u5982\u679c\u6709\u7684\u8bdd\u5148kill\u6389\\n3. \u8fd0\u884c\u4e0b\u9762\u547d\u4ee4\uff1a\\n\\n``` js \\nsudo touch /var/run/supervisor.sock\\nsudo chmod 777 /var/run/supervisor.sock4\\n```\\n\\n. \u518d\u5c1d\u8bd5\u91cd\u65b0\u542f\u52a8\uff1a`supervisord -c /etc/supervisord.conf`(\u5982\u679c\u6ca1\u6709\u6587\u4ef6\u627e\u4e2a\u522b\u4eba\u7684\u914d\u7f6e\u62f7\u8d1d\u8fc7\u6765\u6216\u8005\u8fd0\u884cechosupervisordconf > /etc/supervisord.conf)\\n\\n## \u7b2c\u4e8c\u7c7b\\n\\n\u62a5\u9519\u4fe1\u606f\uff1a  \\n`Error: .ini file does not include supervisorctl section`\\n\\n\u89e3\u51b3\u529e\u6cd5\uff1a  \\n\u53c8\u662f\u4e00\u4e2a\u6743\u9650\u95ee\u9898\u7684\uff0c\u6b65\u9aa4\uff1a\\n\\n1. \u5148\u786e\u4fddsupervisord.conf\u4e2d\u6709\\\\[supervisord\\\\]\uff0c\\\\[supervisorctl\\\\]\u6709\u8fd9\u4e24\u4e2a\u57fa\u672c\u6a21\u5757\uff0c\u8fd8\u6709\\\\[program:XXX\\\\]\u81ea\u5df1\u7a0b\u5e8f\u7684\u914d\u7f6e\uff08\u53ef\u4ee5\u5728supervisord.conf\u4e5f\u53ef\u4ee5\u5728/etc/supervisor/\\\\*.ini\u4e2d\uff09\\n2. \u6700\u5173\u952e\u7684\u4e24\u4e2a\u547d\u4ee4\uff1a\\\\`chmod +x /usr/bin/supervisord\\n3. +x /usr/bin/supervisorctl\\n\\nchmod +x /etc/supervisord.conf\\\\`\u4e3b\u8981\u662f\u628a\u628a\u76f8\u5173\u6587\u4ef6\u90fd\u6388\u6743\u4e86\\n\\n1. \u628asupervisord\u6740\u6389\u540e\u518d\u6b21\u542f\u52a8supervisord\\n\\n## \u7b2c\u4e09\u7c7b\\n\\n\u62a5\u9519\u4fe1\u606f\uff1a  \\n`Exited too quickly (process log may have details)`\\n\\n\u5982\u679c\u524d\u9762\u7684\u95ee\u9898\u90fd\u89e3\u51b3\u4e86\uff0c\u4f46\u8fd8\u662f\u4f1a\u9047\u5230\u8fd9\u4e2a\u95ee\u9898\uff0c\u606d\u559c\u4f60\u5df2\u7ecf\u79bb\u80dc\u5229\u5f88\u8fd1\u4e86\uff0c\u8d77\u7801supervisord\u672c\u8eab\u5df2\u7ecf\u6ca1\u4ec0\u4e48\u95ee\u9898\u4e86^^\\n\\n\u89e3\u51b3\u529e\u6cd5\uff1a\\n\\n1. \u5148\u786e\u8ba4\\\\[program:XXX\\\\]\u4e2d\u81ea\u5df1\u7684\u7a0b\u5e8f\u7684command=<\u542f\u52a8\u547d\u4ee4>\u548c directory=<\u8fd0\u884c\u547d\u4ee4\u7684\u8def\u5f84>\u6ca1\u6709\u95ee\u9898\uff0cpython\u662f\u4e0d\u662f\u7528\u7684\u81ea\u5df1\u8981\u7684\u73af\u5883\u7684python\uff08\u6bd4\u5982\u865a\u62df\u73af\u5883\u7684\uff09\uff0clog\u6587\u4ef6\u7684\u6587\u4ef6\u5939\u662f\u4e0d\u662f\u5df2\u7ecf\u521b\u5efa\uff08\u6ca1\u521b\u5efa\u7684\u8bddsupervisor\u6ca1\u6743\u9650\u751f\u6210log\u6587\u4ef6\uff09\uff0c\u4ee5\u53ca\u6539log\u6587\u4ef6\u662f\u4e0d\u662f\u6388\u6743\u7ed9\u6240\u6709\u7528\u6237\u4e86\uff08\u53ef\u53c2\u8003\u524d\u9762\u7684\u89e3\u51b3\u529e\u6cd5`chmod +x aaaaa.log`\uff09\\n2. \u786e\u4fdd\u7528\u4e0a\u9762\u7684\u914d\u7f6e\u4e2d\u7684command\u5728\u6307\u5b9a\u8def\u5f84\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c\u4e0d\u4f1a\u62a5\u9519\uff0c\u8fd9\u65f6\u5019\u4e00\u822c\u5c31\u4e0d\u4f1a\u6709\u4ec0\u4e48\u95ee\u9898\u4e86\u3002\u8fd9\u65f6\u5019tail\u4f60\u81ea\u5df1\u7684log\u6587\u4ef6\u4e00\u822c\u5c31\u80fd\u770b\u5230log\u4fe1\u606f\uff0c\u542f\u52a8\u5931\u8d25\u62a5\u9519\u7684\u4fe1\u606f\u4e5f\u4f1a\u5728\u4f60\u7684log\u6587\u4ef6\u4e2d\uff0c\u7167\u7740\u89e3\u51b3\u540e`supervisorctl reload`\u5c31\u597d\u4e86\u3002\\n3. \u5982\u679c\u4e0a\u9762\u7684\u547d\u4ee4\u786e\u4fdd\u53ef\u4ee5\u8dd1\uff0c\u4f46\u8fd8\u662f\u6ca1\u6cd5\u6b63\u5e38\u8fd0\u884c\uff0c\u4e5f\u770b\u4e0d\u5230\u81ea\u5df1\u7a0b\u5e8f\u7684\u62a5\u9519\uff08\u4e0d\u7136\u4f60\u5c31\u80fd\u6839\u636e\u62a5\u9519\u89e3\u51b3\u95ee\u9898\u4e86\uff09\uff0c\u90a3\u4e48\u606d\u559c\uff0c\u4f60\u9047\u5230\u4e86\u8ddf\u6211\u4e00\u6837\u7684\u60c5\u51b5\u3002\u6211\u7684\u89e3\u51b3\u529e\u6cd5\u5f88\u8be1\u5f02\uff0c\u5c1d\u8bd5\u628a\\\\[program:XXX\\\\]\u4e2d\u7684\u540d\u5b57\u6362\u6210\u4e86\u4e00\u4e2a\u8ddf\u542f\u52a8\u547d\u4ee4\u4e0d\u4e00\u6837\u7684\u53e6\u4e00\u4e2a\u540d\u5b57\uff08\u4e0d\u8981\u592a\u77ed\uff09\uff0creload\u4e4b\u540e\u5c45\u7136\u5c31\u53ef\u4ee5\u8dd1\u4e86\u3002\u3002\u3002\u3002\u55ef\uff0c\u5f88\u4e0d\u5408\u5e38\u7406\uff0c\u4f46\u662f\u5bf9\u6211\u6765\u8bf4\u786e\u5b9e\u7ba1\u7528\u4e86\u3002\\n\\n\u53ef\u53c2\u8003\u6587\u7ae0\uff1a  \\n[\u8be6\u89e3supervisor\u8fdb\u7a0b\u7ba1\u7406](http://flowsnow.net/2017/09/25/%E8%AF%A6%E8%A7%A3supervisor%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/)  \\n[supervisor \u8fdb\u7a0b\u7ba1\u7406](https://www.jianshu.com/p/805977544d7f)"},{"id":"/20413","metadata":{"permalink":"/docusaurus/blog/20413","editUrl":"https://github.com/lzwdot/docusaurus/blog/2018/08-02-20413.md","source":"@site/blog/2018/08-02-20413.md","title":"supervisor\u5b89\u88c5\u914d\u7f6e\u4ee5\u53caLaravel\u961f\u5217\u8bbe\u7f6e","description":"\u5b89\u88c5","date":"2018-08-02T19:11:34.000Z","formattedDate":"2018\u5e748\u67082\u65e5","tags":[{"label":"server","permalink":"/docusaurus/blog/tags/server"},{"label":"php-usage","permalink":"/docusaurus/blog/tags/php-usage"}],"readingTime":1.56,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"supervisor\u5b89\u88c5\u914d\u7f6e\u4ee5\u53caLaravel\u961f\u5217\u8bbe\u7f6e","ID":"20413","date":"2018-08-02 19:11:34","categories":["server","php-usage"],"tags":["server","php-usage"],"authors":["lzw"],"slug":"/20413","type":"blog"},"prevItem":{"title":"supervisor\u5b89\u88c5\u4ee5\u53ca\u914d\u7f6e\u5e38\u89c1\u95ee\u9898","permalink":"/docusaurus/blog/20415"},"nextItem":{"title":"css\u5c5e\u6027white-space\u3001word-wrap\u548cword-break","permalink":"/docusaurus/blog/18405"}},"content":"\x3c!--truncate--\x3e\\n\\n### \u5b89\u88c5\\n\\n\u65b9\u6cd51\uff1a\u5148\u5b89\u88c5 Python \u7684 `easy_install`\uff0c\u518d\u901a\u8fc7 easy\\\\_install \u5b89\u88c5 supervisor\\n\\n``` js \\n# yum install python-setuptools\\n# easy_install supervisor\\n```\\n\\n\u65b9\u6cd52\uff1a\u4f7f\u7528pip\u5b89\u88c5\\n\\n``` js \\n# sudo pip install supervisor\\n```\\n\\n### \u914d\u7f6e\u6587\u4ef6\\n\\n\u751f\u6210\u914d\u7f6e\u6587\u4ef6\uff0c\u5e76\u5efa\u7acb\u76f8\u5e94\u76ee\u5f55\uff0c\u7ba1\u7406 supervisor \u542f\u52a8\u8fdb\u7a0b\\n\\n``` js \\n# echo_supervisord_conf > /etc/supervisord.conf\\n# mkdir -p /etc/supervisor/conf.d/\\n```\\n\\n\u7f16\u8f91 `/etc/supervisord.conf`\uff0c\u4fee\u6539 \\\\[include\\\\] \uff08**\u6ce8\u610f\\\\[include\\\\]\u524d\u9762\u7684\u201d;\u201d\u4e5f\u8981\u53bb\u6389**\uff09\u533a\u5757\u5185\u5bb9\uff1a\\n\\n``` js \\n[include]\\nfiles = /etc/supervisor/conf.d/*.conf\\n```\\n\\n\u8fd9\u6837\uff0c supervisor \u4f1a\u52a0\u8f7d /etc/supervisor/conf.d/ \u4e0b\u7684\u6240\u6709 .conf \u6587\u4ef6\\n\\n### \u81ea\u52a8\u542f\u52a8\\n\\n\u5728 [https://github.com/Supervisor/initscripts](https://github.com/Supervisor/initscripts) \u4e0b\u8f7d CentOS \u4f7f\u7528\u7684\u81ea\u52a8\u542f\u52a8\u670d\u52a1\u811a\u672c `centos-systemd-etcs`\\n\\n``` js \\n# wget -O /usr/lib/systemd/system/supervisord.service  https://github.com/Supervisor/initscripts/raw/master/centos-systemd-etcs\\n```\\n\\n\u5c06 `supervisord` \u670d\u52a1\u8bbe\u4e3a\u81ea\u542f\u52a8\\n\\n``` js \\n# systemctl enable supervisord.service\\n```\\n\\n\u8f93\u5165 supervisorctl \u547d\u4ee4\u53ef\u4ee5\u8fdb\u5165 supervisor \u63a7\u5236\u53f0\\n\\n### \u8bbe\u7f6e Laravel \u961f\u5217\\n\\n\u65b0\u5efa `/etc/supervisor/conf.d/laravel-work.conf` \u6587\u4ef6\uff1a\\n\\n``` js \\n[program:laravel-worker]\\nprocess_name=%(program_name)s_%(process_num)02d\\ncommand=/usr/local/php/bin/php /data/wwwroot/app.com/artisan queue:work database --sleep=3 --tries=3 --daemon\\nautostart=true\\nautorestart=true\\nuser=www\\nnumprocs=8\\nredirect_stderr=true\\nstdout_logfile=/data/wwwroot/app.com/storage/logs/queue.log\\n```\\n\\n\u8fd9\u91cc\u5f00\u542f\u4e86 8 \u4e2a queue:work \u8fdb\u7a0b\uff0c\u5e76\u76d1\u89c6\u4ed6\u4eec\uff0c\u5982\u679c\u5931\u8d25\u7684\u8bdd\uff0c\u81ea\u52a8\u91cd\u542f\uff1b\u5728\u9879\u76ee\u7684 storage/logs/queue.log \u8bb0\u5f55\u65e5\u5fd7\u3002\\n\\n\u542f\u52a8 supervisor \u670d\u52a1\uff1a\\n\\n``` js \\n# supervisord\\n```\\n\\n\u81f3\u6b64\uff0c supervisor \u5b89\u88c5\u53ca Laravel \u961f\u5217\u8bbe\u7f6e\u5b8c\u6bd5\\n\\n\u5982\u679c\u4ee5\u540e\u914d\u7f6e\u6587\u4ef6\u6709\u4fee\u6539\uff0c\u6216\u8005\u65b0\u589e\uff0c\u8fdb\u5165 supervisor \u63a7\u5236\u53f0\uff0c\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\\n\\n``` js \\n# supervisorctl\\nsupervisorctl> reread\\nsupervisorctl> update\\nsupervisorctl> start laravel-worker:*\\n\u6216\u8005\\n# supervisorctl reread\\n# supervisorctl update\\n# supervisorctl start laravel-worker:*\\n```"},{"id":"/18405","metadata":{"permalink":"/docusaurus/blog/18405","editUrl":"https://github.com/lzwdot/docusaurus/blog/2018/06-12-18405.md","source":"@site/blog/2018/06-12-18405.md","title":"css\u5c5e\u6027white-space\u3001word-wrap\u548cword-break","description":"\u6709\u65f6\u4f1a\u7528\u5230\u6587\u672c\u6362\u884c\uff0c\u4f46\u65b0\u589e\u4e86css3\u7684\u5c5e\u6027\uff0c\u5bfc\u81f4\u50bb\u50bb\u5206\u4e0d\u6e05\u695a\uff0c\u603b\u7ed3\u4e0bwhite-space\u3001word-wrap\u548cword-break\u4f7f\u7528","date":"2018-06-12T18:11:38.000Z","formattedDate":"2018\u5e746\u670812\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":2.12,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"css\u5c5e\u6027white-space\u3001word-wrap\u548cword-break","ID":"18405","date":"2018-06-12 18:11:38","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/18405","type":"blog"},"prevItem":{"title":"supervisor\u5b89\u88c5\u914d\u7f6e\u4ee5\u53caLaravel\u961f\u5217\u8bbe\u7f6e","permalink":"/docusaurus/blog/20413"},"nextItem":{"title":"\u5355\u57df\u540d\uff08localhost\uff09\u4e0b\u8bbf\u95ee\u591a\u4e2alaravel \u9879\u76ee","permalink":"/docusaurus/blog/17121"}},"content":"\x3c!--truncate--\x3e\\n\\n\u6709\u65f6\u4f1a\u7528\u5230\u6587\u672c\u6362\u884c\uff0c\u4f46\u65b0\u589e\u4e86css3\u7684\u5c5e\u6027\uff0c\u5bfc\u81f4\u50bb\u50bb\u5206\u4e0d\u6e05\u695a\uff0c\u603b\u7ed3\u4e0bwhite-space\u3001word-wrap\u548cword-break\u4f7f\u7528\\n\\n### white-space\\n\\n\u5982\u4f55\u5904\u7406\u6587\u672c\u4e2d\u7684\u7a7a\u767d\u7b26\uff08\u6bd4\u5982\u7a7a\u683c\u548c\u6362\u884c\u7b26\uff09\u3002\\n\\n> \u5e38\u7528:normal | nowrap\\n\\n- normal \u9ed8\u8ba4\u3002\u7a7a\u767d\u4f1a\u88ab\u6d4f\u89c8\u5668\u5ffd\u7565\u3002\\n- nowrap \u6587\u672c\u4e0d\u4f1a\u6362\u884c\uff0c\u6587\u672c\u4f1a\u5728\u5728\u540c\u4e00\u884c\u4e0a\u7ee7\u7eed\uff0c\u76f4\u5230\u9047\u5230\u6807\u7b7e\u4e3a\u6b62\u3002\\n\\n\u5e38\u7528\u573a\u666f\uff1a\u5355\u884c\u6587\u672c\u6ea2\u51fa\u4f7f\u7528\u7701\u7565\u53f7\u4ee3\u66ff\\n\\n``` js \\n.css{\\n    text-overflow:ellipsis;\\n    white-space:nowrap;\\n    overflow:hidden;\\n} \\n```\\n\\n\u5173\u4e8e\u591a\u884c\u6587\u672c\u6ea2\u51fa\u4f7f\u7528\u7701\u7565\u53f7\u4ee3\u66ff\uff0c\u5219\u5229\u7528-webkit-line-clamp\uff1a\\n\\n``` js \\n.css{\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    display: -webkit-box;\\n    -webkit-line-clamp: 2;\\n    -webkit-box-orient: vertical;\\n    /*\u82f1\u6587\u5f3a\u5236\u6362\u884c*/\\n    word-wrap:break-word;\\n    word-break:break-all;\\n} \\n```\\n\\n\u603b\u7ed3\uff1awhite-space\u7528\u6765\u8bbe\u7f6eCJK(\u4e2d\u6587\u3001\u65e5\u6587\u3001\u97e9\u6587)\u6587\u672c\u662f\u5426\u4e0d\u6298\u884c\uff0c\u5b9e\u9645\u4e2d\u5927\u591a\u662f\u8981\u7528white-space:nowrap\u6765\u8ba9\u6587\u672c\u4e0d\u6298\u884c\u3002\\n\\n### word-wrap\\n\\ncss3\u5c5e\u6027\uff0c\u5141\u8bb8\u957f\u5355\u8bcd\u6216 URL \u5730\u5740\u6362\u884c\u5230\u4e0b\u4e00\u884c\u3002\\n\\n> \u5e38\u7528:normal | break-word\\n\\n- normal \u53ea\u5728\u5141\u8bb8\u7684\u65ad\u5b57\u70b9\u6362\u884c\uff08\u6d4f\u89c8\u5668\u4fdd\u6301\u9ed8\u8ba4\u5904\u7406\uff09\u3002\\n- break-word \u5728\u957f\u5355\u8bcd\u6216 URL \u5730\u5740\u5185\u90e8\u8fdb\u884c\u6362\u884c\u3002\\n\\n\u603b\u7ed3\uff1aword-wrap\u7528\u6765\u8bbe\u7f6e\u975eCJK\u6587\u672c\u662f\u5426\u6298\u884c\uff08\u56e0\u4e3aCJK\u6587\u672c\u4f1a\u81ea\u52a8\u6298\u884c\uff09\uff0c\u5982\u679c\u7a7a\u95f4\u8db3\u591f\uff0c\u4e0d\u4f1a\u5bf9\u5355\u8bcd\u5185\u90e8\u8fdb\u884c\u622a\u65ad\\n\\n### word-break\\n\\ncss3\u5c5e\u6027\uff0c\u89c4\u5b9a\u81ea\u52a8\u6362\u884c\u7684\u5904\u7406\u65b9\u6cd5\u3002\\n\\n> \u5e38\u7528:normal | break-all | keep-all\\n\\n- normal \u4f7f\u7528\u6d4f\u89c8\u5668\u9ed8\u8ba4\u7684\u6362\u884c\u89c4\u5219\u3002\\n- break-all \u5141\u8bb8\u5728\u5355\u8bcd\u5185\u6362\u884c\u3002\\n- keep-all \u53ea\u80fd\u5728\u534a\u89d2\u7a7a\u683c\u6216\u8fde\u5b57\u7b26\u5904\u6362\u884c\u3002\\n\\n\u603b\u7ed3\uff1aword-break\u7528\u6765\u8bbe\u7f6e\u975eCJK\u6587\u672c\u662f\u5426\u6298\u884c\uff0c\u53ef\u4ee5\u4f7f\u7528break-all\u5bf9\u5355\u8bcd\u5185\u90e8\u8fdb\u884c\u6298\u884c\\n\\n> PS:\u5982\u679c\u7528\u4e86white-space\u4e3anowrap\uff0c\u8bbe\u7f6e\u5176\u4ed6\u7684\u5f3a\u5236\u6298\u884c\uff08word-break\uff09\u662f\u4e0d\u8d77\u4f5c\u7528\u7684\uff0c\u8981\u5c06white-space\u8bbe\u7f6e\u4e3anormal"},{"id":"/17121","metadata":{"permalink":"/docusaurus/blog/17121","editUrl":"https://github.com/lzwdot/docusaurus/blog/2018/05-10-17121.md","source":"@site/blog/2018/05-10-17121.md","title":"\u5355\u57df\u540d\uff08localhost\uff09\u4e0b\u8bbf\u95ee\u591a\u4e2alaravel \u9879\u76ee","description":"\u4e00\u4e2a\u670d\u52a1\u5668\u4e0d\u80fd\u914d\u7f6e\u591a\u4e2a\u5b50\u57df\u540d\u7684\u65f6\u5019\u5f88\u662f\u5c34\u5c2c\uff0c\u65e0\u6cd5\u4f7f\u7528\u865a\u62df\u76ee\u5f55\uff0c\u53ea\u80fd\u901a\u8fc7\u4e8c\u7ea7\u76ee\u5f55\u8bbf\u95ee\u3002\u5728\u6839\u76ee\u5f55/data/wwwroot/default\u90e8\u7f72\u4e86\u591a\u4e2alaravel\u5e94\u7528\uff0claravel1\uff0c-laravel2\u2026\uff0c\u7136\u540e\u6309\u6587\u6863\u914d\u7f6e\u6240\u8c13\u7684\u4f18\u96c5\u94fe\u63a5\uff0c\u9047\u5230\u4e86\u8bf8\u591a\u95ee\u9898\uff1a","date":"2018-05-10T14:37:26.000Z","formattedDate":"2018\u5e745\u670810\u65e5","tags":[{"label":"server","permalink":"/docusaurus/blog/tags/server"},{"label":"nginx","permalink":"/docusaurus/blog/tags/nginx"}],"readingTime":2.42,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u5355\u57df\u540d\uff08localhost\uff09\u4e0b\u8bbf\u95ee\u591a\u4e2alaravel \u9879\u76ee","ID":"17121","date":"2018-05-10 14:37:26","categories":["server","nginx"],"tags":["server","nginx"],"authors":["lzw"],"slug":"/17121","type":"blog"},"prevItem":{"title":"css\u5c5e\u6027white-space\u3001word-wrap\u548cword-break","permalink":"/docusaurus/blog/18405"},"nextItem":{"title":"MySQL\u5b57\u7b26\u96c6\u4fee\u6539\u4e3autf8mb4","permalink":"/docusaurus/blog/15882"}},"content":"\x3c!--truncate--\x3e\\n\\n\u4e00\u4e2a\u670d\u52a1\u5668\u4e0d\u80fd\u914d\u7f6e\u591a\u4e2a\u5b50\u57df\u540d\u7684\u65f6\u5019\u5f88\u662f\u5c34\u5c2c\uff0c\u65e0\u6cd5\u4f7f\u7528\u865a\u62df\u76ee\u5f55\uff0c\u53ea\u80fd\u901a\u8fc7\u4e8c\u7ea7\u76ee\u5f55\u8bbf\u95ee\u3002\u5728\u6839\u76ee\u5f55/data/wwwroot/default\u90e8\u7f72\u4e86\u591a\u4e2alaravel\u5e94\u7528\uff0claravel1\uff0c-laravel2\u2026\uff0c\u7136\u540e\u6309\u6587\u6863\u914d\u7f6e\u6240\u8c13\u7684\u4f18\u96c5\u94fe\u63a5\uff0c\u9047\u5230\u4e86\u8bf8\u591a\u95ee\u9898\uff1a\\n\\n- apache\u670d\u52a1\u5668\uff1aXAMPP\u7684lamp\u73af\u5883\\n- nginx\u670d\u52a1\u5668\uff1aOneinStack\u81ea\u52a8\u90e8\u7f72lnmp\u73af\u5883\\n\\n#### Apache\u670d\u52a1\u5668\\n\\n\u5728lamp\u73af\u5883\u4e0b\u4f7f\u7528\u8fd8\u662f\u86ee\u7b80\u5355\uff0c\u914d\u7f6eLaravel/public/.htaccess:\\n\\n``` js \\nOptions +FollowSymLinks\\nRewriteEngine On\\nRewriteCond %{REQUEST_FILENAME} !-d\\nRewriteCond %{REQUEST_FILENAME} !-f\\nRewriteRule ^ index.php [L]\\n```\\n\\n\u5373\u53ef\uff0c\u8bbf\u95ee\u7684\u5730\u5740\uff1a\\n\\n> [http://test.comlaravel1/public/admin/index](http://test.com/laravel1/public/admin/index)  \\n> [http://test.com/laravel2/public/admin/index](http://test.com/laravel2/public/admin/index)\\n\\n#### nginx\u670d\u52a1\u5668\\n\\n\u6587\u6863\u4e2d\u8bf4\uff0c\u53ea\u8981\u5728nginx.conf\u4e0b\u914d\u7f6e\uff1a\\n\\n``` js \\nlocation / {\\n    try_files $uri $uri/ /index.php?$query_string;\\n}\\n```\\n\\n\u5373\u53ef\uff0c\u8bbf\u95ee\u4f18\u96c5\u94fe\u63a5\uff0c\u4f46\u7ed3\u679c\u6709\u70b9\u5931\u671b\uff0c\u4f60\u4f1a\u9047\u5230\u95ee\u9898\uff1a\\n\\n1. Access denied.\\n2. No input file specified.\\n3. 504\\n4. \u2026\\n\\n\u5f52\u6839\u7ed3\u5e95\u662fnginx.conf\u914d\u7f6e\u95ee\u9898\uff0c\u672c\u4eba\u9047\u5230\u6700\u591a\u5c31\u662fAccess denied\uff0c\u56e0\u4e3a\u4f7f\u7528OneinStack\u81ea\u52a8\u90e8\u7f72lnmp\u73af\u5883\uff0cnginx.conf\u5df2\u7ecf\u9ed8\u8ba4\u914d\u7f6e\u4e86\uff0c\u7ed3\u679c\u4ed4\u7ec6\u5bf9\u6bd4\uff0c\u5c11\u4e86\u4e0b\u9762\u914d\u7f6e\\n\\n``` js \\nfastcgi_split_path_info       ^(.+.php)(.*)$;\\n```\\n\\n> \u53c2\u8003\uff1a[https://segmentfault.com/a/1190000002667095](https://segmentfault.com/a/1190000002667095)\\n\\n\u96be\u602alaravel\u4f18\u96c5\u94fe\u63a5index.php\u540e\u9762\u4e00\u76f4\u65e0\u6cd5\u8bbf\u95ee\uff0c\u76ee\u524d\u4e3a\u9898\u5df2\u89e3\u51b3\uff0c\u9644\u4e0a\u4e00\u6bb5\u7f51\u4e0a\u7684\u914d\u7f6e\uff1a\\n\\n``` js \\nserver {\\n    listen  80;\\n    server_name _;\\n    set $root_path \'/data/www/default\';\\n    root $root_path;\\n    index index.php index.html index.htm;\\n    try_files $uri $uri/ @rewrite;\\n    location @rewrite {\\n        rewrite ^/(.*)$ /index.php?_url=/$1;\\n    }\\n    location ~ .php {\\n        fastcgi_pass 127.0.0.1:9000;\\n        fastcgi_index /index.php;\\n        fastcgi_split_path_info       ^(.+.php)(/.+)$;\\n        fastcgi_param PATH_INFO       $fastcgi_path_info;\\n        fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;\\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\\n        include                       fastcgi_params;\\n    }\\n    location ~* ^/(css|img|js|flv|swf|download)/(.+)$ {\\n        root $root_path;\\n    }\\n    location ~ /.ht {\\n        deny all;\\n    }\\n}\\n```\\n\\n> [http://test.com/laravel1/public/index.php/admin/index](http://test.com/laravel1/public/index.php/admin/index)  \\n> [http://test.com/laravel2/public/index.php/admin/index](http://test.com/laravel2/public/index.php/admin/index)\\n\\n\u90fd\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\u4e86\uff0cOK!\\n\\n#### \u6700\u540e\u9690\u85cfindex.php\\n\\n\u867d\u7136\u4e0a\u8ff0\u914d\u7f6e\u5728laravel\u4e2d\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\uff0c\u4f46\u662f\u4e00\u4e9b\u653e\u5728public\u91cc\u9762\u7684\u9759\u6001\u8d44\u6e90\u53ef\u80fd\u65e0\u6cd5\u8bbf\u95ee\uff0c\u6bd4\u5982\u65e0\u6cd5\u4f7f\u7528asset()\u51fd\u6570\u65f6\uff0c\u8def\u5f84\u4e2d\u5c31\u5305\u542bindex.php\u5bfc\u81f4\u8d44\u6e90\u65e0\u6cd5\u52a0\u8f7d\uff0c\u6240\u4ee5\u5efa\u8bae\u9690\u85cfindex.php\\n\\n``` js \\nif (!-e $request_filename) {\\n   rewrite ^/(.*)/public/(.*)$ /$1/public/index.php/$2 last;\\n   #\u6216\u8005\\n   rewrite ^/(.*)/public/ /$1/public/index.php?$query_string last; #\u63a8\u8350\\n   break;\\n}\\n```\\n\\n> [http://test.com/laravel1/public/admin/index](http://test.com/laravel1/public/admin/index)  \\n> [http://test.com/laravel2/public/admin/index](http://test.com/laravel2/public/admin/index)\\n\\n\u4ee5\u4e0a\u5c31\u65e0\u9700\u52a0index.php\uff0c\u5373\u53ef\u6b63\u5e38\u8bbf\u95ee"},{"id":"/15882","metadata":{"permalink":"/docusaurus/blog/15882","editUrl":"https://github.com/lzwdot/docusaurus/blog/2018/04-26-15882.md","source":"@site/blog/2018/04-26-15882.md","title":"MySQL\u5b57\u7b26\u96c6\u4fee\u6539\u4e3autf8mb4","description":"MySQL\u8981\u5b58\u50a8emoji\u8868\u60c5\uff0c\u9700\u8981\u628a\u4ee5\u524d\u7684utf8\u4fee\u6539\u4e3autf8mb4\u3002","date":"2018-04-26T16:39:33.000Z","formattedDate":"2018\u5e744\u670826\u65e5","tags":[{"label":"server","permalink":"/docusaurus/blog/tags/server"},{"label":"mysql","permalink":"/docusaurus/blog/tags/mysql"}],"readingTime":1.355,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"MySQL\u5b57\u7b26\u96c6\u4fee\u6539\u4e3autf8mb4","ID":"15882","date":"2018-04-26 16:39:33","categories":["server","mysql"],"tags":["server","mysql"],"authors":["lzw"],"slug":"/15882","type":"blog"},"prevItem":{"title":"\u5355\u57df\u540d\uff08localhost\uff09\u4e0b\u8bbf\u95ee\u591a\u4e2alaravel \u9879\u76ee","permalink":"/docusaurus/blog/17121"},"nextItem":{"title":"Linux\u4e0aiptables\u9632\u706b\u5899\u7684\u57fa\u672c\u5e94\u7528\u6559\u7a0b","permalink":"/docusaurus/blog/15878"}},"content":"\x3c!--truncate--\x3e\\n\\nMySQL\u8981\u5b58\u50a8emoji\u8868\u60c5\uff0c\u9700\u8981\u628a\u4ee5\u524d\u7684utf8\u4fee\u6539\u4e3autf8mb4\u3002\\n\\n> MySQL\u7248\u672c\u8981\u5927\u4e8e5.5.3\\n\\n**\u901a\u8fc7\u7684my.cnf\u4fee\u6539MySQL\u7684\u5b57\u7b26\u96c6**\\n\\n``` js \\n[client]\\ndefault-character-set = utf8mb4\\n[mysql]\\ndefault-character-set = utf8mb4\\n[mysqld]\\ncharacter-set-client-handshake = FALSE\\ncharacter-set-server = utf8mb4\\ncollation-server = utf8mb4_unicode_ci\\ninit_connect=\'SET NAMES utf8mb4\' \\n```\\n\\n> \u91cd\u542f\u6216\u91cd\u8f7dmysql\u914d\u7f6e\u6587\u4ef6\\n\\n**\u91cd\u542f\u540e\u68c0\u67e5\u73af\u5883\u53d8\u91cf**\\n\\n``` js \\nmysql> SHOW VARIABLES WHERE Variable_name LIKE \'character_set_%\' OR Variable_name LIKE \'collation%\';\\n+--------------------------+--------------------+\\n| Variable_name            | Value              |\\n+--------------------------+--------------------+\\n| character_set_client     | utf8mb4            |\\n| character_set_connection | utf8mb4            |\\n| character_set_database   | utf8mb4            |\\n| character_set_filesystem | binary             |\\n| character_set_results    | utf8mb4            |\\n| character_set_server     | utf8mb4            |\\n| character_set_system     | utf8               |\\n| collation_connection     | utf8mb4_unicode_ci |\\n| collation_database       | utf8mb4_unicode_ci |\\n| collation_server         | utf8mb4_unicode_ci |\\n+--------------------------+--------------------+\\n rows in set (0.00 sec)\\n```\\n\\n**\u4fee\u6539\u6570\u636e\u5e93\uff0c\u8868\u548c\u5b57\u6bb5\u7684\u5b57\u7b26\u96c6**\\n\\n``` js \\n# \u4fee\u6539\u6570\u636e\u5e93:\\nALTER DATABASE database_name CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;\\n# \u4fee\u6539\u8868:\\nALTER TABLE table_name CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\\n# \u4fee\u6539\u8868\u5b57\u6bb5:\\nALTER TABLE table_name CHANGE column_name column_name VARCHAR(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\\n```\\n\\n> \u6700\u540e\uff0c\u5728\u4f60\u7684\u7a0b\u5e8f\u4e2d\u4e5f\u8981\u4f7f\u7528utf8mb4\u8fde\u63a5\u6570\u636e\u5e93\uff0c\u4fee\u6539mysql\u5b57\u7b26\u96c6\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\uff0c\u6570\u636e\u5e93\u6216\u8005\u5b57\u6bb5\u5efa\u8bae\u4f7f\u7528\u5ba2\u6237\u7aef\u5de5\u5177\u4fee\u6539"},{"id":"/15878","metadata":{"permalink":"/docusaurus/blog/15878","editUrl":"https://github.com/lzwdot/docusaurus/blog/2018/04-21-15878.md","source":"@site/blog/2018/04-21-15878.md","title":"Linux\u4e0aiptables\u9632\u706b\u5899\u7684\u57fa\u672c\u5e94\u7528\u6559\u7a0b","description":"iptables\u662fLinux\u4e0a\u5e38\u7528\u7684\u9632\u706b\u5899\u8f6f\u4ef6\uff0c\u4e0b\u9762\u8bf4\u4e00\u4e0biptables\u7684\u5b89\u88c5\u3001\u6e05\u9664iptables\u89c4\u5219\u3001iptables\u53ea\u5f00\u653e\u6307\u5b9a\u7aef\u53e3\u3001iptables\u5c4f\u853d\u6307\u5b9aip\u3001ip\u6bb5\u53ca\u89e3\u5c01\u3001\u5220\u9664\u5df2\u6dfb\u52a0\u7684iptables\u89c4\u5219\u7b49iptables\u7684\u57fa\u672c\u5e94\u7528\u3002","date":"2018-04-21T11:11:13.000Z","formattedDate":"2018\u5e744\u670821\u65e5","tags":[{"label":"server","permalink":"/docusaurus/blog/tags/server"},{"label":"linux","permalink":"/docusaurus/blog/tags/linux"}],"readingTime":4.87,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"Linux\u4e0aiptables\u9632\u706b\u5899\u7684\u57fa\u672c\u5e94\u7528\u6559\u7a0b","ID":"15878","date":"2018-04-21 11:11:13","categories":["server","linux"],"tags":["server","linux"],"authors":["lzw"],"slug":"/15878","type":"blog"},"prevItem":{"title":"MySQL\u5b57\u7b26\u96c6\u4fee\u6539\u4e3autf8mb4","permalink":"/docusaurus/blog/15882"},"nextItem":{"title":"\u539f\u751fjs\u64cd\u4f5ccookie\uff0c\u6709\u6548\u671f\u81f3\u665a\u4e0a23\u70b959\u520659\u79d2","permalink":"/docusaurus/blog/15825"}},"content":"\x3c!--truncate--\x3e\\n\\niptables\u662fLinux\u4e0a\u5e38\u7528\u7684\u9632\u706b\u5899\u8f6f\u4ef6\uff0c\u4e0b\u9762\u8bf4\u4e00\u4e0biptables\u7684\u5b89\u88c5\u3001\u6e05\u9664iptables\u89c4\u5219\u3001iptables\u53ea\u5f00\u653e\u6307\u5b9a\u7aef\u53e3\u3001iptables\u5c4f\u853d\u6307\u5b9aip\u3001ip\u6bb5\u53ca\u89e3\u5c01\u3001\u5220\u9664\u5df2\u6dfb\u52a0\u7684iptables\u89c4\u5219\u7b49iptables\u7684\u57fa\u672c\u5e94\u7528\u3002\\n\\n#### 1\u3001\u5b89\u88c5iptables\u9632\u706b\u5899\\n\\n\u5982\u679c\u6ca1\u6709\u5b89\u88c5iptables\u9700\u8981\u5148\u5b89\u88c5\uff0cCentOS\u6267\u884c\uff1a\\n\\n``` js \\nyum install iptables\\n```\\n\\nDebian/Ubuntu\u6267\u884c\uff1a\\n\\n``` js \\napt-get install iptables\\n```\\n\\n#### 2\u3001\u6e05\u9664\u5df2\u6709iptables\u89c4\u5219\\n\\n``` js \\niptables -F\\niptables -X\\niptables -Z\\n```\\n\\n#### 3\u3001\u5f00\u653e\u6307\u5b9a\u7684\u7aef\u53e3\\n\\n\\\\-A\u548c-I\u53c2\u6570\u5206\u522b\u4e3a\u6dfb\u52a0\u5230\u89c4\u5219\u672b\u5c3e\u548c\u89c4\u5219\u6700\u524d\u9762\u3002\\n\\n``` js \\n#\u5141\u8bb8\u672c\u5730\u56de\u73af\u63a5\u53e3(\u5373\u8fd0\u884c\u672c\u673a\u8bbf\u95ee\u672c\u673a)\\niptables -A INPUT -i lo -j ACCEPT\\n# \u5141\u8bb8\u5df2\u5efa\u7acb\u7684\u6216\u76f8\u5173\u8fde\u7684\u901a\u884c\\niptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\\n#\u5141\u8bb8\u6240\u6709\u672c\u673a\u5411\u5916\u7684\u8bbf\u95ee\\niptables -A OUTPUT -j ACCEPT\\n# \u5141\u8bb8\u8bbf\u95ee22\u7aef\u53e3\\niptables -A INPUT -p tcp --dport 22 -j ACCEPT\\n#\u5141\u8bb8\u8bbf\u95ee80\u7aef\u53e3\\niptables -A INPUT -p tcp --dport 80 -j ACCEPT\\n#\u5141\u8bb8\u8bbf\u95ee443\u7aef\u53e3\\niptables -A INPUT -p tcp --dport 443 -j ACCEPT\\n#\u5141\u8bb8FTP\u670d\u52a1\u768421\u548c20\u7aef\u53e3\\niptables -A INPUT -p tcp --dport 21 -j ACCEPT\\niptables -A INPUT -p tcp --dport 20 -j ACCEPT\\n#\u5982\u679c\u6709\u5176\u4ed6\u7aef\u53e3\u7684\u8bdd\uff0c\u89c4\u5219\u4e5f\u7c7b\u4f3c\uff0c\u7a0d\u5fae\u4fee\u6539\u4e0a\u8ff0\u8bed\u53e5\u5c31\u884c\\n#\u5141\u8bb8ping\\niptables -A INPUT -p icmp -m icmp --icmp-type 8 -j ACCEPT\\n#\u7981\u6b62\u5176\u4ed6\u672a\u5141\u8bb8\u7684\u89c4\u5219\u8bbf\u95ee\\niptables -A INPUT -j REJECT  #\uff08\u6ce8\u610f\uff1a\u5982\u679c22\u7aef\u53e3\u672a\u52a0\u5165\u5141\u8bb8\u89c4\u5219\uff0cSSH\u94fe\u63a5\u4f1a\u76f4\u63a5\u65ad\u5f00\u3002\uff09\\niptables -A FORWARD -j REJECT\\n```\\n\\n#### 4\u3001\u5c4f\u853dIP\\n\\n``` js \\n#\u5982\u679c\u53ea\u662f\u60f3\u5c4f\u853dIP\u7684\u8bdd\u201c3\u3001\u5f00\u653e\u6307\u5b9a\u7684\u7aef\u53e3\u201d\u53ef\u4ee5\u76f4\u63a5\u8df3\u8fc7\u3002\\n#\u5c4f\u853d\u5355\u4e2aIP\u7684\u547d\u4ee4\u662f\\niptables -I INPUT -s 123.45.6.7 -j DROP\\n#\u5c01\u6574\u4e2a\u6bb5\u5373\u4ece123.0.0.1\u5230123.255.255.254\u7684\u547d\u4ee4\\niptables -I INPUT -s 123.0.0.0/8 -j DROP\\n#\u5c01IP\u6bb5\u5373\u4ece123.45.0.1\u5230123.45.255.254\u7684\u547d\u4ee4\\niptables -I INPUT -s 124.45.0.0/16 -j DROP\\n#\u5c01IP\u6bb5\u5373\u4ece123.45.6.1\u5230123.45.6.254\u7684\u547d\u4ee4\u662f\\niptables -I INPUT -s 123.45.6.0/24 -j DROP\\n```\\n\\n#### 5\u3001\u5c4f\u853d\u6216\u5141\u8bb8\u67d0IP\u8bbf\u95ee\u6307\u5b9a\u7aef\u53e3\\n\\n``` js \\n#\u5c4f\u853d\u67d0IP\u8bbf\u95ee\u6307\u5b9a\u7aef\u53e3\uff0c\u4ee522\u7aef\u53e3\u4e3a\u4f8b\u547d\u4ee4\u662f\\niptables -I INPUT -s 123.45.6.7 -p tcp --dport 22 -j DROP\\n#\u5141\u8bb8\u67d0IP\u8bbf\u95ee\u6307\u5b9a\u7aef\u53e3\uff0c\u4ee522\u7aef\u53e3\u4e3a\u4f8b\u547d\u4ee4\u662f\\niptables -I INPUT -p tcp --dport 22 -j DROP\\niptables -I INPUT -s 123.45.6.7 -p tcp --dport 22 -j ACCEPT\\n```\\n\\n#### 6\u3001\u67e5\u770b\u5df2\u6dfb\u52a0\u7684iptables\u89c4\u5219\\n\\n``` js \\niptables -L -n\\n```\\n\\n> v\uff1a\u663e\u793a\u8be6\u7ec6\u4fe1\u606f\uff0c\u5305\u62ec\u6bcf\u6761\u89c4\u5219\u7684\u5339\u914d\u5305\u6570\u91cf\u548c\u5339\u914d\u5b57\u8282\u6570  \\n> x\uff1a\u5728 v \u7684\u57fa\u7840\u4e0a\uff0c\u7981\u6b62\u81ea\u52a8\u5355\u4f4d\u6362\u7b97\uff08K\u3001M\uff09 vps\u4fa6\u63a2  \\n> n\uff1a\u53ea\u663e\u793aIP\u5730\u5740\u548c\u7aef\u53e3\u53f7\uff0c\u4e0d\u5c06ip\u89e3\u6790\u4e3a\u57df\u540d\\n\\n#### 7\u3001\u5220\u9664\u5df2\u6dfb\u52a0\u7684iptables\u89c4\u5219\\n\\n\u5c06\u6240\u6709iptables\u4ee5\u5e8f\u53f7\u6807\u8bb0\u663e\u793a\uff0c\u6267\u884c\uff1a\\n\\n``` js \\niptables -L -n --line-numbers\\n```\\n\\n\u6bd4\u5982\u8981\u5220\u9664INPUT\u91cc\u5e8f\u53f7\u4e3a8\u7684\u89c4\u5219(\u8981\u5220\u9664OUTPUT\u7684\u8bdd\u5c31\u6539\u6210OUTPUT\uff0c\u4ee5\u6b64\u7c7b\u63a8)\uff0c\u6267\u884c\uff1a\\n\\n``` js \\niptables -D INPUT 8\\n```\\n\\n#### 8\u3001iptables\u7684\u5f00\u673a\u542f\u52a8\u53ca\u89c4\u5219\u4fdd\u5b58\\n\\nCentOS\u4e0a\u53ef\u80fd\u4f1a\u5b58\u5728\u5b89\u88c5\u597diptables\u540e\uff0ciptables\u5e76\u4e0d\u5f00\u673a\u81ea\u542f\u52a8\uff0c\u53ef\u4ee5\u6267\u884c\u4e00\u4e0b\uff1a\\n\\n``` js \\nchkconfig --level 345 iptables on\\n```\\n\\n\u5c06\u5176\u52a0\u5165\u5f00\u673a\u542f\u52a8\u3002\\n\\nCentOS\u4e0a\u53ef\u4ee5\u6267\u884c\uff1a\\n\\n``` js \\nservice iptables save\\n```\\n\\n\u4fdd\u5b58\u89c4\u5219\u3002\\n\\n\u53e6\u5916\u66f4\u9700\u8981\u6ce8\u610f\u7684\u662fDebian/Ubuntu\u4e0aiptables\u662f\u4e0d\u4f1a\u4fdd\u5b58\u89c4\u5219\u7684\u3002\\n\\n\u9700\u8981\u6309\u5982\u4e0b\u6b65\u9aa4\u8fdb\u884c\uff0c\u8ba9\u7f51\u5361\u5173\u95ed\u662f\u4fdd\u5b58iptables\u89c4\u5219\uff0c\u542f\u52a8\u65f6\u52a0\u8f7diptables\u89c4\u5219\uff1a\\n\\n\u521b\u5efa/etc/network/if-post-down.d/iptables \u6587\u4ef6\uff0c\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a\\n\\n``` js \\n#!/bin/bash\\niptables-save > /etc/iptables.rules\\n```\\n\\n\u6267\u884c\uff1achmod +x /etc/network/if-post-down.d/iptables \u6dfb\u52a0\u6267\u884c\u6743\u9650\u3002\\n\\n\u521b\u5efa/etc/network/if-pre-up.d/iptables \u6587\u4ef6\uff0c\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a\\n\\n``` js \\n#!/bin/bash\\niptables-restore < /etc/iptables.rules\\n```\\n\\n\u6267\u884c\uff1achmod +x /etc/network/if-pre-up.d/iptables \u6dfb\u52a0\u6267\u884c\u6743\u9650\u3002\\n\\n\u5173\u4e8e\u66f4\u591a\u7684iptables\u7684\u4f7f\u7528\u65b9\u6cd5\u53ef\u4ee5\u6267\u884c\uff1aiptables \u2013help\u6216\u7f51\u4e0a\u641c\u7d22\u4e00\u4e0biptables\u53c2\u6570\u7684\u8bf4\u660e\u3002\\n\\n#### 9\u3001\u67e5\u770biptables\u542f\u52a8\u72b6\u6001\\n\\niptables \u6240\u5728\u76ee\u5f55 \uff1a/etc/sysconfig/iptables\\n\\n``` js \\n# service iptables status    #\u67e5\u770biptables\u72b6\u6001\\n# service iptables restart   #iptables\u670d\u52a1\u91cd\u542f\\n# service iptables stop      #iptables\u670d\u52a1\u7981\u7528\\n```\\n\\n> \u51fa\u5904\uff1aVPS\u4fa6\u63a2 \u672c\u6587\u94fe\u63a5\u5730\u5740\uff1a[https://www.vpser.net/security/linux-iptables.html](https://www.vpser.net/security/linux-iptables.html)"},{"id":"/15825","metadata":{"permalink":"/docusaurus/blog/15825","editUrl":"https://github.com/lzwdot/docusaurus/blog/2018/03-28-15825.md","source":"@site/blog/2018/03-28-15825.md","title":"\u539f\u751fjs\u64cd\u4f5ccookie\uff0c\u6709\u6548\u671f\u81f3\u665a\u4e0a23\u70b959\u520659\u79d2","description":"\u73b0\u5728\u9047\u5230\u4e00\u4e2a\u6bcf\u65e5\u53ef\u4ee5\u6295\u7968\u7684\u529f\u80fd\uff0c\u60f3\u7528cookie\u6765\u63a7\u5236\uff0c\u90a3\u4e48\u6709\u6548\u671f\u81f3\u665a\u4e0a23\u70b959\u520659\u79d2\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u641e\u5b9a","date":"2018-03-28T13:11:50.000Z","formattedDate":"2018\u5e743\u670828\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":1.07,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u539f\u751fjs\u64cd\u4f5ccookie\uff0c\u6709\u6548\u671f\u81f3\u665a\u4e0a23\u70b959\u520659\u79d2","ID":"15825","date":"2018-03-28 13:11:50","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/15825","type":"blog"},"prevItem":{"title":"Linux\u4e0aiptables\u9632\u706b\u5899\u7684\u57fa\u672c\u5e94\u7528\u6559\u7a0b","permalink":"/docusaurus/blog/15878"},"nextItem":{"title":"\u89e3\u51b3ueditor\u63d2\u5165\u7b2c\u4e09\u65b9\u89c6\u9891\u7f51\u7ad9\u901a\u7528\u4ee3\u7801\u7684\u95ee\u9898","permalink":"/docusaurus/blog/15344"}},"content":"\x3c!--truncate--\x3e\\n\\n\u73b0\u5728\u9047\u5230\u4e00\u4e2a\u6bcf\u65e5\u53ef\u4ee5\u6295\u7968\u7684\u529f\u80fd\uff0c\u60f3\u7528cookie\u6765\u63a7\u5236\uff0c\u90a3\u4e48\u6709\u6548\u671f\u81f3\u665a\u4e0a23\u70b959\u520659\u79d2\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u641e\u5b9a\\n\\n**\u8bbe\u7f6ecookie**\\n\\n``` js \\n/**\\n * \u6dfb\u52a0cookie\\n * @param cname\\n * @param cvalue\\n * @param exdays\\n */\\nfunction setCookie(cname, cvalue, exdays) {\\n    var d = new Date(),_d = d;\\n    //\u8bbe\u7f6e23:59:59\u8fc7\u671f\\n    _d.setHours(23);_d.setMinutes(59);_d.setSeconds(59);\\n    d.setTime(_d.getTime() + (exdays*24*60*60*1000));\\n    var expires = \\"expires=\\"+d.toUTCString();\\n    document.cookie = cname + \\"=\\" + cvalue + \\"; \\" + expires;\\n}\\n```\\n\\n**\u83b7\u53d6cookie**\\n\\n``` js \\n/**\\n * \u83b7\u53d6cookie\\n * @param cname\\n * @returns {*}\\n */\\nfunction getCookie(cname){\\n    var name = cname + \\"=\\";\\n    var ca = document.cookie.split(\';\');\\n    for(var i=0; i<ca.length; i++) {\\n        var c = ca[i].trim();\\n        if (c.indexOf(name)==0) { return c.substring(name.length,c.length); }\\n    }\\n    return \\"\\";\\n}\\n```\\n\\n**\u5220\u9664cookie**\\n\\n``` js \\n/**\\n * \u5220\u9664cookie\\n * @param cname\\n */\\nfunction delCookie(cname){\\n    var exp = new Date();\\n    exp.setTime(exp.getTime() - 1);\\n    document.cookie= cname + \\"=cookie; expires=\\"+exp.toGMTString();\\n}\\n```\\n\\n> \u6839\u636e\u4ee3\u7801\u7f51\u4e0a\u4ee3\u7801\u4fee\u6539\\n\\n**js.cookie**\\n\\n[https://github.com/js-cookie/js-cookie](https://github.com/js-cookie/js-cookie)\\n\\n``` js \\nCookies.set(\'name\', \'value\', { expires: 365 });\\nCookies.get(\'name\'); // => \'value\'\\nCookies.remove(\'name\');\\n```"},{"id":"/15344","metadata":{"permalink":"/docusaurus/blog/15344","editUrl":"https://github.com/lzwdot/docusaurus/blog/2018/02-16-15344.md","source":"@site/blog/2018/02-16-15344.md","title":"\u89e3\u51b3ueditor\u63d2\u5165\u7b2c\u4e09\u65b9\u89c6\u9891\u7f51\u7ad9\u901a\u7528\u4ee3\u7801\u7684\u95ee\u9898","description":"\u767e\u5ea6ueditor\u7f16\u8f91\u5668\u4f7f\u7528\u975e\u5e38\u5e7f\u6cdb\uff0c\u7531\u6b64\u884d\u751f\u7684\u5404\u79cd\u5b9a\u5236\u5316\u7684\u7f16\u8f91\u5668\u4e5f\u975e\u5e38\u591a\uff0c\u5982\u5fae\u4fe1\u516c\u4f17\u53f7\u6587\u7ae0\u7f16\u8f91\u5668\u7b49\u90fd\u662f\u57fa\u4e8eueditor\u7f16\u8f91\u5668\u5f00\u53d1\u7684\uff0c\u4f46\u5b98\u65b9\u7ef4\u62a4\u7684\u662f\u901a\u7528\u7684pc\u7f16\u8f91\u5668\uff0c\u6709\u4e9b\u683c\u5f0f\u4e0d\u9002\u5e94\u79fb\u52a8h5\u9875\u9762\u663e\u793a\uff0c\u6bd4\u5982\u56fe\u7247\u81ea\u9002\u5e94\uff0c\u4e0d\u80fd\u63d2\u5165\u7b2c\u4e09\u65b9\u7f51\u7ad9\u89c6\u9891\u901a\u7528\u4ee3\u7801\u7b49\u3002\u56e0\u6b64\uff0c\u4e5f\u9700\u8981\u8fdb\u884c\u5fc5\u8981\u7684\u4fee\u6539\u6765\u6ee1\u8db3\u5b9a\u5236\u5316\u7684\u9700\u6c42\u3002","date":"2018-02-16T20:27:00.000Z","formattedDate":"2018\u5e742\u670816\u65e5","tags":[{"label":"posts","permalink":"/docusaurus/blog/tags/posts"},{"label":"js-css","permalink":"/docusaurus/blog/tags/js-css"}],"readingTime":4.19,"hasTruncateMarker":true,"authors":[{"name":"lzw.","title":"\u4e00\u4e2a web \u5f00\u53d1\u8005","url":"https://github.com/lzwdot","imageURL":"https://avatars.githubusercontent.com/u/24477920?v=4","key":"lzw"}],"frontMatter":{"title":"\u89e3\u51b3ueditor\u63d2\u5165\u7b2c\u4e09\u65b9\u89c6\u9891\u7f51\u7ad9\u901a\u7528\u4ee3\u7801\u7684\u95ee\u9898","ID":"15344","date":"2018-02-16 20:27:00","categories":["posts","js-css"],"tags":["posts","js-css"],"authors":["lzw"],"slug":"/15344","type":"blog"},"prevItem":{"title":"\u539f\u751fjs\u64cd\u4f5ccookie\uff0c\u6709\u6548\u671f\u81f3\u665a\u4e0a23\u70b959\u520659\u79d2","permalink":"/docusaurus/blog/15825"}},"content":"\x3c!--truncate--\x3e\\n\\n\u767e\u5ea6ueditor\u7f16\u8f91\u5668\u4f7f\u7528\u975e\u5e38\u5e7f\u6cdb\uff0c\u7531\u6b64\u884d\u751f\u7684\u5404\u79cd\u5b9a\u5236\u5316\u7684\u7f16\u8f91\u5668\u4e5f\u975e\u5e38\u591a\uff0c\u5982\u5fae\u4fe1\u516c\u4f17\u53f7\u6587\u7ae0\u7f16\u8f91\u5668\u7b49\u90fd\u662f\u57fa\u4e8eueditor\u7f16\u8f91\u5668\u5f00\u53d1\u7684\uff0c\u4f46\u5b98\u65b9\u7ef4\u62a4\u7684\u662f\u901a\u7528\u7684pc\u7f16\u8f91\u5668\uff0c\u6709\u4e9b\u683c\u5f0f\u4e0d\u9002\u5e94\u79fb\u52a8h5\u9875\u9762\u663e\u793a\uff0c\u6bd4\u5982\u56fe\u7247\u81ea\u9002\u5e94\uff0c\u4e0d\u80fd\u63d2\u5165\u7b2c\u4e09\u65b9\u7f51\u7ad9\u89c6\u9891\u901a\u7528\u4ee3\u7801\u7b49\u3002\u56e0\u6b64\uff0c\u4e5f\u9700\u8981\u8fdb\u884c\u5fc5\u8981\u7684\u4fee\u6539\u6765\u6ee1\u8db3\u5b9a\u5236\u5316\u7684\u9700\u6c42\u3002\\n\\n> \u6240\u8c13\u7b2c\u4e09\u65b9\u89c6\u9891\u7f51\u7ad9\u901a\u7528\u4ee3\u7801\uff0c\u5c31\u662f\u89c6\u9891\u7f51\u7ad9\u63d0\u4f9b\u5206\u4eab\u529f\u80fd\u65f6\uff0c\u53ef\u9009\u62e9html\u4ee3\u7801\uff0c\u901a\u8fc7\u4ee3\u7801\u7b49\uff0c\u901a\u7528\u4ee3\u7801\u53ef\u4ee5\u517c\u5bb9\u624b\u673a\u64ad\u653e\uff0c\u6bd4\u5982\u5728iPhone\uff0cipad\u4e0a\u64ad\u653e\\n\\n\u9700\u8981\u6ee1\u8db3\u7684\u529f\u80fd\uff1a\\n\\n- \u652f\u6301\u63d2\u5165\u89c6\u9891\u529f\u80fd\\n- \u89c6\u9891\u64ad\u653e\u517c\u5bb9\u624b\u673a\u64ad\u653e,\u5982iPhone\\n\\n### \u652f\u6301\u63d2\u5165\u89c6\u9891\u529f\u80fd\\n\\n\u57fa\u4e8eueditor\u7f16\u8f91\u5668\u5f3a\u5927\u7684\u53ef\u5b9a\u5236\u5316\u7684\u529f\u80fd\uff0c\u652f\u6301\u63d2\u5165\u89c6\u9891\u529f\u80fd\u975e\u5e38\u7b80\u5355  \\n\u5728**ueditor/ueditor.config.js**\u7684**toolbars**\u6dfb\u52a0 **insertvideo**\u5373\u53ef\\n\\n``` js \\n//\u5de5\u5177\u680f\u4e0a\u7684\u6240\u6709\u7684\u529f\u80fd\u6309\u94ae\u548c\u4e0b\u62c9\u6846\uff0c\u53ef\u4ee5\u5728new\u7f16\u8f91\u5668\u7684\u5b9e\u4f8b\u65f6\u9009\u62e9\u81ea\u5df1\u9700\u8981\u7684\u91cd\u65b0\u5b9a\u4e49\\n, toolbars: [[...\'insertvideo\',]] \\n```\\n\\n### \u89c6\u9891\u64ad\u653e\u517c\u5bb9\u624b\u673a\u64ad\u653e\\n\\n\u8fd9\u91cc\u4e3b\u8981\u662f\u63d2\u5165\u7b2c\u4e09\u65b9\u89c6\u9891\u64ad\u653e\u5668\uff0c\u800c\u4e14\u4e3a\u4e86\u517c\u5bb9\u624b\u673a\u64ad\u653e\uff0c\u4f1a\u4f7f\u7528\u7b2c\u4e09\u65b9\u89c6\u9891\u7f51\u7ad9\u901a\u7528\u4ee3\u7801\uff08\u53ef\u4ee5\u5728\u89c6\u9891\u64ad\u653e\u9875-\u5206\u4eab-\u901a\u7528\u4ee3\u7801\u4e2d\u83b7\u53d6\uff09\uff0c\u4e00\u822c\u683c\u5f0f\u5982\u4e0b\uff1a\\n\\n``` js \\n<iframe frameborder=\\"0\\" width=\\"640\\" height=\\"498\\" src=\\"https://v.qq.com/iframe/player.html?vid=y0016tj0qvh&tiny=0&auto=0\\" allowfullscreen></iframe> \\n```\\n\\nueditor\u7f16\u8f91\u5668\u89c6\u9891\u7f51\u5740\u9ed8\u8ba4\u7684\u4e0d\u652f\u6301\u63d2\u5165iframe\u683c\u5f0f\uff0c\u8fd9\u91cc\u9700\u8981\u4fee\u6539\u4e0b\u6e90\u7801  \\n\u8def\u5f84\uff1a**ueditor/dialogs/video/video.js** \uff0c\u4fee\u6539\u7684\u5730\u65b9\u5982\u4e0b\uff1a\\n\\n``` js \\n...\\n/**\\n * \u5c06\u5355\u4e2a\u89c6\u9891\u4fe1\u606f\u63d2\u5165\u7f16\u8f91\u5668\u4e2d\\n * \u4fee\u6539\uff1a\u5904\u7406\u901a\u7528\u89c6\u9891\u4ee3\u7801iframe   lzw 2017-09-11\\n */\\nfunction insertSingle(){\\n    var width = $G(\\"videoWidth\\"),\\n        height = $G(\\"videoHeight\\"),\\n        url=$G(\'videoUrl\').value,\\n        align = findFocus(\\"videoFloat\\",\\"name\\");\\n    if(!url) return false;\\n    if ( !checkNum( [width, height] ) ) return false;\\n    /**\u5904\u7406\u901a\u7528\u89c6\u9891\u4ee3\u7801iframe   lzw 2017-09-11 **/\\n    url = utils.trim(url);\\n    if(/^<iframe/.test(url)){\\n        var conUrl = \'\';\\n        if(/src=\\"[^s\\"]+/i.test(url)){\\n            conUrl = url.match(/src=\\"[^s\\"]+/i)[0].substr(5);\\n        }\\n        var newIframe = editor.document.createElement(\\"iframe\\");\\n        var div;\\n        newIframe.setAttribute(\\"src\\",/http://|https:///ig.test(conUrl) ? conUrl : \\"http://\\"+conUrl);\\n        /^[1-9]+[.]?d*$/g.test( width.value ) ? newIframe.setAttribute(\\"width\\",width.value) : \\"\\";\\n        /^[1-9]+[.]?d*$/g.test( height.value ) ? newIframe.setAttribute(\\"height\\",height.value) : \\"\\";\\n        //newIframe.setAttribute(\\"scrolling\\",\\"no\\");\\n        newIframe.setAttribute(\\"frameborder\\",\\"0\\",0);\\n        newIframe.setAttribute(\\"allowfullscreen\\",\\"allowfullscreen\\");\\n        newIframe.setAttribute(\\"align\\",align);\\n        div = editor.document.createElement(\\"div\\");\\n        div.appendChild(newIframe);\\n        //alert(div.innerHTML);\\n        console.log(div.innerHTML);\\n        editor.execCommand(\\"inserthtml\\",div.innerHTML,true);\\n    } else {/** -end \u5904\u7406\u901a\u7528\u89c6\u9891\u4ee3\u7801iframe   lzw 2017-09-11 **/\\n        editor.execCommand(\'insertvideo\', {\\n            url: convert_url(url),\\n            width: width.value,\\n            height: height.value,\\n            align: align\\n        }, isModifyUploadVideo ? \'upload\':null);\\n    }///**\u5904\u7406\u901a\u7528\u89c6\u9891\u4ee3\u7801iframe   lzw 2017-09-11 **/\\n}\\n...\\n/**\\n * \u6839\u636eurl\u751f\u6210\u89c6\u9891\u9884\u89c8\\n * \u4fee\u6539\uff1a\u5904\u7406\u901a\u7528\u89c6\u9891\u4ee3\u7801iframe   lzw 2017-09-11\\n * @param url\\n */\\nfunction createPreviewVideo(url){\\n    if ( !url )return;\\n    /** \u5904\u7406\u901a\u7528\u89c6\u9891\u4ee3\u7801iframe   lzw 2017-09-11 **/\\n    url = utils.trim(url);\\n    if(/^<iframe/.test(url)){\\n        var conUrl = \'\';\\n        if(/src=\\"[^s\\"]+/i.test(url)){\\n            conUrl = url.match(/src=\\"[^s\\"]+/i)[0].substr(5);\\n        }\\n        $G(\\"preview\\").innerHTML = \'<div class=\\"previewMsg\\"><span>\'+lang.urlError+\'</span></div>\'+\\n        \'<iframe class=\\"previewVideo\\"\' +\\n            \' src=\\"\'%20+%20conUrl%20+%20\'\\"\' +\\n            \' width=\\"\' + 420  + \'\\"\' +\\n            \' height=\\"\' + 280  + \'\\"\' +\\n            \' frameborder=0 allowfullscreen>\' +\\n        \'</iframe>\';\\n    } else {/** -end \u5904\u7406\u901a\u7528\u89c6\u9891\u4ee3\u7801iframe   lzw 2017-09-11 **/\\n        var conUrl = convert_url(url);\\n        conUrl = utils.unhtmlForUrl(conUrl);\\n        $G(\\"preview\\").innerHTML = \'<div class=\\"previewMsg\\"><span>\'+lang.urlError+\'</span></div>\'+\\n        \'<embed class=\\"previewVideo\\" type=\\"application/x-shockwave-flash\\" pluginspage=\\"http://www.macromedia.com/go/getflashplayer\\"\' +\\n            \' src=\\"\'%20+%20conUrl%20+%20\'\\"\' +\\n            \' width=\\"\' + 420  + \'\\"\' +\\n            \' height=\\"\' + 280  + \'\\"\' +\\n            \' wmode=\\"transparent\\" play=\\"true\\" loop=\\"false\\" menu=\\"false\\" allowscriptaccess=\\"never\\" allowfullscreen=\\"true\\" >\' +\\n        \'</embed>\';\\n    }\\n}///** \u5904\u7406\u901a\u7528\u89c6\u9891\u4ee3\u7801iframe   lzw 2017-09-11 **/\\n... \\n```\\n\\n\u5927\u5bb6\u53ef\u4ee5\u81ea\u884c\u6bd4\u8f83\u4e0b,\u7edd\u5bf9\u6709\u533a\u522b,\u4f46\u662f\u51b3\u4e0d\u4f1a\u5f71\u54cdueditor\u7684\u6b63\u5e38\u529f\u80fd\uff0c\u4f46\u8fd9\u91cc\u8fd8\u9700\u8981\u6bd4\u8f83\u91cd\u8981\u7684\u4e00\u6b65\uff0c\u6dfb\u52a0\u8fc7\u6ee4\u767d\u540d\u5355  \\n\u5728**ueditor/ueditor.config.js**\u7684 **whitList** \u6dfb\u52a0\u767d\u540d\u5355\\n\\n``` js \\n// xss\u8fc7\u6ee4\u767d\u540d\u5355 \u540d\u5355\u6765\u6e90: https://raw.githubusercontent.com/leizongmin/js-xss/master/lib/default.js\\n,whitList: {\\n    ...\\n    iframe: [\'src\', \'class\', \'height\', \'width\', \'max-width\', \'max-height\', \'align\', \'frameborder\', \'allowfullscreen\']\\n} \\n```\\n\\n\u5230\u8fd9\u91cc\u5c31\u5927\u529f\u544a\u6210\u4e86\u3002"}]}')}}]);