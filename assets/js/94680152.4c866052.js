"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[85378],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>m});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),u=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=u(r),m=a,f=d["".concat(s,".").concat(m)]||d[m]||p[m]||l;return r?n.createElement(f,i(i({ref:t},c),{},{components:r})):n.createElement(f,i({ref:t},c))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=r.length,i=new Array(l);i[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var u=2;u<l;u++)i[u]=r[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},12141:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>l,metadata:()=>o,toc:()=>u});var n=r(87462),a=(r(67294),r(3905));const l={title:"\u89e3\u51b3ueditor\u63d2\u5165\u7b2c\u4e09\u65b9\u89c6\u9891\u7f51\u7ad9\u901a\u7528\u4ee3\u7801\u7684\u95ee\u9898",ID:"15344",date:"2018-02-16 20:27:00",categories:["posts","js-css"],tags:["posts","js-css"],authors:["lzw"],slug:"/15344",type:"blog"},i=void 0,o={permalink:"/docusaurus/blog/15344",editUrl:"https://github.com/lzwdot/docusaurus/blog/2018/02-16-15344.md",source:"@site/blog/2018/02-16-15344.md",title:"\u89e3\u51b3ueditor\u63d2\u5165\u7b2c\u4e09\u65b9\u89c6\u9891\u7f51\u7ad9\u901a\u7528\u4ee3\u7801\u7684\u95ee\u9898",description:"\u767e\u5ea6ueditor\u7f16\u8f91\u5668\u4f7f\u7528\u975e\u5e38\u5e7f\u6cdb\uff0c\u7531\u6b64\u884d\u751f\u7684\u5404\u79cd\u5b9a\u5236\u5316\u7684\u7f16\u8f91\u5668\u4e5f\u975e\u5e38\u591a\uff0c\u5982\u5fae\u4fe1\u516c\u4f17\u53f7\u6587\u7ae0\u7f16\u8f91\u5668\u7b49\u90fd\u662f\u57fa\u4e8eueditor\u7f16\u8f91\u5668\u5f00\u53d1\u7684\uff0c\u4f46\u5b98\u65b9\u7ef4\u62a4\u7684\u662f\u901a\u7528\u7684pc\u7f16\u8f91\u5668\uff0c\u6709\u4e9b\u683c\u5f0f\u4e0d\u9002\u5e94\u79fb\u52a8h5\u9875\u9762\u663e\u793a\uff0c\u6bd4\u5982\u56fe\u7247\u81ea\u9002\u5e94\uff0c\u4e0d\u80fd\u63d2\u5165\u7b2c\u4e09\u65b9\u7f51\u7ad9\u89c6\u9891\u901a\u7528\u4ee3\u7801\u7b49\u3002\u56e0\u6b64\uff0c\u4e5f\u9700\u8981\u8fdb\u884c\u5fc5\u8981\u7684\u4fee\u6539\u6765\u6ee1\u8db3\u5b9a\u5236\u5316\u7684\u9700\u6c42\u3002",date:"2018-02-16T20:27:00.000Z",formattedDate:"2018\u5e742\u670816\u65e5",tags:[{label:"posts",permalink:"/docusaurus/blog/tags/posts"},{label:"js-css",permalink:"/docusaurus/blog/tags/js-css"}],readingTime:4.19,hasTruncateMarker:!0,authors:[{name:"lzw.",title:"\u4e00\u4e2a web \u5f00\u53d1\u8005",url:"https://github.com/lzwdot",imageURL:"https://avatars.githubusercontent.com/u/24477920?v=4",key:"lzw"}],frontMatter:{title:"\u89e3\u51b3ueditor\u63d2\u5165\u7b2c\u4e09\u65b9\u89c6\u9891\u7f51\u7ad9\u901a\u7528\u4ee3\u7801\u7684\u95ee\u9898",ID:"15344",date:"2018-02-16 20:27:00",categories:["posts","js-css"],tags:["posts","js-css"],authors:["lzw"],slug:"/15344",type:"blog"},prevItem:{title:"\u539f\u751fjs\u64cd\u4f5ccookie\uff0c\u6709\u6548\u671f\u81f3\u665a\u4e0a23\u70b959\u520659\u79d2",permalink:"/docusaurus/blog/15825"}},s={authorsImageUrls:[void 0]},u=[{value:"\u652f\u6301\u63d2\u5165\u89c6\u9891\u529f\u80fd",id:"\u652f\u6301\u63d2\u5165\u89c6\u9891\u529f\u80fd",level:3},{value:"\u89c6\u9891\u64ad\u653e\u517c\u5bb9\u624b\u673a\u64ad\u653e",id:"\u89c6\u9891\u64ad\u653e\u517c\u5bb9\u624b\u673a\u64ad\u653e",level:3}],c={toc:u};function p(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\u767e\u5ea6ueditor\u7f16\u8f91\u5668\u4f7f\u7528\u975e\u5e38\u5e7f\u6cdb\uff0c\u7531\u6b64\u884d\u751f\u7684\u5404\u79cd\u5b9a\u5236\u5316\u7684\u7f16\u8f91\u5668\u4e5f\u975e\u5e38\u591a\uff0c\u5982\u5fae\u4fe1\u516c\u4f17\u53f7\u6587\u7ae0\u7f16\u8f91\u5668\u7b49\u90fd\u662f\u57fa\u4e8eueditor\u7f16\u8f91\u5668\u5f00\u53d1\u7684\uff0c\u4f46\u5b98\u65b9\u7ef4\u62a4\u7684\u662f\u901a\u7528\u7684pc\u7f16\u8f91\u5668\uff0c\u6709\u4e9b\u683c\u5f0f\u4e0d\u9002\u5e94\u79fb\u52a8h5\u9875\u9762\u663e\u793a\uff0c\u6bd4\u5982\u56fe\u7247\u81ea\u9002\u5e94\uff0c\u4e0d\u80fd\u63d2\u5165\u7b2c\u4e09\u65b9\u7f51\u7ad9\u89c6\u9891\u901a\u7528\u4ee3\u7801\u7b49\u3002\u56e0\u6b64\uff0c\u4e5f\u9700\u8981\u8fdb\u884c\u5fc5\u8981\u7684\u4fee\u6539\u6765\u6ee1\u8db3\u5b9a\u5236\u5316\u7684\u9700\u6c42\u3002"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u6240\u8c13\u7b2c\u4e09\u65b9\u89c6\u9891\u7f51\u7ad9\u901a\u7528\u4ee3\u7801\uff0c\u5c31\u662f\u89c6\u9891\u7f51\u7ad9\u63d0\u4f9b\u5206\u4eab\u529f\u80fd\u65f6\uff0c\u53ef\u9009\u62e9html\u4ee3\u7801\uff0c\u901a\u8fc7\u4ee3\u7801\u7b49\uff0c\u901a\u7528\u4ee3\u7801\u53ef\u4ee5\u517c\u5bb9\u624b\u673a\u64ad\u653e\uff0c\u6bd4\u5982\u5728iPhone\uff0cipad\u4e0a\u64ad\u653e")),(0,a.kt)("p",null,"\u9700\u8981\u6ee1\u8db3\u7684\u529f\u80fd\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u652f\u6301\u63d2\u5165\u89c6\u9891\u529f\u80fd"),(0,a.kt)("li",{parentName:"ul"},"\u89c6\u9891\u64ad\u653e\u517c\u5bb9\u624b\u673a\u64ad\u653e,\u5982iPhone")),(0,a.kt)("h3",{id:"\u652f\u6301\u63d2\u5165\u89c6\u9891\u529f\u80fd"},"\u652f\u6301\u63d2\u5165\u89c6\u9891\u529f\u80fd"),(0,a.kt)("p",null,"\u57fa\u4e8eueditor\u7f16\u8f91\u5668\u5f3a\u5927\u7684\u53ef\u5b9a\u5236\u5316\u7684\u529f\u80fd\uff0c\u652f\u6301\u63d2\u5165\u89c6\u9891\u529f\u80fd\u975e\u5e38\u7b80\u5355",(0,a.kt)("br",{parentName:"p"}),"\n","\u5728",(0,a.kt)("strong",{parentName:"p"},"ueditor/ueditor.config.js"),"\u7684",(0,a.kt)("strong",{parentName:"p"},"toolbars"),"\u6dfb\u52a0 ",(0,a.kt)("strong",{parentName:"p"},"insertvideo"),"\u5373\u53ef"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"//\u5de5\u5177\u680f\u4e0a\u7684\u6240\u6709\u7684\u529f\u80fd\u6309\u94ae\u548c\u4e0b\u62c9\u6846\uff0c\u53ef\u4ee5\u5728new\u7f16\u8f91\u5668\u7684\u5b9e\u4f8b\u65f6\u9009\u62e9\u81ea\u5df1\u9700\u8981\u7684\u91cd\u65b0\u5b9a\u4e49\n, toolbars: [[...'insertvideo',]] \n")),(0,a.kt)("h3",{id:"\u89c6\u9891\u64ad\u653e\u517c\u5bb9\u624b\u673a\u64ad\u653e"},"\u89c6\u9891\u64ad\u653e\u517c\u5bb9\u624b\u673a\u64ad\u653e"),(0,a.kt)("p",null,"\u8fd9\u91cc\u4e3b\u8981\u662f\u63d2\u5165\u7b2c\u4e09\u65b9\u89c6\u9891\u64ad\u653e\u5668\uff0c\u800c\u4e14\u4e3a\u4e86\u517c\u5bb9\u624b\u673a\u64ad\u653e\uff0c\u4f1a\u4f7f\u7528\u7b2c\u4e09\u65b9\u89c6\u9891\u7f51\u7ad9\u901a\u7528\u4ee3\u7801\uff08\u53ef\u4ee5\u5728\u89c6\u9891\u64ad\u653e\u9875-\u5206\u4eab-\u901a\u7528\u4ee3\u7801\u4e2d\u83b7\u53d6\uff09\uff0c\u4e00\u822c\u683c\u5f0f\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'<iframe frameborder="0" width="640" height="498" src="https://v.qq.com/iframe/player.html?vid=y0016tj0qvh&tiny=0&auto=0" allowfullscreen></iframe> \n')),(0,a.kt)("p",null,"ueditor\u7f16\u8f91\u5668\u89c6\u9891\u7f51\u5740\u9ed8\u8ba4\u7684\u4e0d\u652f\u6301\u63d2\u5165iframe\u683c\u5f0f\uff0c\u8fd9\u91cc\u9700\u8981\u4fee\u6539\u4e0b\u6e90\u7801",(0,a.kt)("br",{parentName:"p"}),"\n","\u8def\u5f84\uff1a",(0,a.kt)("strong",{parentName:"p"},"ueditor/dialogs/video/video.js")," \uff0c\u4fee\u6539\u7684\u5730\u65b9\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'...\n/**\n * \u5c06\u5355\u4e2a\u89c6\u9891\u4fe1\u606f\u63d2\u5165\u7f16\u8f91\u5668\u4e2d\n * \u4fee\u6539\uff1a\u5904\u7406\u901a\u7528\u89c6\u9891\u4ee3\u7801iframe   lzw 2017-09-11\n */\nfunction insertSingle(){\n    var width = $G("videoWidth"),\n        height = $G("videoHeight"),\n        url=$G(\'videoUrl\').value,\n        align = findFocus("videoFloat","name");\n    if(!url) return false;\n    if ( !checkNum( [width, height] ) ) return false;\n    /**\u5904\u7406\u901a\u7528\u89c6\u9891\u4ee3\u7801iframe   lzw 2017-09-11 **/\n    url = utils.trim(url);\n    if(/^<iframe/.test(url)){\n        var conUrl = \'\';\n        if(/src="[^s"]+/i.test(url)){\n            conUrl = url.match(/src="[^s"]+/i)[0].substr(5);\n        }\n        var newIframe = editor.document.createElement("iframe");\n        var div;\n        newIframe.setAttribute("src",/http://|https:///ig.test(conUrl) ? conUrl : "http://"+conUrl);\n        /^[1-9]+[.]?d*$/g.test( width.value ) ? newIframe.setAttribute("width",width.value) : "";\n        /^[1-9]+[.]?d*$/g.test( height.value ) ? newIframe.setAttribute("height",height.value) : "";\n        //newIframe.setAttribute("scrolling","no");\n        newIframe.setAttribute("frameborder","0",0);\n        newIframe.setAttribute("allowfullscreen","allowfullscreen");\n        newIframe.setAttribute("align",align);\n        div = editor.document.createElement("div");\n        div.appendChild(newIframe);\n        //alert(div.innerHTML);\n        console.log(div.innerHTML);\n        editor.execCommand("inserthtml",div.innerHTML,true);\n    } else {/** -end \u5904\u7406\u901a\u7528\u89c6\u9891\u4ee3\u7801iframe   lzw 2017-09-11 **/\n        editor.execCommand(\'insertvideo\', {\n            url: convert_url(url),\n            width: width.value,\n            height: height.value,\n            align: align\n        }, isModifyUploadVideo ? \'upload\':null);\n    }///**\u5904\u7406\u901a\u7528\u89c6\u9891\u4ee3\u7801iframe   lzw 2017-09-11 **/\n}\n...\n/**\n * \u6839\u636eurl\u751f\u6210\u89c6\u9891\u9884\u89c8\n * \u4fee\u6539\uff1a\u5904\u7406\u901a\u7528\u89c6\u9891\u4ee3\u7801iframe   lzw 2017-09-11\n * @param url\n */\nfunction createPreviewVideo(url){\n    if ( !url )return;\n    /** \u5904\u7406\u901a\u7528\u89c6\u9891\u4ee3\u7801iframe   lzw 2017-09-11 **/\n    url = utils.trim(url);\n    if(/^<iframe/.test(url)){\n        var conUrl = \'\';\n        if(/src="[^s"]+/i.test(url)){\n            conUrl = url.match(/src="[^s"]+/i)[0].substr(5);\n        }\n        $G("preview").innerHTML = \'<div class="previewMsg"><span>\'+lang.urlError+\'</span></div>\'+\n        \'<iframe class="previewVideo"\' +\n            \' src="\'%20+%20conUrl%20+%20\'"\' +\n            \' width="\' + 420  + \'"\' +\n            \' height="\' + 280  + \'"\' +\n            \' frameborder=0 allowfullscreen>\' +\n        \'</iframe>\';\n    } else {/** -end \u5904\u7406\u901a\u7528\u89c6\u9891\u4ee3\u7801iframe   lzw 2017-09-11 **/\n        var conUrl = convert_url(url);\n        conUrl = utils.unhtmlForUrl(conUrl);\n        $G("preview").innerHTML = \'<div class="previewMsg"><span>\'+lang.urlError+\'</span></div>\'+\n        \'<embed class="previewVideo" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"\' +\n            \' src="\'%20+%20conUrl%20+%20\'"\' +\n            \' width="\' + 420  + \'"\' +\n            \' height="\' + 280  + \'"\' +\n            \' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >\' +\n        \'</embed>\';\n    }\n}///** \u5904\u7406\u901a\u7528\u89c6\u9891\u4ee3\u7801iframe   lzw 2017-09-11 **/\n... \n')),(0,a.kt)("p",null,"\u5927\u5bb6\u53ef\u4ee5\u81ea\u884c\u6bd4\u8f83\u4e0b,\u7edd\u5bf9\u6709\u533a\u522b,\u4f46\u662f\u51b3\u4e0d\u4f1a\u5f71\u54cdueditor\u7684\u6b63\u5e38\u529f\u80fd\uff0c\u4f46\u8fd9\u91cc\u8fd8\u9700\u8981\u6bd4\u8f83\u91cd\u8981\u7684\u4e00\u6b65\uff0c\u6dfb\u52a0\u8fc7\u6ee4\u767d\u540d\u5355",(0,a.kt)("br",{parentName:"p"}),"\n","\u5728",(0,a.kt)("strong",{parentName:"p"},"ueditor/ueditor.config.js"),"\u7684 ",(0,a.kt)("strong",{parentName:"p"},"whitList")," \u6dfb\u52a0\u767d\u540d\u5355"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// xss\u8fc7\u6ee4\u767d\u540d\u5355 \u540d\u5355\u6765\u6e90: https://raw.githubusercontent.com/leizongmin/js-xss/master/lib/default.js\n,whitList: {\n    ...\n    iframe: ['src', 'class', 'height', 'width', 'max-width', 'max-height', 'align', 'frameborder', 'allowfullscreen']\n} \n")),(0,a.kt)("p",null,"\u5230\u8fd9\u91cc\u5c31\u5927\u529f\u544a\u6210\u4e86\u3002"))}p.isMDXComponent=!0}}]);