"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[81817],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>g});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=r.createContext({}),s=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=s(e.components);return r.createElement(p.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),m=s(t),g=a,d=m["".concat(p,".").concat(g)]||m[g]||c[g]||o;return t?r.createElement(d,l(l({ref:n},u),{},{components:t})):r.createElement(d,l({ref:n},u))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,l=new Array(o);l[0]=m;var i={};for(var p in n)hasOwnProperty.call(n,p)&&(i[p]=n[p]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var s=2;s<o;s++)l[s]=t[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},35054:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>s});var r=t(87462),a=(t(67294),t(3905));const o={title:"JS \u7cbe\u5ea6\u95ee\u9898\u7531\u6765\u53ca\u89e3\u51b3",ID:29458,date:"2022-02-11 21:20:21",authors:["lzw"],tags:["js","BigInt"],slug:"/29458",type:"blog"},l=void 0,i={permalink:"/docusaurus/blog/29458",editUrl:"https://github.com/lzwdot/docusaurus/blog/2022/02-11-29458/index.md",source:"@site/blog/2022/02-11-29458/index.md",title:"JS \u7cbe\u5ea6\u95ee\u9898\u7531\u6765\u53ca\u89e3\u51b3",description:"\u5728 js \u6d6e\u70b9\u6570\u8ba1\u7b97\u5b58\u5728\u7cbe\u5ea6\u95ee\u9898\uff0c\u8868\u73b0\u4e3a\uff1a0.1 + 0.2 = 0.30000000000000004\uff0c\u800c\u4e0d\u662f\u9884\u671f\u7684 0.3\uff0c\u8fd9\u91cc\u6d89\u53ca\u5230 js \u4e2d\u8fdb\u5236\u7684\u95ee\u9898",date:"2022-02-11T21:20:21.000Z",formattedDate:"2022\u5e742\u670811\u65e5",tags:[{label:"js",permalink:"/docusaurus/blog/tags/js"},{label:"BigInt",permalink:"/docusaurus/blog/tags/big-int"}],readingTime:4.345,hasTruncateMarker:!0,authors:[{name:"lzw.",title:"\u4e00\u4e2a web \u5f00\u53d1\u8005",url:"https://github.com/lzwdot",imageURL:"https://avatars.githubusercontent.com/u/24477920?v=4",key:"lzw"}],frontMatter:{title:"JS \u7cbe\u5ea6\u95ee\u9898\u7531\u6765\u53ca\u89e3\u51b3",ID:29458,date:"2022-02-11 21:20:21",authors:["lzw"],tags:["js","BigInt"],slug:"/29458",type:"blog"},nextItem:{title:"\u6587\u4ef6\u4e0a\u4f20\u548c\u4f18\u5316",permalink:"/docusaurus/blog/29206"}},p={authorsImageUrls:[void 0]},s=[{value:"\u95ee\u9898\u7531\u6765",id:"\u95ee\u9898\u7531\u6765",level:2},{value:"\u53cc\u7cbe\u5ea6 64 \u4f4d",id:"\u53cc\u7cbe\u5ea6-64-\u4f4d",level:3},{value:"\u89e3\u51b3\u65b9\u6848",id:"\u89e3\u51b3\u65b9\u6848",level:2},{value:"\u4f7f\u7528 BigInt \u7c7b\u578b",id:"\u4f7f\u7528-bigint-\u7c7b\u578b",level:3},{value:"\u4f7f\u7528\u6210\u719f\u5e93\uff08\u63a8\u8350\uff09",id:"\u4f7f\u7528\u6210\u719f\u5e93\u63a8\u8350",level:3}],u={toc:s};function c(e){let{components:n,...o}=e;return(0,a.kt)("wrapper",(0,r.Z)({},u,o,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\u5728 js \u6d6e\u70b9\u6570\u8ba1\u7b97\u5b58\u5728\u7cbe\u5ea6\u95ee\u9898\uff0c\u8868\u73b0\u4e3a\uff1a",(0,a.kt)("inlineCode",{parentName:"p"},"0.1 + 0.2 = 0.30000000000000004"),"\uff0c\u800c\u4e0d\u662f\u9884\u671f\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"0.3"),"\uff0c\u8fd9\u91cc\u6d89\u53ca\u5230 js \u4e2d\u8fdb\u5236\u7684\u95ee\u9898"),(0,a.kt)("h2",{id:"\u95ee\u9898\u7531\u6765"},"\u95ee\u9898\u7531\u6765"),(0,a.kt)("p",null,"\u5148\u770b\u4e00\u4e2a\u5341\u8fdb\u5236\u8f6c\u4e8c\u8fdb\u5236\u7684\u8ba1\u7b97\u8fc7\u7a0b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"(57).toString(2); // '111001'\n\n// 57 /2 \u53d6\u4f59\n// 28-1 => 14-0 => 7-0 => 3-1 => 1-1 => 1 \u6240\u4ee5\u4ece\u540e\u5f80\u524d\u7684\u4e8c\u8fdb\u5236\u5c31\u662f 111001\n")),(0,a.kt)("p",null,"\u518d\u770b\u4e00\u4e2a\u4f8b\u5b50"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"(26).toString(2); // 11010\n\n// 26 /2 \u53d6\u4f59\n// 13-0 => 6-1 => 3-0 => 1-1 =>1 \u6240\u4ee5\u4ece\u540e\u5f80\u524d\u7684\u4e8c\u8fdb\u5236\u5c31\u662f 11010\n")),(0,a.kt)("p",null,"\u63a5\u7740\u770b\u4e0b 0.1 \u548c 0.2 \u8ba1\u7b97\u8fc7\u7a0b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"(0.1)\n  .toString(2)(\n    // 0.0001100110011001100110011001100110011001100110011001101\n    0.2\n  )\n  .toString(2); // 0.001100110011001100110011001100110011001100110011001101\n\n// 0.1 * 2 \u53d6\u6574\n// 0.1 * 2 = 0.2 => 0\n// 0.2 * 2 = 0.4 => 0\n// 0.4 * 2 = 0.8 => 0\n// 0.8 * 2 = 1.6 => 1\n// 0.6 * 2 = 1.2 => 1\n// 0.2 * 2 = 0.4 => 0\n// 0.4 * 2 = 0.8 => 0\n// 0.8 * 2 = 1.6 => 1\n// 0.6 * 2 = 1.2 => 1\n// 0.2 * 2 = 0.4 => 0\n// 0.4 * 2 = 0.8 => 0\n// ...\n// \u6240\u4ee5\u4ece\u524d\u5f80\u540e\u7684\u4e8c\u8fdb\u5236\u5bf9\u5e94\u4e86\u4e0a\u9762\u7684 0.00011001100... \u53ef\u4ee5\u770b\u5230 1100 \u5f00\u59cb\u65e0\u9650\u5faa\u73af\n")),(0,a.kt)("p",null,"\u6839\u636e\u4e0a\u9762\u7684\u4f8b\u5b50\u6709\u8fd9\u4e48\u51e0\u4e2a\u95ee\u9898\uff1f"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"js \u4e2d\u6700\u5927\u5b89\u5168\u6570\u662f\u591a\u5c11"),(0,a.kt)("li",{parentName:"ul"},"js \u4e2d\u80fd\u8868\u793a\u6700\u5927\u7684\u6570\u662f\u591a\u5c11"),(0,a.kt)("li",{parentName:"ul"},"js \u4e2d\u6d6e\u70b9\u6570\u8ba1\u7b97\u6709\u4ec0\u4e48\u9677\u9631")),(0,a.kt)("p",null,"\u770b\u4e00\u4e2a\u56db\u820d\u4e94\u5165\u7684\u4f8b\u5b50\uff0c\u7ed3\u679c\u5982\u4e0b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"(0.104)\n  .toFixed(2)(\n    // 0.10\n    0.105\n  )\n  .toFixed(2)(\n    // 0.10\n    0.106\n  )\n  .toFixed(2); // 0.11\n")),(0,a.kt)("p",null,"\u4e3a\u5565 ",(0,a.kt)("inlineCode",{parentName:"p"},"0.105")," \u4f1a\u8fd9\u6837\u7684\u7ed3\u679c\uff0c\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"toPrecision")," \u6765\u6d4b\u8bd5"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"(0.105)\n  .toPrecision(17)(\n    // 0.10500000000000000\n    0.105\n  )\n  .toPrecision(18)(\n    // 0.104999999999999996\n    0.105\n  )\n  .toPrecision(19); // 0.10499999999999999611\n")),(0,a.kt)("h3",{id:"\u53cc\u7cbe\u5ea6-64-\u4f4d"},"\u53cc\u7cbe\u5ea6 64 \u4f4d"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"js",src:t(65729).Z,width:"1950",height:"138"})),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"1 \u4f4d\u7528\u6765\u8868\u793a\u7b26\u53f7\u4f4d",(0,a.kt)("br",{parentName:"p"}),"\n","11 \u4f4d\u7528\u6765\u8868\u793a\u6307\u6570\uff0c\u90a3\u4e48\u6307\u6570\u6700\u5927\u7684\u6570\u503c\u5c31\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"2 ** 11 = 2048"),"\uff0c\u51cf\u53bb\u6307\u6570\u7b26\u53f7\u4f4d\uff0c\u8303\u56f4\u533a\u95f4\u5c31\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"(-2 ** 1024, +2 ** 1024)"),(0,a.kt)("br",{parentName:"p"}),"\n","52 \u4f4d\u8868\u793a\u5c3e\u6570\uff0c",(0,a.kt)("strong",{parentName:"p"},"IEEE754 \u89c4\u5b9a\u5c3e\u6570\u7b2c\u4e00\u4f4d\u9690\u542b\u4e3a 1\uff0c\u6240\u4ee5 52 \u4f4d\u6709\u6548\u6570\u5b57\u5b9e\u9645\u53ef\u4ee5\u5b58\u50a8 53 \u4f4d"),"\u3002")),(0,a.kt)("p",null,"\u90a3\u4e48\u56de\u7b54\u4e4b\u524d\u7684\u95ee\u9898"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"js \u4e2d\u6700\u5927\u5b89\u5168\u6570\u662f\u591a\u5c11 ",(0,a.kt)("inlineCode",{parentName:"li"},"(-2 ** 53, +2 ** 53)")," \u5373 ",(0,a.kt)("inlineCode",{parentName:"li"},"2 ** 53 -1")," // 9007199254740991"),(0,a.kt)("li",{parentName:"ul"},"js \u4e2d\u80fd\u8868\u793a\u6700\u5927\u7684\u6570\u662f\u591a\u5c11 ",(0,a.kt)("inlineCode",{parentName:"li"},"(-2 ** 1024 + 1, +2 ** 1024 - 1)")," Chrome \u6d4f\u89c8\u5668\u80fd\u663e\u793a\u7684\u7684\u6700\u5927\u503c ",(0,a.kt)("inlineCode",{parentName:"li"},"2 ** 1023 * 1.999999999999999")," // 1.797693134862315e+308"),(0,a.kt)("li",{parentName:"ul"},"js \u4e2d\u6d6e\u70b9\u6570\u8ba1\u7b97\u6709\u4ec0\u4e48\u9677\u9631\uff0c\u5f53\u6570\u503c\u5927\u4e8e ",(0,a.kt)("inlineCode",{parentName:"li"},"2 ** 53")," \u5c31\u4f1a\u51fa\u73b0\u5751\uff0c\u6bd4\u5982\uff1a",(0,a.kt)("inlineCode",{parentName:"li"},"2 ** 53 === 2 ** 53 + 1"))),(0,a.kt)("p",null,"\u6253\u5370 ",(0,a.kt)("inlineCode",{parentName:"p"},"Number.prototype")," \u4e5f\u53ef\u4ee5\u770b\u5230"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'Number {0, constructor: \u0192, toExponential: \u0192, toFixed: \u0192, toPrecision: \u0192, \u2026}\nconstructor: \u0192 Number()\nEPSILON: 2.220446049250313e-16\nMAX_SAFE_INTEGER: 9007199254740991\nMAX_VALUE: 1.7976931348623157e+308\nMIN_SAFE_INTEGER: -9007199254740991\nMIN_VALUE: 5e-324\nNEGATIVE_INFINITY: -Infinity\nNaN: NaN\nPOSITIVE_INFINITY: Infinity\narguments: \uff08\u2026\uff09\ncaller: \uff08\u2026\uff09\nisFinite: \u0192 isFinite()\nisInteger: \u0192 isInteger()\nisNaN: \u0192 isNaN()\nisSafeInteger: \u0192 isSafeInteger()\nlength: 1\nname: "Number"\nparseFloat: \u0192 parseFloat()\nparseInt: \u0192 parseInt()\nprototype: Number {0, constructor: \u0192, toExponential: \u0192, toFixed: \u0192, toPrecision: \u0192, \u2026}\n[[Prototype]]: \u0192 ()\n[[Scopes]]: Scopes[0]\ntoExponential: \u0192 toExponential()\ntoFixed: \u0192 toFixed()\ntoLocaleString: \u0192 toLocaleString()\ntoPrecision: \u0192 toPrecision()\ntoString: \u0192 toString()\nvalueOf: \u0192 valueOf()\n[[Prototype]]: Object\n[[PrimitiveValue]]: 0\n')),(0,a.kt)("h2",{id:"\u89e3\u51b3\u65b9\u6848"},"\u89e3\u51b3\u65b9\u6848"),(0,a.kt)("p",null,"\u8fd9\u91cc\u7b80\u8981\u63d0\u53ca\u4e24\u79cd\u65b9\u6cd5"),(0,a.kt)("h3",{id:"\u4f7f\u7528-bigint-\u7c7b\u578b"},"\u4f7f\u7528 BigInt \u7c7b\u578b"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u6ce8\u610f\u53ea\u9002\u5408\u6574\u6570\uff0c\u53c2\u8003\uff1a",(0,a.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/BigInt"},"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/BigInt"))),(0,a.kt)("p",null,"\u770b\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6bd4\u5982\u4e4b\u524d\u63d0\u5230\u7684\u6700\u5927\u5b89\u5168\u6570"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const previousMaxSafe = BigInt(Number.MAX_SAFE_INTEGER);\n// \u21aa 9007199254740991n\n\nconst maxPlusOne = previousMaxSafe + 1n;\n// \u21aa 9007199254740992n\n\nconst theFuture = previousMaxSafe + 2n;\n// \u21aa 9007199254740993n, this works now!\n\nconst multi = previousMaxSafe * 2n;\n// \u21aa 18014398509481982n\n\nconst subtr = multi \u2013 10n;\n// \u21aa 18014398509481972n\n\nconst mod = multi % 10n;\n// \u21aa 2n\n\nconst bigN = 2n ** 54n;\n// \u21aa 18014398509481984n\n\nbigN * -1n\n// \u21aa \u201318014398509481984n\n")),(0,a.kt)("p",null,"\u90a3\u4e48\uff0c\u89e3\u51b3 ",(0,a.kt)("inlineCode",{parentName:"p"},"0.1 + 0.2 === 0.3")," \u7684\u601d\u8def\u53ef\u4ee5\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"BigInt(0.1*10)+BigInt(0.2*10) === BigInt(0.3*10)")),(0,a.kt)("h3",{id:"\u4f7f\u7528\u6210\u719f\u5e93\u63a8\u8350"},"\u4f7f\u7528\u6210\u719f\u5e93\uff08\u63a8\u8350\uff09"),(0,a.kt)("p",null,"\u8fd9\u91cc\u63a8\u8350\u4e24\u4e2a\u5e93\u6765\u89e3\u51b3\u6d6e\u70b9\u6570\u7cbe\u5ea6\u8ba1\u7b97\u7684\u95ee\u9898"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"number-precision : ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/nefe/number-precision"},"https://github.com/nefe/number-precision"),(0,a.kt)("br",{parentName:"p"}),"\n","bignumber.js : ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/MikeMcl/bignumber.js"},"https://github.com/MikeMcl/bignumber.js"))))}c.isMDXComponent=!0},65729:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/js-202202112227-0ed74b0c5ec9844f22d07a3d6e1dfbcb.png"}}]);